import{Q as _,a as f,b as m,c as p}from"./QTabPanels.837aa76c.js";import{_ as c,e as w,m as v,r as g,ao as b,aM as h,p as y,o as q,i as C,n as t,w as i,ar as V,F as R,aI as n}from"./index.bd67c83e.js";import{M}from"./BarChart.8187432f.js";import"./QResizeObserver.9d13a10b.js";import"./rtl.b51694b1.js";import"./touch.70a9dd44.js";import"./selection.ee301375.js";import"./use-cache.b0833c75.js";const T=w({name:"App",components:{MonthlyChart:M},computed:{...v("reports",["getReports"])},data(){return{data_values:[],data_labels:[],fuel_assets:[],fuel_consumed_data:[],refueling_data:[],mileage_data:[],trips_data:[],driver_trips_count:[],trip_drivers:[],trips_mileage:[],tab:g("assets")}},async mounted(){let s=b.findIn(this.getReports.activeReports),e=s[s.findIndex(a=>a.title==="Trip report")];if((e&&e.sheets=="Exceeded Memory Limit"||e.sheets==null)&&await h.report.retreiveReport(e.id).then(a=>{e=a.report}),e&&e.sheets[0].header!="No data found"){let a=e.sheets[0].sections[0].data,r=e.sheets;if(e.sheets.length>1){for(let l in a)this.data_labels.push(a[l].header),this.mileage_data.push(a[l].rows[0].length.raw?a[l].rows[0].length.raw:0),this.trips_data.push(a[l].rows[0].count.raw?a[l].rows[0].count.raw:0);for(let l in r)l!="0"&&(this.trip_drivers.push(r[l].sections[1].data[0].rows[0].driver.v),this.driver_trips_count.push(r[l].sections[1].data[0].rows[0].count.raw?r[l].sections[1].data[0].rows[0].count.raw:0),this.trips_mileage.push(r[l].sections[1].data[0].rows[0].length.raw?r[l].sections[1].data[0].rows[0].length.raw:0))}else a=e.sheets[0].sections[1].data[0].rows[0],this.data_labels.push(e.sheets[0].header),this.mileage_data.push(a.length.raw?a.length.raw:0),this.trips_data.push(a.count.raw?a.count.raw:0),this.trip_drivers.push(e.sheets[0].sections[1].data[0].rows[0].driver.v),this.driver_trips_count.push(e.sheets[0].sections[1].data[0].rows[0].count.raw?e.sheets[0].sections[1].data[0].rows[0].count.raw:0),this.trips_mileage.push(e.sheets[0].sections[1].data[0].rows[0].length.raw?e.sheets[0].sections[1].data[0].rows[0].length.raw:0)}let o=s[s.findIndex(a=>a.title==="Fuel report")];if((o&&o.sheets=="Exceeded Memory Limit"||o.sheets==null)&&await h.report.retreiveReport(o.id).then(a=>{o=a.report}),o&&o.sheets[0].sections[0].text!="No data")if(o.sheets[0].header.toLowerCase()=="summary"){let a=o.sheets[0].sections[0].data[0].rows;for(let r in a)this.fuel_assets.push(a[r].object.v),this.refueling_data.push(a[r].fillingsVolume.raw?a[r].fillingsVolume.raw:0),this.fuel_consumed_data.push(a[r].consumed.raw?a[r].consumed.raw:0)}else{let a=o.sheets[0].sections[3].data[0].rows[0];this.fuel_assets.push(o.sheets[0].header),this.refueling_data.push(a.fillingsVolume.raw?a.fillingsVolume.raw:0),this.fuel_consumed_data.push(a.consumed.raw?a.consumed.raw:0)}}});function Q(s,e,o,a,r,l){const d=y("MonthlyChart");return q(),C(R,null,[t(_,{modelValue:s.tab,"onUpdate:modelValue":e[0]||(e[0]=u=>s.tab=u),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:i(()=>[t(m,{name:"assets",label:"Assets"}),t(m,{name:"drivers",label:"Drivers"}),t(m,{name:"fuel",label:"Fuel"})]),_:1},8,["modelValue"]),t(V),t(f,{modelValue:s.tab,"onUpdate:modelValue":e[1]||(e[1]=u=>s.tab=u),animated:""},{default:i(()=>[t(p,{name:"assets"},{default:i(()=>[t(n,{class:"col-grow q-ma-sm q-pa-sm"},{default:i(()=>[t(d,{data_labels:s.data_labels,data_values:s.mileage_data,chart_name:"Asset vs Mileage Covered (Km)"},null,8,["data_labels","data_values"])]),_:1}),t(n,{class:"col-grow q-ma-sm q-pa-sm"},{default:i(()=>[t(d,{data_labels:s.data_labels,data_values:s.trips_data,chart_name:"Asset vs Trips Count"},null,8,["data_labels","data_values"])]),_:1})]),_:1}),t(p,{name:"drivers"},{default:i(()=>[t(n,{class:"col-grow q-ma-sm q-pa-sm"},{default:i(()=>[t(d,{data_labels:s.trip_drivers,data_values:s.driver_trips_count,chart_name:"Driver vs Trips Count"},null,8,["data_labels","data_values"])]),_:1}),t(n,{class:"col-grow q-ma-sm q-pa-sm"},{default:i(()=>[t(d,{data_labels:s.trip_drivers,data_values:s.trips_mileage,chart_name:"Driver vs Trips Length (Km)"},null,8,["data_labels","data_values"])]),_:1})]),_:1}),t(p,{name:"fuel"},{default:i(()=>[t(n,{class:"col-grow q-ma-sm q-pa-sm"},{default:i(()=>[t(d,{data_labels:s.fuel_assets,data_values:s.fuel_consumed_data,chart_name:"Asset vs Fuel Consumed (L)"},null,8,["data_labels","data_values"])]),_:1}),t(n,{class:"col-grow q-ma-sm q-pa-sm"},{default:i(()=>[t(d,{data_labels:s.fuel_assets,data_values:s.refueling_data,chart_name:"Asset vs Refueling (L)"},null,8,["data_labels","data_values"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var j=c(T,[["render",Q]]);export{j as default};
