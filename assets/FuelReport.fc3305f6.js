import{_,e as v,m as h,ao as g,o as b,i as w,j as k,n as i,Q as u,w as F,F as x}from"./index.1f352bfa.js";import{Q as R}from"./QTable.0be1a932.js";import"./QItem.826b843f.js";import"./position-engine.b58e6c2f.js";import"./format.865294d5.js";const y=[{name:"asset_name",label:"Asset Name",field:"asset_name"},{name:"mileage",label:"Mileage",field:"mileage"},{name:"fuel_consumed",label:"Fuel Consumed [ltrs]",field:"fuel_consumed"},{name:"consumption",label:"Consumption",field:"consumption"},{name:"refueling",label:"Refueling",field:"refueling"},{name:"fuel_lost",label:"Fuel Lost (Siphoned) [ltrs]",field:"fuel_lost"},{name:"cost",label:"cost/ltr [Ugx]",field:"cost"},{name:"cost_of_fuel_consumed",label:"Cost Of Fuel Consumed [Ugx]",field:"cost_of_fuel_consumed"},{name:"initial_volume",label:"Initial Volume [ltrs]",field:"initial_volume"},{name:"final_volume",label:"Final Volume [ltrs]",field:"final_volume"}],C=v({data(){return{rows:[],columns:y}},computed:{...h("reports",["getReports"])},mounted(){let o=g.findIn(this.getReports.activeReports),t=o[o.findIndex(l=>l.title==="Fuel report")];if(t){let l=t.sheets[0].sections[0].data[0].rows;for(var e=0;e<l.length;e++){var s=l[e].object.v,r=l[e].fillingsVolume.v,a=l[e].consumed.v,n=3800;(n*l[e].consumed.raw).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");var c=l[e].drainsVolume.v,m=l[e].mileage_by_gps.v,f=Number(m/l[e].consumed.raw).toFixed(2),d="",p="";this.rows.push({asset_name:s,mileage:m,fuel_consumed:a,consumption:f,refueling:r,fuel_lost:c,cost:"",cost_of_fuel_consumed:"",initial_volume:d,final_volume:p})}}return{}},methods:{exportTable(){let o=[];for(let r in this.rows){let a=[];for(let n in this.columns)a[this.columns[n].label]=this.rows[r][this.columns[n].field];o.push(a)}let t="Fuel Report.xlsx",e=XLSX.utils.json_to_sheet(o),s=XLSX.utils.book_new();XLSX.utils.book_append_sheet(s,e,"myWorkSheet"),XLSX.writeFile(s,t)}}}),S={class:"full-width q-mt-md",align:"right"};function X(o,t,e,s,r,a){return b(),w(x,null,[k("div",S,[i(u,{flat:"",onClick:t[0]||(t[0]=n=>this.$router.push("/home")),icon:"keyboard_arrow_left",class:"text-positive",title:"Back"})]),i(R,{title:"Fuel Report",rows:o.rows,columns:o.columns,"row-key":"asset_name",class:"sticky-column","rows-per-page-options":[10,20,100]},{"top-right":F(()=>[i(u,{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:o.exportTable},null,8,["onClick"])]),_:1},8,["rows","columns"])],64)}var Q=_(C,[["render",X]]);export{Q as default};
