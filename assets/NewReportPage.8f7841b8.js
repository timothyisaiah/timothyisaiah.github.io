import{b as s,at as Nt,au as ea,c as Et,av as Ft,M as Ot,O as Lt,aw as ta,r as B,ax as lt,I as pe,h as g,an as Ae,y as aa,g as kt,ay as Bt,D as Ct,Q as oe,az as la,B as na,ah as ra,U as oa,a9 as ia,_ as sa,e as ua,m as da,f as St,aA as ca,aB as Rt,aC as va,p as ma,o as re,k as Ne,w as z,n as A,j as J,t as Ee,aD as fa,T as Xe,q as We,aE as Ke,i as qe,F as yt,v as bt,aF as ha,aG as ga,aq as Je,l as ya}from"./index.5b4c4d98.js";import{p as T,b as de}from"./format.865294d5.js";import{T as ba}from"./TouchPan.adee25e7.js";import{Q as _a,c as et,a as ge,b as tt}from"./QItem.0574e171.js";import{Q as Ma}from"./QPage.64b9006e.js";import{A as xa}from"./AuthErrors.1c469121.js";function ka(){const e=new Map;return{getCache:function(n,u){return e[n]===void 0?e[n]=u:e[n]},getCacheWithFn:function(n,u){return e[n]===void 0?e[n]=u():e[n]}}}const Me=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function wa(e,n,u){return Object.prototype.toString.call(e)==="[object Date]"&&(u=e.getDate(),n=e.getMonth()+1,e=e.getFullYear()),Sa(wt(e,n,u))}function Tt(e,n,u){return zt(Ca(e,n,u))}function pa(e){return Da(e)===0}function nt(e,n){return n<=6?31:n<=11||pa(e)?30:29}function Da(e){const n=Me.length;let u=Me[0],r,l,d,_,i;if(e<u||e>=Me[n-1])throw new Error("Invalid Jalaali year "+e);for(i=1;i<n&&(r=Me[i],l=r-u,!(e<r));i+=1)u=r;return _=e-u,l-_<6&&(_=_-l+I(l+4,33)*33),d=ee(ee(_+1,33)-1,4),d===-1&&(d=4),d}function jt(e,n){const u=Me.length,r=e+621;let l=-14,d=Me[0],_,i,v,p,f;if(e<d||e>=Me[u-1])throw new Error("Invalid Jalaali year "+e);for(f=1;f<u&&(_=Me[f],i=_-d,!(e<_));f+=1)l=l+I(i,33)*8+I(ee(i,33),4),d=_;p=e-d,l=l+I(p,33)*8+I(ee(p,33)+3,4),ee(i,33)===4&&i-p===4&&(l+=1);const M=I(r,4)-I((I(r,100)+1)*3,4)-150,O=20+l-M;return n||(i-p<6&&(p=p-i+I(i+4,33)*33),v=ee(ee(p+1,33)-1,4),v===-1&&(v=4)),{leap:v,gy:r,march:O}}function Ca(e,n,u){const r=jt(e,!0);return wt(r.gy,3,r.march)+(n-1)*31-I(n,7)*(n-7)+u-1}function Sa(e){const n=zt(e).gy;let u=n-621,r,l,d;const _=jt(u,!1),i=wt(n,3,_.march);if(d=e-i,d>=0){if(d<=185)return l=1+I(d,31),r=ee(d,31)+1,{jy:u,jm:l,jd:r};d-=186}else u-=1,d+=179,_.leap===1&&(d+=1);return l=7+I(d,30),r=ee(d,30)+1,{jy:u,jm:l,jd:r}}function wt(e,n,u){let r=I((e+I(n-8,6)+100100)*1461,4)+I(153*ee(n+9,12)+2,5)+u-34840408;return r=r-I(I(e+100100+I(n-8,6),100)*3,4)+752,r}function zt(e){let n=4*e+139361631;n=n+I(I(4*e+183187720,146097)*3,4)*4-3908;const u=I(ee(n,1461),4)*5+308,r=I(ee(u,153),5)+1,l=ee(I(u,153),12)+1;return{gy:I(n,1461)-100100+I(8-l,6),gm:l,gd:r}}function I(e,n){return~~(e/n)}function ee(e,n){return e-~~(e/n)*n}const Ra=["gregorian","persian"],Ta={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Ra.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},qa=["update:modelValue"];function ye(e){return e.year+"/"+T(e.month)+"/"+T(e.day)}function Ya(e,n){const u=s(()=>e.disable!==!0&&e.readonly!==!0),r=s(()=>e.editable===!0?0:-1),l=s(()=>{const i=[];return e.color!==void 0&&i.push(`bg-${e.color}`),e.textColor!==void 0&&i.push(`text-${e.textColor}`),i.join(" ")});function d(){return e.locale!==void 0?{...n.lang.date,...e.locale}:n.lang.date}function _(i){const v=new Date,p=i===!0?null:0;if(e.calendar==="persian"){const f=wa(v);return{year:f.jy,month:f.jm,day:f.jd}}return{year:v.getFullYear(),month:v.getMonth()+1,day:v.getDate(),hour:p,minute:p,second:p,millisecond:p}}return{editable:u,tabindex:r,headerClass:l,getLocale:d,getCurrentDate:_}}const Qt=864e5,Va=36e5,xt=6e4,Gt="YYYY-MM-DDTHH:mm:ss.SSSZ",$a=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Ia=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,_t={};function Ha(e,n){const u="("+n.days.join("|")+")",r=e+u;if(_t[r]!==void 0)return _t[r];const l="("+n.daysShort.join("|")+")",d="("+n.months.join("|")+")",_="("+n.monthsShort.join("|")+")",i={};let v=0;const p=e.replace(Ia,M=>{switch(v++,M){case"YY":return i.YY=v,"(-?\\d{1,2})";case"YYYY":return i.YYYY=v,"(-?\\d{1,4})";case"M":return i.M=v,"(\\d{1,2})";case"MM":return i.M=v,"(\\d{2})";case"MMM":return i.MMM=v,_;case"MMMM":return i.MMMM=v,d;case"D":return i.D=v,"(\\d{1,2})";case"Do":return i.D=v++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return i.D=v,"(\\d{2})";case"H":return i.H=v,"(\\d{1,2})";case"HH":return i.H=v,"(\\d{2})";case"h":return i.h=v,"(\\d{1,2})";case"hh":return i.h=v,"(\\d{2})";case"m":return i.m=v,"(\\d{1,2})";case"mm":return i.m=v,"(\\d{2})";case"s":return i.s=v,"(\\d{1,2})";case"ss":return i.s=v,"(\\d{2})";case"S":return i.S=v,"(\\d{1})";case"SS":return i.S=v,"(\\d{2})";case"SSS":return i.S=v,"(\\d{3})";case"A":return i.A=v,"(AM|PM)";case"a":return i.a=v,"(am|pm)";case"aa":return i.aa=v,"(a\\.m\\.|p\\.m\\.)";case"ddd":return l;case"dddd":return u;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return i.Z=v,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return i.ZZ=v,"(Z|[+-]\\d{2}\\d{2})";case"X":return i.X=v,"(-?\\d+)";case"x":return i.x=v,"(-?\\d{4,})";default:return v--,M[0]==="["&&(M=M.substring(1,M.length-1)),M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),f={map:i,regex:new RegExp("^"+p)};return _t[r]=f,f}function Pt(e,n){return e!==void 0?e:n!==void 0?n.date:ea.date}function qt(e,n=""){const u=e>0?"-":"+",r=Math.abs(e),l=Math.floor(r/60),d=r%60;return u+T(l)+n+T(d)}function Aa(e,n,u,r,l){const d={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(l!==void 0&&Object.assign(d,l),e==null||e===""||typeof e!="string")return d;n===void 0&&(n=Gt);const _=Pt(u,Nt.props),i=_.months,v=_.monthsShort,{regex:p,map:f}=Ha(n,_),M=e.match(p);if(M===null)return d;let O="";if(f.X!==void 0||f.x!==void 0){const j=parseInt(M[f.X!==void 0?f.X:f.x],10);if(isNaN(j)===!0||j<0)return d;const E=new Date(j*(f.X!==void 0?1e3:1));d.year=E.getFullYear(),d.month=E.getMonth()+1,d.day=E.getDate(),d.hour=E.getHours(),d.minute=E.getMinutes(),d.second=E.getSeconds(),d.millisecond=E.getMilliseconds()}else{if(f.YYYY!==void 0)d.year=parseInt(M[f.YYYY],10);else if(f.YY!==void 0){const j=parseInt(M[f.YY],10);d.year=j<0?j:2e3+j}if(f.M!==void 0){if(d.month=parseInt(M[f.M],10),d.month<1||d.month>12)return d}else f.MMM!==void 0?d.month=v.indexOf(M[f.MMM])+1:f.MMMM!==void 0&&(d.month=i.indexOf(M[f.MMMM])+1);if(f.D!==void 0){if(d.day=parseInt(M[f.D],10),d.year===null||d.month===null||d.day<1)return d;const j=r!=="persian"?new Date(d.year,d.month,0).getDate():nt(d.year,d.month);if(d.day>j)return d}f.H!==void 0?d.hour=parseInt(M[f.H],10)%24:f.h!==void 0&&(d.hour=parseInt(M[f.h],10)%12,(f.A&&M[f.A]==="PM"||f.a&&M[f.a]==="pm"||f.aa&&M[f.aa]==="p.m.")&&(d.hour+=12),d.hour=d.hour%24),f.m!==void 0&&(d.minute=parseInt(M[f.m],10)%60),f.s!==void 0&&(d.second=parseInt(M[f.s],10)%60),f.S!==void 0&&(d.millisecond=parseInt(M[f.S],10)*10**(3-M[f.S].length)),(f.Z!==void 0||f.ZZ!==void 0)&&(O=f.Z!==void 0?M[f.Z].replace(":",""):M[f.ZZ],d.timezoneOffset=(O[0]==="+"?-1:1)*(60*O.slice(1,3)+1*O.slice(3,5)))}return d.dateHash=T(d.year,6)+"/"+T(d.month)+"/"+T(d.day),d.timeHash=T(d.hour)+":"+T(d.minute)+":"+T(d.second)+O,d}function Yt(e){const n=new Date(e.getFullYear(),e.getMonth(),e.getDate());n.setDate(n.getDate()-(n.getDay()+6)%7+3);const u=new Date(n.getFullYear(),0,4);u.setDate(u.getDate()-(u.getDay()+6)%7+3);const r=n.getTimezoneOffset()-u.getTimezoneOffset();n.setHours(n.getHours()-r);const l=(n-u)/(Qt*7);return 1+Math.floor(l)}function me(e,n,u){const r=new Date(e),l=`set${u===!0?"UTC":""}`;switch(n){case"year":case"years":r[`${l}Month`](0);case"month":case"months":r[`${l}Date`](1);case"day":case"days":case"date":r[`${l}Hours`](0);case"hour":case"hours":r[`${l}Minutes`](0);case"minute":case"minutes":r[`${l}Seconds`](0);case"second":case"seconds":r[`${l}Milliseconds`](0)}return r}function at(e,n,u){return(e.getTime()-e.getTimezoneOffset()*xt-(n.getTime()-n.getTimezoneOffset()*xt))/u}function Zt(e,n,u="days"){const r=new Date(e),l=new Date(n);switch(u){case"years":case"year":return r.getFullYear()-l.getFullYear();case"months":case"month":return(r.getFullYear()-l.getFullYear())*12+r.getMonth()-l.getMonth();case"days":case"day":case"date":return at(me(r,"day"),me(l,"day"),Qt);case"hours":case"hour":return at(me(r,"hour"),me(l,"hour"),Va);case"minutes":case"minute":return at(me(r,"minute"),me(l,"minute"),xt);case"seconds":case"second":return at(me(r,"second"),me(l,"second"),1e3)}}function Vt(e){return Zt(e,me(e,"year"),"days")+1}function $t(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const It={YY(e,n,u){const r=this.YYYY(e,n,u)%100;return r>=0?T(r):"-"+T(Math.abs(r))},YYYY(e,n,u){return u!=null?u:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return T(e.getMonth()+1)},MMM(e,n){return n.monthsShort[e.getMonth()]},MMMM(e,n){return n.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return $t(this.Q(e))},D(e){return e.getDate()},Do(e){return $t(e.getDate())},DD(e){return T(e.getDate())},DDD(e){return Vt(e)},DDDD(e){return T(Vt(e),3)},d(e){return e.getDay()},dd(e,n){return this.dddd(e,n).slice(0,2)},ddd(e,n){return n.daysShort[e.getDay()]},dddd(e,n){return n.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Yt(e)},ww(e){return T(Yt(e))},H(e){return e.getHours()},HH(e){return T(e.getHours())},h(e){const n=e.getHours();return n===0?12:n>12?n%12:n},hh(e){return T(this.h(e))},m(e){return e.getMinutes()},mm(e){return T(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return T(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return T(Math.floor(e.getMilliseconds()/10))},SSS(e){return T(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,n,u,r){const l=r==null?e.getTimezoneOffset():r;return qt(l,":")},ZZ(e,n,u,r){const l=r==null?e.getTimezoneOffset():r;return qt(l)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Na(e,n,u,r,l){if(e!==0&&!e||e===1/0||e===-1/0)return;const d=new Date(e);if(isNaN(d))return;n===void 0&&(n=Gt);const _=Pt(u,Nt.props);return n.replace($a,(i,v)=>i in It?It[i](d,_,r,l):v===void 0?i:v.split("\\]").join("]"))}const we=20,Ea=["Calendar","Years","Months"],Ht=e=>Ea.includes(e),Mt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ye=" \u2014 ";function be(e){return e.year+"/"+T(e.month)}var Fa=Et({name:"QDate",props:{...Ta,...Ft,...Ot,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Mt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Mt},navigationMaxYearMonth:{type:String,validator:Mt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Ht}},emits:[...qa,"range-start","range-end","navigation"],setup(e,{slots:n,emit:u}){const{proxy:r}=kt(),{$q:l}=r,d=Lt(e,l),{getCache:_}=ka(),{tabindex:i,headerClass:v,getLocale:p,getCurrentDate:f}=Ya(e,l);let M;const O=ta(e),j=Bt(O),E=B(null),te=B(Ge()),D=B(p()),ae=s(()=>Ge()),ie=s(()=>p()),Q=s(()=>f()),b=B(Pe(te.value,D.value)),G=B(e.defaultView),De=l.lang.rtl===!0?"right":"left",le=B(De.value),ce=B(De.value),se=b.value.year,ue=B(se-se%we-(se<0?we:0)),F=B(null),V=s(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(d.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),k=s(()=>e.color||"primary"),q=s(()=>e.textColor||"white"),Y=s(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Z=s(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),L=s(()=>Z.value.filter(t=>typeof t=="string").map(t=>He(t,te.value,D.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),S=s(()=>{const t=a=>He(a,te.value,D.value);return Z.value.filter(a=>lt(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),X=s(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=Tt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),fe=s(()=>e.calendar==="persian"?ye:(t,a,o)=>Na(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?te.value:a,o===void 0?D.value:o,t.year,t.timezoneOffset)),xe=s(()=>L.value.length+S.value.reduce((t,a)=>t+1+Zt(X.value(a.to),X.value(a.from)),0)),Fe=s(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(F.value!==null){const o=F.value.init,h=X.value(o);return D.value.daysShort[h.getDay()]+", "+D.value.monthsShort[o.month-1]+" "+o.day+Ye+"?"}if(xe.value===0)return Ye;if(xe.value>1)return`${xe.value} ${D.value.pluralDay}`;const t=L.value[0],a=X.value(t);return isNaN(a.valueOf())===!0?Ye:D.value.headerTitle!==void 0?D.value.headerTitle(a,t):D.value.daysShort[a.getDay()]+", "+D.value.monthsShort[t.month-1]+" "+t.day}),rt=s(()=>L.value.concat(S.value.map(a=>a.from)).sort((a,o)=>a.year-o.year||a.month-o.month)[0]),ot=s(()=>L.value.concat(S.value.map(a=>a.to)).sort((a,o)=>o.year-a.year||o.month-a.month)[0]),Oe=s(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(xe.value===0)return Ye;if(xe.value>1){const t=rt.value,a=ot.value,o=D.value.monthsShort;return o[t.month-1]+(t.year!==a.year?" "+t.year+Ye+o[a.month-1]+" ":t.month!==a.month?Ye+o[a.month-1]:"")+" "+a.year}return L.value[0].year}),Ce=s(()=>{const t=[l.iconSet.datetime.arrowLeft,l.iconSet.datetime.arrowRight];return l.lang.rtl===!0?t.reverse():t}),Le=s(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):D.value.firstDayOfWeek),it=s(()=>{const t=D.value.daysShort,a=Le.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),ne=s(()=>{const t=b.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():nt(t.year,t.month)}),st=s(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),P=s(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),U=s(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Se=s(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return P.value!==null&&P.value.year>=b.value.year&&(t.year.prev=!1,P.value.year===b.value.year&&P.value.month>=b.value.month&&(t.month.prev=!1)),U.value!==null&&U.value.year<=b.value.year&&(t.year.next=!1,U.value.year===b.value.year&&U.value.month<=b.value.month&&(t.month.next=!1)),t}),ke=s(()=>{const t={};return L.value.forEach(a=>{const o=be(a);t[o]===void 0&&(t[o]=[]),t[o].push(a.day)}),t}),Ve=s(()=>{const t={};return S.value.forEach(a=>{const o=be(a.from),h=be(a.to);if(t[o]===void 0&&(t[o]=[]),t[o].push({from:a.from.day,to:o===h?a.to.day:void 0,range:a}),o<h){let m;const{year:C,month:y}=a.from,x=y<12?{year:C,month:y+1}:{year:C+1,month:1};for(;(m=be(x))<=h;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===h?a.to.day:void 0,range:a}),x.month++,x.month>12&&(x.year++,x.month=1)}}),t}),ve=s(()=>{if(F.value===null)return;const{init:t,initHash:a,final:o,finalHash:h}=F.value,[m,C]=a<=h?[t,o]:[o,t],y=be(m),x=be(C);if(y!==W.value&&x!==W.value)return;const N={};return y===W.value?(N.from=m.day,N.includeFrom=!0):N.from=1,x===W.value?(N.to=C.day,N.includeTo=!0):N.to=ne.value,N}),W=s(()=>be(b.value)),ut=s(()=>{const t={};if(e.options===void 0){for(let o=1;o<=ne.value;o++)t[o]=!0;return t}const a=typeof e.options=="function"?e.options:o=>e.options.includes(o);for(let o=1;o<=ne.value;o++){const h=W.value+"/"+T(o);t[o]=a(h)}return t}),dt=s(()=>{const t={};if(e.events===void 0)for(let a=1;a<=ne.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:o=>e.events.includes(o);for(let o=1;o<=ne.value;o++){const h=W.value+"/"+T(o);t[o]=a(h)===!0&&st.value(h)}}return t}),Be=s(()=>{let t,a;const{year:o,month:h}=b.value;if(e.calendar!=="persian")t=new Date(o,h-1,1),a=new Date(o,h-1,0).getDate();else{const m=Tt(o,h,1);t=new Date(m.gy,m.gm-1,m.gd);let C=h-1,y=o;C===0&&(C=12,y--),a=nt(y,C)}return{days:t.getDay()-Le.value-1,endDay:a}}),je=s(()=>{const t=[],{days:a,endDay:o}=Be.value,h=a<0?a+7:a;if(h<6)for(let y=o-h;y<=o;y++)t.push({i:y,fill:!0});const m=t.length;for(let y=1;y<=ne.value;y++){const x={i:y,event:dt.value[y],classes:[]};ut.value[y]===!0&&(x.in=!0,x.flat=!0),t.push(x)}if(ke.value[W.value]!==void 0&&ke.value[W.value].forEach(y=>{const x=m+y-1;Object.assign(t[x],{selected:!0,unelevated:!0,flat:!1,color:k.value,textColor:q.value})}),Ve.value[W.value]!==void 0&&Ve.value[W.value].forEach(y=>{if(y.from!==void 0){const x=m+y.from-1,N=m+(y.to||ne.value)-1;for(let gt=x;gt<=N;gt++)Object.assign(t[gt],{range:y.range,unelevated:!0,color:k.value,textColor:q.value});Object.assign(t[x],{rangeFrom:!0,flat:!1}),y.to!==void 0&&Object.assign(t[N],{rangeTo:!0,flat:!1})}else if(y.to!==void 0){const x=m+y.to-1;for(let N=m;N<=x;N++)Object.assign(t[N],{range:y.range,unelevated:!0,color:k.value,textColor:q.value});Object.assign(t[x],{flat:!1,rangeTo:!0})}else{const x=m+ne.value-1;for(let N=m;N<=x;N++)Object.assign(t[N],{range:y.range,unelevated:!0,color:k.value,textColor:q.value})}}),ve.value!==void 0){const y=m+ve.value.from-1,x=m+ve.value.to-1;for(let N=y;N<=x;N++)t[N].color=k.value,t[N].editRange=!0;ve.value.includeFrom===!0&&(t[y].editRangeFrom=!0),ve.value.includeTo===!0&&(t[x].editRangeTo=!0)}b.value.year===Q.value.year&&b.value.month===Q.value.month&&(t[m+Q.value.day-1].today=!0);const C=t.length%7;if(C>0){const y=7-C;for(let x=1;x<=y;x++)t.push({i:x,fill:!0})}return t.forEach(y=>{let x="q-date__calendar-item ";y.fill===!0?x+="q-date__calendar-item--fill":(x+=`q-date__calendar-item--${y.in===!0?"in":"out"}`,y.range!==void 0&&(x+=` q-date__range${y.rangeTo===!0?"-to":y.rangeFrom===!0?"-from":""}`),y.editRange===!0&&(x+=` q-date__edit-range${y.editRangeFrom===!0?"-from":""}${y.editRangeTo===!0?"-to":""}`),(y.range!==void 0||y.editRange===!0)&&(x+=` text-${y.color}`)),y.classes=x}),t}),ct=s(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});pe(()=>e.modelValue,t=>{if(M===t)M=0;else{const{year:a,month:o}=Pe(te.value,D.value);K(a,o)}}),pe(G,()=>{E.value!==null&&E.value.focus()}),pe(()=>b.value.year,t=>{u("navigation",{year:t,month:b.value.month})}),pe(()=>b.value.month,t=>{u("navigation",{year:b.value.year,month:t})}),pe(ae,t=>{Dt(t,D.value,"mask"),te.value=t}),pe(ie,t=>{Dt(te.value,t,"locale"),D.value=t});function ze(){const t=Q.value,a=ke.value[be(t)];(a===void 0||a.includes(t.day)===!1)&&mt(t),$e(t.year,t.month)}function vt(t){Ht(t)===!0&&(G.value=t)}function Qe(t,a){["month","year"].includes(t)&&(t==="month"?Ue:c)(a===!0?-1:1)}function $e(t,a){G.value="Calendar",K(t,a)}function Ie(t,a){if(e.range===!1||!t){F.value=null;return}const o=Object.assign({...b.value},t),h=a!==void 0?Object.assign({...b.value},a):o;F.value={init:o,initHash:ye(o),final:h,finalHash:ye(h)},$e(o.year,o.month)}function Ge(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function He(t,a,o){return Aa(t,a,o,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Pe(t,a){const o=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(o.length===0)return Ze();const h=o[o.length-1],m=He(h.from!==void 0?h.from:h,t,a);return m.dateHash===null?Ze():m}function Ze(){let t,a;if(e.defaultYearMonth!==void 0){const o=e.defaultYearMonth.split("/");t=parseInt(o[0],10),a=parseInt(o[1],10)}else{const o=Q.value!==void 0?Q.value:f();t=o.year,a=o.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+T(a)+"/01"}}function Ue(t){let a=b.value.year,o=Number(b.value.month)+t;o===13?(o=1,a++):o===0&&(o=12,a--),K(a,o),Y.value===!0&&he("month")}function c(t){const a=Number(b.value.year)+t;K(a,b.value.month),Y.value===!0&&he("year")}function w(t){K(t,b.value.month),G.value=e.defaultView==="Years"?"Months":"Calendar",Y.value===!0&&he("year")}function R(t){K(b.value.year,t),G.value="Calendar",Y.value===!0&&he("month")}function $(t,a){const o=ke.value[a];(o!==void 0&&o.includes(t.day)===!0?ft:mt)(t)}function H(t){return{year:t.year,month:t.month,day:t.day}}function K(t,a){P.value!==null&&t<=P.value.year&&(t=P.value.year,a<P.value.month&&(a=P.value.month)),U.value!==null&&t>=U.value.year&&(t=U.value.year,a>U.value.month&&(a=U.value.month));const o=t+"/"+T(a)+"/01";o!==b.value.dateHash&&(le.value=b.value.dateHash<o==(l.lang.rtl!==!0)?"left":"right",t!==b.value.year&&(ce.value=le.value),Ct(()=>{ue.value=t-t%we-(t<0?we:0),Object.assign(b.value,{year:t,month:a,day:1,dateHash:o})}))}function Re(t,a,o){const h=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;M=h;const{reason:m,details:C}=pt(a,o);u("update:modelValue",h,m,C)}function he(t){const a=L.value[0]!==void 0&&L.value[0].dateHash!==null?{...L.value[0]}:{...b.value};Ct(()=>{a.year=b.value.year,a.month=b.value.month;const o=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():nt(a.year,a.month);a.day=Math.min(Math.max(1,a.day),o);const h=Te(a);M=h;const{details:m}=pt("",a);u("update:modelValue",h,t,m)})}function pt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...H(a.target),from:H(a.from),to:H(a.to)}}:{reason:`${t}-day`,details:H(a)}}function Te(t,a,o){return t.from!==void 0?{from:fe.value(t.from,a,o),to:fe.value(t.to,a,o)}:fe.value(t,a,o)}function mt(t){let a;if(e.multiple===!0)if(t.from!==void 0){const o=ye(t.from),h=ye(t.to),m=L.value.filter(y=>y.dateHash<o||y.dateHash>h),C=S.value.filter(({from:y,to:x})=>x.dateHash<o||y.dateHash>h);a=m.concat(C).concat(t).map(y=>Te(y))}else{const o=Z.value.slice();o.push(Te(t)),a=o}else a=Te(t);Re(a,"add",t)}function ft(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const o=Te(t);t.from!==void 0?a=e.modelValue.filter(h=>h.from!==void 0?h.from!==o.from&&h.to!==o.to:!0):a=e.modelValue.filter(h=>h!==o),a.length===0&&(a=null)}Re(a,"remove",t)}function Dt(t,a,o){const h=L.value.concat(S.value).map(m=>Te(m,t,a)).filter(m=>m.from!==void 0?m.from.dateHash!==null&&m.to.dateHash!==null:m.dateHash!==null);u("update:modelValue",(e.multiple===!0?h:h[0])||null,o)}function Xt(){if(e.minimal!==!0)return g("div",{class:"q-date__header "+v.value},[g("div",{class:"relative-position"},[g(Ae,{name:"q-transition--fade"},()=>g("div",{key:"h-yr-"+Oe.value,class:"q-date__header-subtitle q-date__header-link "+(G.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,..._("vY",{onClick(){G.value="Years"},onKeyup(t){t.keyCode===13&&(G.value="Years")}})},[Oe.value]))]),g("div",{class:"q-date__header-title relative-position flex no-wrap"},[g("div",{class:"relative-position col"},[g(Ae,{name:"q-transition--fade"},()=>g("div",{key:"h-sub"+Fe.value,class:"q-date__header-title-label q-date__header-link "+(G.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,..._("vC",{onClick(){G.value="Calendar"},onKeyup(t){t.keyCode===13&&(G.value="Calendar")}})},[Fe.value]))]),e.todayBtn===!0?g(oe,{class:"q-date__header-today self-start",icon:l.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:i.value,onClick:ze}):null])])}function ht({label:t,type:a,key:o,dir:h,goTo:m,boundaries:C,cls:y}){return[g("div",{class:"row items-center q-date__arrow"},[g(oe,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ce.value[0],tabindex:i.value,disable:C.prev===!1,..._("go-#"+a,{onClick(){m(-1)}})})]),g("div",{class:"relative-position overflow-hidden flex flex-center"+y},[g(Ae,{name:"q-transition--jump-"+h},()=>g("div",{key:o},[g(oe,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:i.value,..._("view#"+a,{onClick:()=>{G.value=a}})})]))]),g("div",{class:"row items-center q-date__arrow"},[g(oe,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ce.value[1],tabindex:i.value,disable:C.next===!1,..._("go+#"+a,{onClick(){m(1)}})})])]}const Wt={Calendar:()=>[g("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[g("div",{class:"q-date__navigation row items-center no-wrap"},ht({label:D.value.months[b.value.month-1],type:"Months",key:b.value.month,dir:le.value,goTo:Ue,boundaries:Se.value.month,cls:" col"}).concat(ht({label:b.value.year,type:"Years",key:b.value.year,dir:ce.value,goTo:c,boundaries:Se.value.year,cls:""}))),g("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},it.value.map(t=>g("div",{class:"q-date__calendar-item"},[g("div",t)]))),g("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[g(Ae,{name:"q-transition--slide-"+le.value},()=>g("div",{key:W.value,class:"q-date__calendar-days fit"},je.value.map(t=>g("div",{class:t.classes},[t.in===!0?g(oe,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:i.value,..._("day#"+t.i,{onClick:()=>{Kt(t.i)},onMouseover:()=>{Jt(t.i)}})},t.event!==!1?()=>g("div",{class:"q-date__event bg-"+t.event}):null):g("div",""+t.i)]))))])])],Months(){const t=b.value.year===Q.value.year,a=h=>P.value!==null&&b.value.year===P.value.year&&P.value.month>h||U.value!==null&&b.value.year===U.value.year&&U.value.month<h,o=D.value.monthsShort.map((h,m)=>{const C=b.value.month===m+1;return g("div",{class:"q-date__months-item flex flex-center"},[g(oe,{class:t===!0&&Q.value.month===m+1?"q-date__today":null,flat:C!==!0,label:h,unelevated:C,color:C===!0?k.value:null,textColor:C===!0?q.value:null,tabindex:i.value,disable:a(m+1),..._("month#"+m,{onClick:()=>{R(m+1)}})})])});return e.yearsInMonthView===!0&&o.unshift(g("div",{class:"row no-wrap full-width"},[ht({label:b.value.year,type:"Years",key:b.value.year,dir:ce.value,goTo:c,boundaries:Se.value.year,cls:" col"})])),g("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},o)},Years(){const t=ue.value,a=t+we,o=[],h=m=>P.value!==null&&P.value.year>m||U.value!==null&&U.value.year<m;for(let m=t;m<=a;m++){const C=b.value.year===m;o.push(g("div",{class:"q-date__years-item flex flex-center"},[g(oe,{key:"yr"+m,class:Q.value.year===m?"q-date__today":null,flat:!C,label:m,dense:!0,unelevated:C,color:C===!0?k.value:null,textColor:C===!0?q.value:null,tabindex:i.value,disable:h(m),..._("yr#"+m,{onClick:()=>{w(m)}})})]))}return g("div",{class:"q-date__view q-date__years flex flex-center"},[g("div",{class:"col-auto"},[g(oe,{round:!0,dense:!0,flat:!0,icon:Ce.value[0],tabindex:i.value,disable:h(t),..._("y-",{onClick:()=>{ue.value-=we}})})]),g("div",{class:"q-date__years-content col self-stretch row items-center"},o),g("div",{class:"col-auto"},[g(oe,{round:!0,dense:!0,flat:!0,icon:Ce.value[1],tabindex:i.value,disable:h(a),..._("y+",{onClick:()=>{ue.value+=we}})})])])}};function Kt(t){const a={...b.value,day:t};if(e.range===!1){$(a,W.value);return}if(F.value===null){const o=je.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&o.range!==void 0){ft({target:a,from:o.range.from,to:o.range.to});return}if(o.selected===!0){ft(a);return}const h=ye(a);F.value={init:a,initHash:h,final:a,finalHash:h},u("range-start",H(a))}else{const o=F.value.initHash,h=ye(a),m=o<=h?{from:F.value.init,to:a}:{from:a,to:F.value.init};F.value=null,mt(o===h?a:{target:a,...m}),u("range-end",{from:H(m.from),to:H(m.to)})}}function Jt(t){if(F.value!==null){const a={...b.value,day:t};Object.assign(F.value,{final:a,finalHash:ye(a)})}}return Object.assign(r,{setToday:ze,setView:vt,offsetCalendar:Qe,setCalendarTo:$e,setEditingRange:Ie}),()=>{const t=[g("div",{class:"q-date__content col relative-position"},[g(Ae,{name:"q-transition--fade"},Wt[G.value])])],a=aa(n.default);return a!==void 0&&t.push(g("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&j(t,"push"),g("div",{class:V.value,...ct.value},[Xt(),g("div",{ref:E,class:"q-date__main col column",tabindex:-1},t)])}}});const At="q-slider__marker-labels",Oa=e=>({value:e}),La=({marker:e})=>g("div",{key:e.value,style:e.style,class:e.classes},e.label),Ut=[34,37,40,33,39,38],Ba={...Ot,...Ft,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},ja=["pan","update:modelValue","change"];function za({updateValue:e,updatePosition:n,getDragging:u,formAttrs:r}){const{props:l,emit:d,slots:_,proxy:{$q:i}}=kt(),v=Lt(l,i),p=Bt(r),f=B(!1),M=B(!1),O=B(!1),j=B(!1),E=s(()=>l.vertical===!0?"--v":"--h"),te=s(()=>"-"+(l.switchLabelSide===!0?"switched":"standard")),D=s(()=>l.vertical===!0?l.reverse===!0:l.reverse!==(i.lang.rtl===!0)),ae=s(()=>isNaN(l.innerMin)===!0||l.innerMin<l.min?l.min:l.innerMin),ie=s(()=>isNaN(l.innerMax)===!0||l.innerMax>l.max?l.max:l.innerMax),Q=s(()=>l.disable!==!0&&l.readonly!==!0&&ae.value<ie.value),b=s(()=>(String(l.step).trim().split(".")[1]||"").length),G=s(()=>l.step===0?1:l.step),De=s(()=>Q.value===!0?l.tabindex||0:-1),le=s(()=>l.max-l.min),ce=s(()=>ie.value-ae.value),se=s(()=>P(ae.value)),ue=s(()=>P(ie.value)),F=s(()=>l.vertical===!0?D.value===!0?"bottom":"top":D.value===!0?"right":"left"),V=s(()=>l.vertical===!0?"height":"width"),k=s(()=>l.vertical===!0?"width":"height"),q=s(()=>l.vertical===!0?"vertical":"horizontal"),Y=s(()=>{const c={role:"slider","aria-valuemin":ae.value,"aria-valuemax":ie.value,"aria-orientation":q.value,"data-step":l.step};return l.disable===!0?c["aria-disabled"]="true":l.readonly===!0&&(c["aria-readonly"]="true"),c}),Z=s(()=>`q-slider q-slider${E.value} q-slider--${f.value===!0?"":"in"}active inline no-wrap `+(l.vertical===!0?"row":"column")+(l.disable===!0?" disabled":" q-slider--enabled"+(Q.value===!0?" q-slider--editable":""))+(O.value==="both"?" q-slider--focus":"")+(l.label||l.labelAlways===!0?" q-slider--label":"")+(l.labelAlways===!0?" q-slider--label-always":"")+(v.value===!0?" q-slider--dark":"")+(l.dense===!0?" q-slider--dense q-slider--dense"+E.value:""));function L(c){const w="q-slider__"+c;return`${w} ${w}${E.value} ${w}${E.value}${te.value}`}function S(c){const w="q-slider__"+c;return`${w} ${w}${E.value}`}const X=s(()=>{const c=l.selectionColor||l.color;return"q-slider__selection absolute"+(c!==void 0?` text-${c}`:"")}),fe=s(()=>S("markers")+" absolute overflow-hidden"),xe=s(()=>S("track-container")),Fe=s(()=>L("pin")),rt=s(()=>L("label")),ot=s(()=>L("text-container")),Oe=s(()=>L("marker-labels-container")+(l.markerLabelsClass!==void 0?` ${l.markerLabelsClass}`:"")),Ce=s(()=>"q-slider__track relative-position no-outline"+(l.trackColor!==void 0?` bg-${l.trackColor}`:"")),Le=s(()=>{const c={[k.value]:l.trackSize};return l.trackImg!==void 0&&(c.backgroundImage=`url(${l.trackImg}) !important`),c}),it=s(()=>"q-slider__inner absolute"+(l.innerTrackColor!==void 0?` bg-${l.innerTrackColor}`:"")),ne=s(()=>{const c={[F.value]:`${100*se.value}%`,[V.value]:`${100*(ue.value-se.value)}%`};return l.innerTrackImg!==void 0&&(c.backgroundImage=`url(${l.innerTrackImg}) !important`),c});function st(c){const{min:w,max:R,step:$}=l;let H=w+c*(R-w);if($>0){const K=(H-w)%$;H+=(Math.abs(K)>=$/2?(K<0?-1:1)*$:0)-K}return b.value>0&&(H=parseFloat(H.toFixed(b.value))),de(H,ae.value,ie.value)}function P(c){return le.value===0?0:(c-l.min)/le.value}function U(c,w){const R=ra(c),$=l.vertical===!0?de((R.top-w.top)/w.height,0,1):de((R.left-w.left)/w.width,0,1);return de(D.value===!0?1-$:$,se.value,ue.value)}const Se=s(()=>la(l.markers)===!0?l.markers:G.value),ke=s(()=>{const c=[],w=Se.value,R=l.max;let $=l.min;do c.push($),$+=w;while($<R);return c.push(R),c}),Ve=s(()=>{const c=` ${At}${E.value}-`;return At+`${c}${l.switchMarkerLabelsSide===!0?"switched":"standard"}${c}${D.value===!0?"rtl":"ltr"}`}),ve=s(()=>l.markerLabels===!1?null:dt(l.markerLabels).map((c,w)=>({index:w,value:c.value,label:c.label||c.value,classes:Ve.value+(c.classes!==void 0?" "+c.classes:""),style:{...Be(c.value),...c.style||{}}}))),W=s(()=>({markerList:ve.value,markerMap:je.value,classes:Ve.value,getStyle:Be})),ut=s(()=>{if(ce.value!==0){const c=100*Se.value/ce.value;return{...ne.value,backgroundSize:l.vertical===!0?`2px ${c}%`:`${c}% 2px`}}return null});function dt(c){if(c===!1)return null;if(c===!0)return ke.value.map(Oa);if(typeof c=="function")return ke.value.map(R=>{const $=c(R);return lt($)===!0?{...$,value:R}:{value:R,label:$}});const w=({value:R})=>R>=l.min&&R<=l.max;return Array.isArray(c)===!0?c.map(R=>lt(R)===!0?R:{value:R}).filter(w):Object.keys(c).map(R=>{const $=c[R],H=Number(R);return lt($)===!0?{...$,value:H}:{value:H,label:$}}).filter(w)}function Be(c){return{[F.value]:`${100*(c-l.min)/le.value}%`}}const je=s(()=>{if(l.markerLabels===!1)return null;const c={};return ve.value.forEach(w=>{c[w.value]=w}),c});function ct(){if(_["marker-label-group"]!==void 0)return _["marker-label-group"](W.value);const c=_["marker-label"]||La;return ve.value.map(w=>c({marker:w,...W.value}))}const ze=s(()=>[[ba,vt,void 0,{[q.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function vt(c){c.isFinal===!0?(j.value!==void 0&&(n(c.evt),c.touch===!0&&e(!0),j.value=void 0,d("pan","end")),f.value=!1,O.value=!1):c.isFirst===!0?(j.value=u(c.evt),n(c.evt),e(),f.value=!0,d("pan","start")):(n(c.evt),e())}function Qe(){O.value=!1}function $e(c){n(c,u(c)),e(),M.value=!0,f.value=!0,document.addEventListener("mouseup",Ie,!0)}function Ie(){M.value=!1,f.value=!1,e(!0),Qe(),document.removeEventListener("mouseup",Ie,!0)}function Ge(c){n(c,u(c)),e(!0)}function He(c){Ut.includes(c.keyCode)&&e(!0)}function Pe(c){if(l.vertical===!0)return null;const w=i.lang.rtl!==l.reverse?1-c:c;return{transform:`translateX(calc(${2*w-1} * ${l.thumbSize} / 2 + ${50-100*w}%))`}}function Ze(c){const w=s(()=>M.value===!1&&(O.value===c.focusValue||O.value==="both")?" q-slider--focus":""),R=s(()=>`q-slider__thumb q-slider__thumb${E.value} q-slider__thumb${E.value}-${D.value===!0?"rtl":"ltr"} absolute non-selectable`+w.value+(c.thumbColor.value!==void 0?` text-${c.thumbColor.value}`:"")),$=s(()=>({width:l.thumbSize,height:l.thumbSize,[F.value]:`${100*c.ratio.value}%`,zIndex:O.value===c.focusValue?2:void 0})),H=s(()=>c.labelColor.value!==void 0?` text-${c.labelColor.value}`:""),K=s(()=>Pe(c.ratio.value)),Re=s(()=>"q-slider__text"+(c.labelTextColor.value!==void 0?` text-${c.labelTextColor.value}`:""));return()=>{const he=[g("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[g("path",{d:l.thumbPath})]),g("div",{class:"q-slider__focus-ring fit"})];return(l.label===!0||l.labelAlways===!0)&&(he.push(g("div",{class:Fe.value+" absolute fit no-pointer-events"+H.value},[g("div",{class:rt.value,style:{minWidth:l.thumbSize}},[g("div",{class:ot.value,style:K.value},[g("span",{class:Re.value},c.label.value)])])])),l.name!==void 0&&l.disable!==!0&&p(he,"push")),g("div",{class:R.value,style:$.value,...c.getNodeData()},he)}}function Ue(c,w,R,$){const H=[];l.innerTrackColor!=="transparent"&&H.push(g("div",{key:"inner",class:it.value,style:ne.value})),l.selectionColor!=="transparent"&&H.push(g("div",{key:"selection",class:X.value,style:c.value})),l.markers!==!1&&H.push(g("div",{key:"marker",class:fe.value,style:ut.value})),$(H);const K=[oa("div",{key:"trackC",class:xe.value,tabindex:w.value,...R.value},[g("div",{class:Ce.value,style:Le.value},H)],"slide",Q.value,()=>ze.value)];if(l.markerLabels!==!1){const Re=l.switchMarkerLabelsSide===!0?"unshift":"push";K[Re](g("div",{key:"markerL",class:Oe.value},ct()))}return K}return na(()=>{document.removeEventListener("mouseup",Ie,!0)}),{state:{active:f,focus:O,preventFocus:M,dragging:j,editable:Q,classes:Z,tabindex:De,attributes:Y,step:G,decimals:b,trackLen:le,innerMin:ae,innerMinRatio:se,innerMax:ie,innerMaxRatio:ue,positionProp:F,sizeProp:V,isReversed:D},methods:{onActivate:$e,onMobileClick:Ge,onBlur:Qe,onKeyup:He,getContent:Ue,getThumbRenderFn:Ze,convertRatioToModel:st,convertModelToRatio:P,getDraggingRatio:U}}}const _e={MIN:0,RANGE:1,MAX:2};var Qa=Et({name:"QRange",props:{...Ba,modelValue:{type:Object,default:()=>({min:null,max:null}),validator:e=>"min"in e&&"max"in e},dragRange:Boolean,dragOnlyRange:Boolean,leftLabelColor:String,leftLabelTextColor:String,rightLabelColor:String,rightLabelTextColor:String,leftLabelValue:[String,Number],rightLabelValue:[String,Number],leftThumbColor:String,rightThumbColor:String},emits:ja,setup(e,{emit:n}){const{proxy:{$q:u}}=kt(),{state:r,methods:l}=za({updateValue:ce,updatePosition:ue,getDragging:se,formAttrs:s(()=>({type:"hidden",name:e.name,value:`${e.modelValue.min}|${e.modelValue.max}`}))}),d=B(null),_=B(0),i=B(0),v=B({min:0,max:0});function p(){v.value.min=e.modelValue.min===null?r.innerMin.value:de(e.modelValue.min,r.innerMin.value,r.innerMax.value),v.value.max=e.modelValue.max===null?r.innerMax.value:de(e.modelValue.max,r.innerMin.value,r.innerMax.value)}pe(()=>`${e.modelValue.min}|${e.modelValue.max}|${r.innerMin.value}|${r.innerMax.value}`,p),p();const f=s(()=>l.convertModelToRatio(v.value.min)),M=s(()=>l.convertModelToRatio(v.value.max)),O=s(()=>r.active.value===!0?_.value:f.value),j=s(()=>r.active.value===!0?i.value:M.value),E=s(()=>{const V={[r.positionProp.value]:`${100*O.value}%`,[r.sizeProp.value]:`${100*(j.value-O.value)}%`};return e.selectionImg!==void 0&&(V.backgroundImage=`url(${e.selectionImg}) !important`),V}),te=s(()=>{if(r.editable.value!==!0)return{};if(u.platform.is.mobile===!0)return{onClick:l.onMobileClick};const V={onMousedown:l.onActivate};return(e.dragRange===!0||e.dragOnlyRange===!0)&&Object.assign(V,{onFocus:()=>{r.focus.value="both"},onBlur:l.onBlur,onKeydown:F,onKeyup:l.onKeyup}),V});function D(V){return u.platform.is.mobile!==!0&&r.editable.value===!0&&e.dragOnlyRange!==!0?{onFocus:()=>{r.focus.value=V},onBlur:l.onBlur,onKeydown:F,onKeyup:l.onKeyup}:{}}const ae=s(()=>e.dragOnlyRange!==!0?r.tabindex.value:null),ie=s(()=>u.platform.is.mobile!==!0&&(e.dragRange||e.dragOnlyRange===!0)?r.tabindex.value:null),Q=B(null),b=s(()=>D("min")),G=l.getThumbRenderFn({focusValue:"min",getNodeData:()=>({ref:Q,key:"tmin",...b.value,tabindex:ae.value}),ratio:O,label:s(()=>e.leftLabelValue!==void 0?e.leftLabelValue:v.value.min),thumbColor:s(()=>e.leftThumbColor||e.thumbColor||e.color),labelColor:s(()=>e.leftLabelColor||e.labelColor),labelTextColor:s(()=>e.leftLabelTextColor||e.labelTextColor)}),De=s(()=>D("max")),le=l.getThumbRenderFn({focusValue:"max",getNodeData:()=>({...De.value,key:"tmax",tabindex:ae.value}),ratio:j,label:s(()=>e.rightLabelValue!==void 0?e.rightLabelValue:v.value.max),thumbColor:s(()=>e.rightThumbColor||e.thumbColor||e.color),labelColor:s(()=>e.rightLabelColor||e.labelColor),labelTextColor:s(()=>e.rightLabelTextColor||e.labelTextColor)});function ce(V){(v.value.min!==e.modelValue.min||v.value.max!==e.modelValue.max)&&n("update:modelValue",{...v.value}),V===!0&&n("change",{...v.value})}function se(V){const{left:k,top:q,width:Y,height:Z}=d.value.getBoundingClientRect(),L=e.dragOnlyRange===!0?0:e.vertical===!0?Q.value.offsetHeight/(2*Z):Q.value.offsetWidth/(2*Y),S={left:k,top:q,width:Y,height:Z,valueMin:v.value.min,valueMax:v.value.max,ratioMin:f.value,ratioMax:M.value},X=l.getDraggingRatio(V,S);return e.dragOnlyRange!==!0&&X<S.ratioMin+L?S.type=_e.MIN:e.dragOnlyRange===!0||X<S.ratioMax-L?e.dragRange===!0||e.dragOnlyRange===!0?(S.type=_e.RANGE,Object.assign(S,{offsetRatio:X,offsetModel:l.convertRatioToModel(X),rangeValue:S.valueMax-S.valueMin,rangeRatio:S.ratioMax-S.ratioMin})):S.type=S.ratioMax-X<X-S.ratioMin?_e.MAX:_e.MIN:S.type=_e.MAX,S}function ue(V,k=r.dragging.value){let q;const Y=l.getDraggingRatio(V,k),Z=l.convertRatioToModel(Y);switch(k.type){case _e.MIN:Y<=k.ratioMax?(q={minR:Y,maxR:k.ratioMax,min:Z,max:k.valueMax},r.focus.value="min"):(q={minR:k.ratioMax,maxR:Y,min:k.valueMax,max:Z},r.focus.value="max");break;case _e.MAX:Y>=k.ratioMin?(q={minR:k.ratioMin,maxR:Y,min:k.valueMin,max:Z},r.focus.value="max"):(q={minR:Y,maxR:k.ratioMin,min:Z,max:k.valueMin},r.focus.value="min");break;case _e.RANGE:const L=Y-k.offsetRatio,S=de(k.ratioMin+L,0,1-k.rangeRatio),X=Z-k.offsetModel,fe=de(k.valueMin+X,e.min,e.max-k.rangeValue);q={minR:S,maxR:S+k.rangeRatio,min:parseFloat(fe.toFixed(r.decimals.value)),max:parseFloat((fe+k.rangeValue).toFixed(r.decimals.value))},r.focus.value="both";break}v.value=v.value.min===null||v.value.max===null?{min:q.min||e.min,max:q.max||e.max}:{min:q.min,max:q.max},e.snap!==!0||e.step===0?(_.value=q.minR,i.value=q.maxR):(_.value=l.convertModelToRatio(v.value.min),i.value=l.convertModelToRatio(v.value.max))}function F(V){if(!Ut.includes(V.keyCode))return;ia(V);const k=([34,33].includes(V.keyCode)?10:1)*r.step.value,q=([34,37,40].includes(V.keyCode)?-1:1)*(r.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*k;if(r.focus.value==="both"){const Y=v.value.max-v.value.min,Z=de(parseFloat((v.value.min+q).toFixed(r.decimals.value)),r.innerMin.value,r.innerMax.value-Y);v.value={min:Z,max:parseFloat((Z+Y).toFixed(r.decimals.value))}}else{if(r.focus.value===!1)return;{const Y=r.focus.value;v.value={...v.value,[Y]:de(parseFloat((v.value[Y]+q).toFixed(r.decimals.value)),Y==="min"?r.innerMin.value:v.value.min,Y==="max"?r.innerMax.value:v.value.max)}}}ce()}return()=>{const V=l.getContent(E,ie,te,k=>{k.push(G(),le())});return g("div",{ref:d,class:"q-range "+r.classes.value+(e.modelValue.min===null||e.modelValue.max===null?" q-slider--no-value":""),...r.attributes.value,"aria-valuenow":e.modelValue.min+"|"+e.modelValue.max},V)}}});const Ga=ua({name:"NewReport",computed:{...da("reports",["trackers","getReports"])},methods:{...St("group",["getGroups"]),...St("reports",["getTrackers","createReport","retreiveNewReport","setActiveReport"]),generateReport(){if(this.validateFields()){this.submitted=!0;let e=this.date_range.from+" "+this.TIME_RANGE[this.rangeSnap.min].value,n=this.date_range.to+" "+this.TIME_RANGE[this.rangeSnap.max].value,u=this.TIME_RANGE[this.rangeSnap.min].value,r=this.TIME_RANGE[this.rangeSnap.max].value,l=[{title:"Trip report",trackers:this.tracker_list,plugin:{hide_empty_tabs:!0,plugin_id:4,show_seconds:!0,include_summary_sheet_only:!1,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0},time_filter:{from:u.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},from:e,to:n},{title:"Eco-driving report",trackers:this.tracker_list,from:e,to:n,time_filter:{from:u.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:46,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,show_detailed:!0,min_duration_minutes:1,max_speed:this.max_speed,smoothing:!1,graph_type:"mileage"}},{title:"Engine hours report",trackers:this.tracker_list,from:e,to:n,time_filter:{from:u.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:7,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,show_detailed:!0}},{title:"Geofence entry/exit events",trackers:this.tracker_list,from:e,to:n,time_filter:{from:u.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:89,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,min_minutes_in_zone:1}},{title:"Speed violation report",trackers:this.tracker_list,from:e,to:n,time_filter:{from:u.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:27,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,show_detailed:!0,min_duration_minutes:1,max_speed:this.max_speed}},{title:"Car security report",trackers:this.tracker_list,from:e,to:n,time_filter:{from:u.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:15,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,show_detailed:!0,min_duration_minutes:1,max_speed:this.max_speed}},{title:"Fuel report",trackers:this.tracker_list,from:e,to:n,time_filter:{from:u.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:10,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,show_detailed:!0,min_duration_minutes:1,max_speed:this.max_speed,smoothing:!1,graph_type:"mileage"}}];this.createReport(l).catch(d=>{this.$q.notify({message:"Error Creating report",color:"red",icon:"warning"}),console.log(d),this.submitted=!1}).then(d=>{!d||(this.setActiveReport(d),this.retreiveNewReport(d))})}},validateFields(){return this.$refs.max_speed.validate(),this.$refs.max_speed.hasError||this.tracker_list.length==0?(this.tracker_list.length==0&&this.$q.notify({message:"Please Select vehicles and try again.",color:"red",icon:"warning"}),!1):!0},selectTracker(e,n,u){e?this.tracker_list.push(n):(this.tracker_list.splice(this.tracker_list.indexOf(n),1),this.selected_trackers.all=!1,this.selected_trackers[this.groups[this.groups.findIndex(r=>r.id==u)].title]=!1)},selectByGroup(e,n){if(e){let u=this.groups[this.groups.findIndex(r=>r.id==n)];if(u.trackers.length>0)for(let r in u.trackers)this.tracker_list.includes(u.trackers[r].id)||(this.tracker_list.push(u.trackers[r].id),this.selected_trackers[u.trackers[r].label]=!0)}},selectAll(e){if(e)for(let n in this.trackersAvailable)this.tracker_list.includes(this.trackersAvailable[n].id)||(this.tracker_list.push(this.trackersAvailable[n].id),this.selected_trackers[this.trackersAvailable[n].label]=!0)}},data(){let e=ca.query().all(),n=[];for(let r in e)e[r].trackers=Rt.query().where("group_id",e[r].id).get(),n[e[r].title]=!1;let u=Rt.query().all();for(let r in u)n[u[r].label]=!1;return n.all=!1,{groups:e,max_speed:B(null),rangeSnap:B({min:0,max:48}),date_range:B({from:new Date(new Date().setDate(new Date().getDate()-new Date().getDay())).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),TIME_RANGE:va,selected_trackers:n,tracker_list:[],trackersAvailable:u,submitted:!1}},components:{AuthErrors:xa}}),Pa={class:"full-width q-mt-md",align:"right"},Za={class:"row flex reverse"},Ua={class:"col-md-6 q-pa-md col-grow"},Xa={class:"q-pa-md"},Wa={class:"q-pa-md"},Ka={for:""},Ja={class:"q-pa-md"},el=J("label",{for:""},"Max speed (Km/h)",-1),tl={class:"col-md-6 q-pa-md col-grow"},al=J("div",{class:"text-h6"},"Vehicles",-1),ll={key:0},nl={key:1},rl={class:"row flex flex-center"},ol={class:"col-md-6 col-grow q-pa-md"};function il(e,n,u,r,l,d){const _=ma("auth-errors");return re(),Ne(Ma,{class:"full-screen bg-white"},{default:z(()=>[A(_),J("form",{onSubmit:n[6]||(n[6]=ga((...i)=>e.generateReport&&e.generateReport(...i),["prevent"]))},[J("div",Pa,[A(oe,{flat:"",onClick:n[0]||(n[0]=i=>this.$router.go(-1)),icon:"keyboard_arrow_left",class:"text-positive",title:"Back"})]),J("div",Za,[J("div",Ua,[J("div",Xa,[A(Fa,{modelValue:e.date_range,"onUpdate:modelValue":n[1]||(n[1]=i=>e.date_range=i),range:"",mask:"YYYY-MM-DD"},null,8,["modelValue"])]),J("div",Wa,[J("label",Ka,"Control time: "+Ee(e.TIME_RANGE[e.rangeSnap.min].label)+" to "+Ee(e.TIME_RANGE[e.rangeSnap.max].label),1),A(Qa,{modelValue:e.rangeSnap,"onUpdate:modelValue":n[2]||(n[2]=i=>e.rangeSnap=i),min:0,max:48,step:1,"left-label-value":e.TIME_RANGE[e.rangeSnap.min].label,"right-label-value":e.TIME_RANGE[e.rangeSnap.max].label,label:"","track-size":"10px",color:"primary"},null,8,["modelValue","left-label-value","right-label-value"])]),J("div",Ja,[el,A(fa,{type:"number",ref:"max_speed",modelValue:e.max_speed,"onUpdate:modelValue":n[3]||(n[3]=i=>e.max_speed=i),class:"full-width",placeholder:"Enter Max Speed","data-cy":"max_speed",rules:[i=>i&&i.length>0||"Please type speed limit"],"lazy-rules":"",outlined:""},null,8,["modelValue","rules"])])]),J("div",tl,[A(ha,{style:{border:"1px solid"}},{default:z(()=>[al,A(_a,{class:"fit-screen-height"},{default:z(()=>[J("div",null,[Xe((re(),Ne(et,{tag:"label"},{default:z(()=>[A(ge,null,{default:z(()=>[A(tt,null,{default:z(()=>[We("Select All")]),_:1})]),_:1}),A(ge,{side:"",top:""},{default:z(()=>[A(Ke,{modelValue:e.selected_trackers.all,"onUpdate:modelValue":[n[4]||(n[4]=i=>e.selected_trackers.all=i),n[5]||(n[5]=i=>e.selectAll(i))]},null,8,["modelValue"])]),_:1})]),_:1})),[[Je]])]),e.groups.length>0?(re(),qe("div",ll,[(re(!0),qe(yt,null,bt(e.groups,i=>(re(),qe("div",{key:i.id},[i.trackers.length>0?Xe((re(),Ne(et,{key:0,tag:"label",style:{"background-color":"rgb(21, 76, 121, 0.5)"}},{default:z(()=>[A(ge,null,{default:z(()=>[A(tt,{class:"text-white"},{default:z(()=>[We(Ee(i.title),1)]),_:2},1024)]),_:2},1024),A(ge,{side:"",top:""},{default:z(()=>[A(Ke,{modelValue:e.selected_trackers[i.title],"onUpdate:modelValue":[v=>e.selected_trackers[i.title]=v,v=>e.selectByGroup(v,i.id)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)),[[Je]]):ya("",!0),(re(!0),qe(yt,null,bt(i.trackers,v=>Xe((re(),Ne(et,{tag:"label",key:v.id},{default:z(()=>[A(ge,null,{default:z(()=>[A(tt,null,{default:z(()=>[We(Ee(v.label),1)]),_:2},1024)]),_:2},1024),A(ge,{side:"",top:""},{default:z(()=>[A(Ke,{ref_for:!0,ref:v.label,modelValue:e.selected_trackers[v.label],"onUpdate:modelValue":[p=>e.selected_trackers[v.label]=p,p=>e.selectTracker(p,v.id,i.id)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)),[[Je]])),128))]))),128))])):(re(),qe("div",nl,[(re(!0),qe(yt,null,bt(e.trackersAvailable,i=>Xe((re(),Ne(et,{tag:"label",key:i.id},{default:z(()=>[A(ge,null,{default:z(()=>[A(tt,null,{default:z(()=>[We(Ee(i.label),1)]),_:2},1024)]),_:2},1024),A(ge,{side:"",top:""},{default:z(()=>[A(Ke,{ref_for:!0,ref:i.label,modelValue:e.selected_trackers[i.label],"onUpdate:modelValue":[v=>e.selected_trackers[i.label]=v,v=>e.selectTracker(v,i.id,e.group.id)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)),[[Je]])),128))]))]),_:1})]),_:1})])]),J("div",rl,[J("div",ol,[A(oe,{class:"full-width bg-primary text-white",label:"Create Report","no-caps":"",type:"submit",loading:e.submitted,disabled:e.submitted},null,8,["loading","disabled"])])])],32)]),_:1})}var fl=sa(Ga,[["render",il]]);export{fl as default};
