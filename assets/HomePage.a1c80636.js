import{c as te,G as ye,aj as be,I as ke,r as D,b as f,ak as xe,K as Te,al as we,L as Ce,am as Se,B as M,C as F,ai as V,ad as W,W as $e,h as R,an as Pe,g as oe,y as ae,a9 as Re,z as _e,A as q,E as Oe,_ as Ee,e as qe,ao as Qe,m as Ae,f as De,p as Le,o as v,k as $,w as d,n as i,j as x,Q as P,i as C,l as z,v as He,F as Be,q as G,P as K,ap as Ie,t as Q,aq as U,ar as je}from"./index.dbdc3668.js";import{d as X,Q as Ne,c as Me,a as A,b as Y}from"./QItem.859ef144.js";import{u as Fe,v as J,a as Ve,p as Z,b as We,c as ze,r as ee,s as Ge,d as Ke}from"./position-engine.b71822d5.js";import{Q as Ue}from"./QPage.fb39ebf8.js";import{A as Xe}from"./AuthErrors.8af9588e.js";var Ye=te({name:"QTooltip",inheritAttrs:!1,props:{...Fe,...ye,...be,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:J},self:{type:String,default:"top middle",validator:J},offset:{type:Array,default:()=>[14,14],validator:Ve},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...ke],setup(e,{slots:o,emit:s,attrs:a}){let r,u;const p=oe(),{proxy:{$q:t}}=p,h=D(null),b=D(!1),_=f(()=>Z(e.anchor,t.lang.rtl)),n=f(()=>Z(e.self,t.lang.rtl)),m=f(()=>e.persistent!==!0),{registerTick:y,removeTick:S}=xe(),{registerTimeout:c}=Te(),{transition:se,transitionStyle:re}=we(e,b),{localScrollTarget:L,changeScrollEvent:le,unconfigureScrollTarget:ne}=We(e,j),{anchorEl:g,canShow:ie,anchorEvents:T}=ze({showing:b,configureAnchorEl:ge}),{show:ue,hide:O}=Ce({showing:b,canShow:ie,handleShow:de,handleHide:fe,hideOnRouteChange:m,processOnMount:!0});Object.assign(T,{delayShow:pe,delayHide:he});const{showPortal:H,hidePortal:B,renderPortal:ce}=Se(p,h,me);if(t.platform.is.mobile===!0){const l={anchorEl:g,innerRef:h,onClickOutside(k){return O(k),k.target.classList.contains("q-dialog__backdrop")&&Re(k),!0}},E=f(()=>e.modelValue===null&&e.persistent!==!0&&b.value===!0);M(E,k=>{(k===!0?Ke:ee)(l)}),F(()=>{ee(l)})}function de(l){H(),y(()=>{u=new MutationObserver(()=>w()),u.observe(h.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),w(),j()}),r===void 0&&(r=M(()=>t.screen.width+"|"+t.screen.height+"|"+e.self+"|"+e.anchor+"|"+t.lang.rtl,w)),c(()=>{H(!0),s("show",l)},e.transitionDuration)}function fe(l){S(),B(),I(),c(()=>{B(!0),s("hide",l)},e.transitionDuration)}function I(){u!==void 0&&(u.disconnect(),u=void 0),r!==void 0&&(r(),r=void 0),ne(),V(T,"tooltipTemp")}function w(){const l=h.value;g.value===null||!l||Ge({el:l,offset:e.offset,anchorEl:g.value,anchorOrigin:_.value,selfOrigin:n.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function pe(l){if(t.platform.is.mobile===!0){X(),document.body.classList.add("non-selectable");const E=g.value,k=["touchmove","touchcancel","touchend","click"].map(N=>[E,N,"delayHide","passiveCapture"]);W(T,"tooltipTemp",k)}c(()=>{ue(l)},e.delay)}function he(l){t.platform.is.mobile===!0&&(V(T,"tooltipTemp"),X(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),c(()=>{O(l)},e.hideDelay)}function ge(){if(e.noParentEvent===!0||g.value===null)return;const l=t.platform.is.mobile===!0?[[g.value,"touchstart","delayShow","passive"]]:[[g.value,"mouseenter","delayShow","passive"],[g.value,"mouseleave","delayHide","passive"]];W(T,"anchor",l)}function j(){if(g.value!==null||e.scrollTarget!==void 0){L.value=$e(g.value,e.scrollTarget);const l=e.noParentEvent===!0?w:O;le(L.value,l)}}function ve(){return b.value===!0?R("div",{...a,ref:h,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",a.class],style:[a.style,re.value],role:"tooltip"},ae(o.default)):null}function me(){return R(Pe,{name:se.value,appear:!0},ve)}return F(I),Object.assign(p.proxy,{updatePosition:w}),ce}});const Je={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function Ze(){const{props:e,proxy:{$q:o}}=oe(),s=_e(Oe,q);if(s===q)return console.error("QPageSticky needs to be child of QLayout"),q;const a=f(()=>{const n=e.position;return{top:n.indexOf("top")>-1,right:n.indexOf("right")>-1,bottom:n.indexOf("bottom")>-1,left:n.indexOf("left")>-1,vertical:n==="top"||n==="bottom",horizontal:n==="left"||n==="right"}}),r=f(()=>s.header.offset),u=f(()=>s.right.offset),p=f(()=>s.footer.offset),t=f(()=>s.left.offset),h=f(()=>{let n=0,m=0;const y=a.value,S=o.lang.rtl===!0?-1:1;y.top===!0&&r.value!==0?m=`${r.value}px`:y.bottom===!0&&p.value!==0&&(m=`${-p.value}px`),y.left===!0&&t.value!==0?n=`${S*t.value}px`:y.right===!0&&u.value!==0&&(n=`${-S*u.value}px`);const c={transform:`translate(${n}, ${m})`};return e.offset&&(c.margin=`${e.offset[1]}px ${e.offset[0]}px`),y.vertical===!0?(t.value!==0&&(c[o.lang.rtl===!0?"right":"left"]=`${t.value}px`),u.value!==0&&(c[o.lang.rtl===!0?"left":"right"]=`${u.value}px`)):y.horizontal===!0&&(r.value!==0&&(c.top=`${r.value}px`),p.value!==0&&(c.bottom=`${p.value}px`)),c}),b=f(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function _(n){const m=ae(n.default);return R("div",{class:b.value,style:h.value},e.expand===!0?m:[R("div",m)])}return{$layout:s,getStickyContent:_}}var et=te({name:"QPageSticky",props:Je,setup(e,{slots:o}){const{getStickyContent:s}=Ze();return()=>s(o)}});const tt=qe({data(){let e=Qe.query().all();var o=[],s=[];let a=0;for(let r in e)r=="0"&&(o[a]=[],s.push(a)),o[a].length==0||!o[a].includes(e[r])&&e[r].id-o[a][o[a].length-1].id<7||(a+=1,o[a]=[],s.push(a)),o[a].push(e[r]);return{reports:o.reverse(),keys:s,dialog:D(null)}},components:{errors:Xe},computed:{...Ae("reports",["getReports"])},methods:{...De("reports",["deleteReports","setActiveReport","refresh","updateReports"]),deleteReport(e){this.dialog=this.$q.dialog({title:"Confirm Delete",message:"This action can not be undone.",persistent:!0,ok:{label:"DELETE",color:"negative"},cancel:!0}).onOk(o=>{this.dialog=this.$q.dialog({title:"Deleting...",message:"0%",progress:!0,persistent:!0,ok:!1}),this.deleteReports(e);const s=setInterval(()=>{this.dialog.update({message:`${this.getReports.deleting}%`}),this.getReports.deleting===100&&(clearInterval(s),this.dialog.update({title:"Done!",message:"Delete completed successfully",progress:!1,ok:!0}).onOk(()=>{this.$router.go(this.$router.currentRoute)}))},500)})},viewReport(e){this.setActiveReport(e),this.$router.push("/report/fleet-operations-report")},reload(){}},mounted(){this.updateReports({pending:!1})}}),ot={class:"text-right q-pa-md"},at={key:0,class:"text-h5 text-primary text-bold q-py-xl q-px-md q-my-xl"},st={key:0,class:"text-red"},rt=x("td",{class:"text-bold"},"From:",-1),lt=x("td",{class:"text-bold"},"To:",-1),nt={key:2,class:"flex flex-center text-center",style:{height:"90vh"}};function it(e,o,s,a,r,u){const p=Le("errors");return v(),$(Ue,{class:"full-screen bg-white"},{default:d(()=>[i(p),x("div",ot,[i(P,{label:"Refresh","no-caps":"",icon:"refresh",class:"text-primary",onClick:e.refresh,loading:e.getReports.pending,disabled:e.getReports.pending,flat:"",unelevated:""},null,8,["onClick","loading","disabled"])]),e.keys.length>0?(v(),C("label",at,"Available Reports")):z("",!0),e.keys.length>0?(v(),$(Ne,{key:1,class:"fit-screen-content"},{default:d(()=>[(v(!0),C(Be,null,He(e.keys,t=>(v(),C("div",{key:t},[K((v(),$(Me,{clickable:"",class:"history"},{default:d(()=>[i(A,{avatar:"",onClick:h=>e.viewReport(e.reports[t])},{default:d(()=>[i(Ie,{class:"bg-primary text-white",icon:"list"})]),_:2},1032,["onClick"]),i(A,{onClick:h=>e.viewReport(e.reports[t])},{default:d(()=>[i(Y,{lines:"1",class:"text-primary text-bold"},{default:d(()=>[G("Fleet Report "+Q(e.reports[t][0].created)+" ",1),e.reports[t].length<7?(v(),C("span",st,"INCOMPLETE ")):z("",!0)]),_:2},1024),i(Y,{caption:"",lines:"2"},{default:d(()=>[x("tr",null,[rt,x("td",null,Q(e.reports[t][0].from),1)]),x("tr",null,[lt,x("td",null,Q(e.reports[t][0].to),1)])]),_:2},1024)]),_:2},1032,["onClick"]),K((v(),$(A,{side:"",clickable:""},{default:d(()=>[i(P,{class:"text-negative",icon:"delete",flat:"",dense:"",round:"",title:"Delete Report",onClick:h=>e.deleteReport(e.reports[t])},null,8,["onClick"])]),_:2},1024)),[[U]])]),_:2},1024)),[[U]]),i(je,{inset:"item"})]))),128))]),_:1})):(v(),C("div",nt,[i(P,{flat:"",class:"bg-primary text-white",label:"Create Report","no-caps":"",to:"/new-report"})])),i(et,{position:"bottom-right",offset:[18,18]},{default:d(()=>[i(P,{fab:"",icon:"add",color:"primary",to:"/new-report"},{default:d(()=>[i(Ye,{anchor:"top right",offset:[-20,15],"transition-show":"scale","transition-hide":"scale","content-class":"transparent"},{default:d(()=>[G(" Create new report ")]),_:1})]),_:1})]),_:1})]),_:1})}var ht=Ee(tt,[["render",it]]);export{ht as default};
