import{_ as p,e as _,m as g,ao as h,aM as v,aN as b,aO as w,o as x,i as C,j as y,n as i,Q as n,w as F,F as V}from"./index.adcf3461.js";import{Q as k}from"./QTable.869613f0.js";import"./QItem.63cc70ca.js";import"./rtl.b51694b1.js";import"./position-engine.f7a12acb.js";import"./selection.e911660f.js";import"./format.865294d5.js";const R=[{name:"asset_name",label:"Asset Name",field:"asset_name"},{name:"mileage",label:"Mileage",field:"mileage"},{name:"fuel_consumed",label:"Fuel Consumed [ltrs]",field:"fuel_consumed"},{name:"consumption",label:"Consumption",field:"consumption"},{name:"refueling",label:"Refueling",field:"refueling"},{name:"fuel_lost",label:"Fuel Lost (Siphoned) [ltrs]",field:"fuel_lost"},{name:"cost",label:"cost/ltr [Ugx]",field:"cost"},{name:"cost_of_fuel_consumed",label:"Cost Of Fuel Consumed [Ugx]",field:"cost_of_fuel_consumed"},{name:"initial_volume",label:"Initial Volume [ltrs]",field:"initial_volume"},{name:"final_volume",label:"Final Volume [ltrs]",field:"final_volume"}],N=_({data(){return{rows:[],columns:R,loading:!0}},computed:{...g("reports",["getReports"])},async mounted(){let s=h.findIn(this.getReports.activeReports),l=s[s.findIndex(e=>e.title==="Fuel report")];if((l&&l.sheets=="Exceeded Memory Limit"||l.sheets==null)&&await v.report.retreiveReport(l.id).then(e=>{l=e.report}).catch(e=>{l=null}),l&&l.sheets[0].sections[0].text!="No data")if(l.sheets[0].header.toLowerCase()=="summary"){let e=l.sheets[0].sections[0].data[0].rows;for(let o in e){let t=e[o].object.v,a=e[o].fillingsVolume.v,r=e[o].consumed.v;(3800*e[o].consumed.raw).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");let u=e[o].drainsVolume.v,m=e[o].mileage_by_gps.v,c=Number(m/e[o].consumed.raw).toFixed(2),d="",f="";this.rows.push({asset_name:t,mileage:m,fuel_consumed:r,consumption:c,refueling:a,fuel_lost:u,cost:"",cost_of_fuel_consumed:"",initial_volume:d,final_volume:f})}}else{let e=l.sheets[0].sections[3].data[0].rows[0],o=Number(e.mileage_by_gps.raw/e.consumed.raw).toFixed(2),t="",a="";this.rows.push({asset_name:l.sheets[0].header,mileage:e.mileage_by_gps.v,fuel_consumed:e.consumed.v,consumption:o,refueling:e.fillingsVolume.v,fuel_lost:e.drainsVolume.v,cost:"",cost_of_fuel_consumed:"",initial_volume:t,final_volume:a})}this.loading=!1},methods:{exportTable(){b(this.columns,this.rows,"Fuel Report.xlsx")},exportCSV(){w(this.columns,this.rows,"Fuel Report.csv")}}}),B={class:"full-width q-mt-md",align:"right"};function L(s,l,e,o,t,a){return x(),C(V,null,[y("div",B,[i(n,{flat:"",onClick:l[0]||(l[0]=r=>this.$router.push("/home")),icon:"keyboard_arrow_left",class:"text-positive",title:"Back"})]),i(k,{title:"Fuel Report",rows:s.rows,columns:s.columns,"row-key":"asset_name",class:"sticky-column","rows-per-page-options":[10,20,100],loading:s.loading},{"top-right":F(()=>[i(n,{color:"primary","icon-right":"download",label:"xls","no-caps":"",onClick:s.exportTable},null,8,["onClick"]),i(n,{color:"primary","icon-right":"download",label:"csv","no-caps":"",onClick:s.exportCSV,class:"q-mx-sm"},null,8,["onClick"])]),_:1},8,["rows","columns","loading"])],64)}var E=p(N,[["render",L]]);export{E as default};
