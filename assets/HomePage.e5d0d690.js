import{c as te,G as ye,aj as be,I as ke,r as L,b as f,ak as xe,K as Se,al as Te,L as $e,am as we,B as F,C as V,ai as W,ad as z,W as Ce,h as R,an as Pe,g as oe,y as se,a9 as Re,z as _e,A as q,E as Oe,_ as Ee,e as qe,ao as Qe,m as Ae,f as De,p as Le,o as v,k as C,w as d,n as i,j as x,Q as P,i as S,l as Q,v as He,F as Be,q as G,P as K,ap as Ie,t as A,aq as U,ar as Ne}from"./index.140c599f.js";import{d as X,Q as je,c as Me,a as D,b as Y}from"./QItem.22bf4ba9.js";import{u as Fe,v as J,a as Ve,p as Z,b as We,c as ze,r as ee,s as Ge,d as Ke}from"./position-engine.f4487063.js";import{Q as Ue}from"./QPage.1617f7d3.js";import{A as Xe}from"./AuthErrors.2215baf1.js";var Ye=te({name:"QTooltip",inheritAttrs:!1,props:{...Fe,...ye,...be,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:J},self:{type:String,default:"top middle",validator:J},offset:{type:Array,default:()=>[14,14],validator:Ve},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...ke],setup(e,{slots:o,emit:n,attrs:s}){let a,u;const p=oe(),{proxy:{$q:t}}=p,h=L(null),b=L(!1),_=f(()=>Z(e.anchor,t.lang.rtl)),l=f(()=>Z(e.self,t.lang.rtl)),m=f(()=>e.persistent!==!0),{registerTick:y,removeTick:w}=xe(),{registerTimeout:c}=Se(),{transition:ae,transitionStyle:ne}=Te(e,b),{localScrollTarget:H,changeScrollEvent:re,unconfigureScrollTarget:le}=We(e,j),{anchorEl:g,canShow:ie,anchorEvents:T}=ze({showing:b,configureAnchorEl:ge}),{show:ue,hide:O}=$e({showing:b,canShow:ie,handleShow:de,handleHide:fe,hideOnRouteChange:m,processOnMount:!0});Object.assign(T,{delayShow:pe,delayHide:he});const{showPortal:B,hidePortal:I,renderPortal:ce}=we(p,h,me);if(t.platform.is.mobile===!0){const r={anchorEl:g,innerRef:h,onClickOutside(k){return O(k),k.target.classList.contains("q-dialog__backdrop")&&Re(k),!0}},E=f(()=>e.modelValue===null&&e.persistent!==!0&&b.value===!0);F(E,k=>{(k===!0?Ke:ee)(r)}),V(()=>{ee(r)})}function de(r){B(),y(()=>{u=new MutationObserver(()=>$()),u.observe(h.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),$(),j()}),a===void 0&&(a=F(()=>t.screen.width+"|"+t.screen.height+"|"+e.self+"|"+e.anchor+"|"+t.lang.rtl,$)),c(()=>{B(!0),n("show",r)},e.transitionDuration)}function fe(r){w(),I(),N(),c(()=>{I(!0),n("hide",r)},e.transitionDuration)}function N(){u!==void 0&&(u.disconnect(),u=void 0),a!==void 0&&(a(),a=void 0),le(),W(T,"tooltipTemp")}function $(){const r=h.value;g.value===null||!r||Ge({el:r,offset:e.offset,anchorEl:g.value,anchorOrigin:_.value,selfOrigin:l.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function pe(r){if(t.platform.is.mobile===!0){X(),document.body.classList.add("non-selectable");const E=g.value,k=["touchmove","touchcancel","touchend","click"].map(M=>[E,M,"delayHide","passiveCapture"]);z(T,"tooltipTemp",k)}c(()=>{ue(r)},e.delay)}function he(r){t.platform.is.mobile===!0&&(W(T,"tooltipTemp"),X(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),c(()=>{O(r)},e.hideDelay)}function ge(){if(e.noParentEvent===!0||g.value===null)return;const r=t.platform.is.mobile===!0?[[g.value,"touchstart","delayShow","passive"]]:[[g.value,"mouseenter","delayShow","passive"],[g.value,"mouseleave","delayHide","passive"]];z(T,"anchor",r)}function j(){if(g.value!==null||e.scrollTarget!==void 0){H.value=Ce(g.value,e.scrollTarget);const r=e.noParentEvent===!0?$:O;re(H.value,r)}}function ve(){return b.value===!0?R("div",{...s,ref:h,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",s.class],style:[s.style,ne.value],role:"tooltip"},se(o.default)):null}function me(){return R(Pe,{name:ae.value,appear:!0},ve)}return V(N),Object.assign(p.proxy,{updatePosition:$}),ce}});const Je={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function Ze(){const{props:e,proxy:{$q:o}}=oe(),n=_e(Oe,q);if(n===q)return console.error("QPageSticky needs to be child of QLayout"),q;const s=f(()=>{const l=e.position;return{top:l.indexOf("top")>-1,right:l.indexOf("right")>-1,bottom:l.indexOf("bottom")>-1,left:l.indexOf("left")>-1,vertical:l==="top"||l==="bottom",horizontal:l==="left"||l==="right"}}),a=f(()=>n.header.offset),u=f(()=>n.right.offset),p=f(()=>n.footer.offset),t=f(()=>n.left.offset),h=f(()=>{let l=0,m=0;const y=s.value,w=o.lang.rtl===!0?-1:1;y.top===!0&&a.value!==0?m=`${a.value}px`:y.bottom===!0&&p.value!==0&&(m=`${-p.value}px`),y.left===!0&&t.value!==0?l=`${w*t.value}px`:y.right===!0&&u.value!==0&&(l=`${-w*u.value}px`);const c={transform:`translate(${l}, ${m})`};return e.offset&&(c.margin=`${e.offset[1]}px ${e.offset[0]}px`),y.vertical===!0?(t.value!==0&&(c[o.lang.rtl===!0?"right":"left"]=`${t.value}px`),u.value!==0&&(c[o.lang.rtl===!0?"left":"right"]=`${u.value}px`)):y.horizontal===!0&&(a.value!==0&&(c.top=`${a.value}px`),p.value!==0&&(c.bottom=`${p.value}px`)),c}),b=f(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function _(l){const m=se(l.default);return R("div",{class:b.value,style:h.value},e.expand===!0?m:[R("div",m)])}return{$layout:n,getStickyContent:_}}var et=te({name:"QPageSticky",props:Je,setup(e,{slots:o}){const{getStickyContent:n}=Ze();return()=>n(o)}});const tt=qe({data(){let e=Qe.query().all();var o=[],n=[];let s=0;for(let a in e)a=="0"&&(o[s]=[],n.push(s)),o[s].length==0||!o[s].includes(e[a])&&e[a].id-o[s][o[s].length-1].id<7&&o[s][o[s].length-1].to==e[a].to&&o[s][o[s].length-1].from==e[a].from||(s+=1,o[s]=[],n.push(s)),o[s].push(e[a]);return{reports:o.reverse(),keys:n,dialog:L(null)}},components:{errors:Xe},computed:{...Ae("reports",["getReports"])},methods:{...De("reports",["deleteReports","setActiveReport","refresh","updateReports"]),deleteReport(e){this.dialog=this.$q.dialog({title:"Confirm Delete",message:"This action can not be undone.",persistent:!0,ok:{label:"DELETE",color:"negative"},cancel:!0}).onOk(o=>{this.dialog=this.$q.dialog({title:"Deleting...",message:"0%",progress:!0,persistent:!0,ok:!1}),this.deleteReports(e);const n=setInterval(()=>{this.dialog.update({message:`${this.getReports.deleting}%`}),this.getReports.deleting===100&&(clearInterval(n),this.dialog.update({title:"Done!",message:"Delete completed successfully",progress:!1,ok:!0}).onOk(()=>{this.$router.go(this.$router.currentRoute)}))},500)})},viewReport(e){this.setActiveReport(e),e.length!=2?this.$router.push("/report/fleet-operations-report"):this.$router.push("/genset/engine-hours-report")},reload(){}},mounted(){this.updateReports({pending:!1})}}),ot={class:"text-right q-pa-md"},st={key:0,class:"text-h5 text-primary text-bold q-py-xl q-px-md q-my-xl"},at={key:0,class:"text-red q-px-sm"},nt={key:1,class:"text-green q-px-sm"},rt=x("td",{class:"text-bold"},"From:",-1),lt=x("td",{class:"text-bold"},"To:",-1),it={key:2,class:"flex flex-center text-center",style:{height:"90vh"}};function ut(e,o,n,s,a,u){const p=Le("errors");return v(),C(Ue,{class:"full-screen bg-white"},{default:d(()=>[i(p),x("div",ot,[i(P,{label:"Refresh","no-caps":"",icon:"refresh",class:"text-primary",onClick:e.refresh,loading:e.getReports.pending,disabled:e.getReports.pending,flat:"",unelevated:""},null,8,["onClick","loading","disabled"])]),e.keys.length>0?(v(),S("label",st,"Available Reports")):Q("",!0),e.keys.length>0?(v(),C(je,{key:1,class:"fit-screen-content"},{default:d(()=>[(v(!0),S(Be,null,He(e.keys,t=>(v(),S("div",{key:t},[K((v(),C(Me,{clickable:"",class:"history"},{default:d(()=>[i(D,{avatar:"",onClick:h=>e.viewReport(e.reports[t])},{default:d(()=>[i(Ie,{class:"bg-primary text-white",icon:"list"})]),_:2},1032,["onClick"]),i(D,{onClick:h=>e.viewReport(e.reports[t])},{default:d(()=>[i(Y,{lines:"1",class:"text-primary text-bold"},{default:d(()=>[G("Fleet Report "+A(e.reports[t][0].created)+" ",1),e.reports[t].length<7&&e.reports[t].length<2?(v(),S("span",at,"INCOMPLETE ")):Q("",!0),e.reports[t].length==2?(v(),S("span",nt,"GENSETS ")):Q("",!0)]),_:2},1024),i(Y,{caption:"",lines:"2"},{default:d(()=>[x("tr",null,[rt,x("td",null,A(e.reports[t][0].from),1)]),x("tr",null,[lt,x("td",null,A(e.reports[t][0].to),1)])]),_:2},1024)]),_:2},1032,["onClick"]),K((v(),C(D,{side:"",clickable:""},{default:d(()=>[i(P,{class:"text-negative",icon:"delete",flat:"",dense:"",round:"",title:"Delete Report",onClick:h=>e.deleteReport(e.reports[t])},null,8,["onClick"])]),_:2},1024)),[[U]])]),_:2},1024)),[[U]]),i(Ne,{inset:"item"})]))),128))]),_:1})):(v(),S("div",it,[i(P,{flat:"",class:"bg-primary text-white",label:"Create Report","no-caps":"",to:"/new-report"})])),i(et,{position:"bottom-right",offset:[18,18]},{default:d(()=>[i(P,{fab:"",icon:"add",color:"primary",to:"/new-report"},{default:d(()=>[i(Ye,{anchor:"top right",offset:[-20,15],"transition-show":"scale","transition-hide":"scale","content-class":"transparent"},{default:d(()=>[G(" Create new report ")]),_:1})]),_:1})]),_:1})]),_:1})}var gt=Ee(tt,[["render",ut]]);export{gt as default};
