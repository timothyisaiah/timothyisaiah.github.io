import{_ as r,e as l,m as d,ao as m,aM as p,bn as c,aN as u,aO as _,o as v,i as h,j as g,n as s,Q as a,w as f,F as b}from"./index.bd67c83e.js";import{Q as w}from"./QTable.b93f300b.js";import"./QItem.6176c4fe.js";import"./rtl.b51694b1.js";import"./position-engine.02defa19.js";import"./selection.ee301375.js";import"./format.865294d5.js";const x=[{name:"asset_name",label:"Asset Name",field:"asset_name"},{name:"duration",label:"Engine hours",field:"duration"},{name:"asset_utilization",label:"Asset Utilization",field:"asset_utilization"},{name:"idle",label:"Idling",field:"idle"},{name:"in_movement",label:"In Movement",field:"in_movement"},{name:"period_count",label:"Intervals",field:"period_count"},{name:"avg_period",label:"Average Interval",field:"avg_period"},{name:"percent_idle",label:"Percentage Idle",field:"percent_idle"},{name:"percent_in_movement",label:"Percentage in Movement",field:"percent_in_movement"}],y=l({data(){return{rows:[],columns:x,loading:!0}},computed:{...d("reports",["getReports"])},async mounted(){let n=m.findIn(this.getReports.activeReports),t=n[n.findIndex(i=>i.title==="Engine hours report")];if((t&&t.sheets=="Exceeded Memory Limit"||t.sheets==null)&&await p.report.retreiveReport(t.id).then(i=>{t=i.report}).catch(i=>{t=null}),t&&t.sheets[0].sections[0].text!="No data"){let i=c(t.from,t.to,"days");if(t.sheets[0].header.toLowerCase()=="summary"){let e=t.sheets[0].sections[0].data[0].rows;for(let o in e)this.rows.push({asset_name:e[o].tracker.v,duration:e[o].duration.v,asset_utilization:Number(e[o].duration.raw/(12*60*60*i)*100).toFixed(2),idle:e[o].idle.v,in_movement:e[o].in_movement.v,period_count:e[o].period_count.v,avg_period:e[o].avg_period.v,percent_in_movement:e[o].percent_in_movement.v,percent_idle:e[o].percent_idle.v})}else{let e=t.sheets[0].sections[3].data[0].total;this.rows.push({asset_name:t.sheets[0].header,duration:e.duration.v,asset_utilization:Number(e.duration.raw/(12*60*60*i)*100).toFixed(2),idle:e.idle.v,in_movement:e.in_movement.v,period_count:e.period_count.v,avg_period:e.avg_period.v,percent_in_movement:e.percent_in_movement.v,percent_idle:e.percent_idle.v})}}this.loading=!1},methods:{exportTable(){u(this.columns,this.rows,"Gensets Engine Hours Report.xlsx")},exportCSV(){_(this.columns,this.rows,"Gensets Engine Hours Report.csv")}}}),k={class:"full-width q-mt-md",align:"right"};function C(n,t,i,e,o,R){return v(),h(b,null,[g("div",k,[s(a,{flat:"",onClick:t[0]||(t[0]=E=>this.$router.push("/home")),icon:"keyboard_arrow_left",class:"text-positive",title:"Back"})]),s(w,{title:"Engine Hours Report",rows:n.rows,columns:n.columns,"row-key":"asset_name",class:"sticky-column","rows-per-page-options":[10,20,100],loading:n.loading},{"top-right":f(()=>[s(a,{color:"primary","icon-right":"download",label:"xls","no-caps":"",onClick:n.exportTable},null,8,["onClick"]),s(a,{color:"primary","icon-right":"download",label:"csv","no-caps":"",onClick:n.exportCSV,class:"q-mx-sm"},null,8,["onClick"])]),_:1},8,["rows","columns","loading"])],64)}var F=r(y,[["render",C]]);export{F as default};
