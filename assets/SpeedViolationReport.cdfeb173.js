import{_ as p,e as m,m as c,ao as u,aM as h,aN as f,aO as _,o as v,i as x,j as w,n as l,Q as d,w as b,F as g}from"./index.bd67c83e.js";import{Q as k}from"./QTable.b93f300b.js";import"./QItem.6176c4fe.js";import"./rtl.b51694b1.js";import"./position-engine.02defa19.js";import"./selection.ee301375.js";import"./format.865294d5.js";const S=[{name:"asset_name",label:"Asset Name",field:"asset_name"},{name:"driver_name",label:"Driver Name",field:"driver_name"},{name:"date",label:"Date",field:"date"},{name:"start_time",label:"Start Time",field:"start_time"},{name:"duration",label:"Duration",field:"duration"},{name:"max_speed",label:"Max. Speed [Km/hr]",field:"max_speed"},{name:"address",label:"Address",field:"address"}],C=m({data(){return{columns:S,rows:[],loading:!0}},computed:{...c("reports",["getReports"])},async mounted(){let a=u.findIn(this.getReports.activeReports),e=a[a.findIndex(t=>t.title==="Speed violation report")];if((e&&e.sheets=="Exceeded Memory Limit"||e.sheets==null)&&await h.report.retreiveReport(e.id).then(t=>{e=t.report}).catch(t=>{e=null}),e&&e.sheets[0].header!="No data found"){let t=e.sheets;for(let s in t){let n=t[s].sections[2].data;for(let r=0;r<n.length;r++){let o=n[r].rows;for(let i in o)this.rows.push({asset_name:t[s].header,driver_name:t[s].sections[0].text.split(":")[0],date:t[s].sections[2].data[r].header,start_time:o[i].start_time.v,duration:o[i].duration.v,max_speed:o[i].max_speed.v,address:o[i].max_speed_address.v})}}}this.loading=!1},methods:{exportTable(){f(this.columns,this.rows,"Speed Violation Report.xlsx")},exportCSV(){_(this.columns,this.rows,"Speed Violation Report.csv")}}}),R={class:"full-width q-mt-md",align:"right"};function V(a,e,t,s,n,r){return v(),x(g,null,[w("div",R,[l(d,{flat:"",onClick:e[0]||(e[0]=o=>this.$router.push("/home")),icon:"keyboard_arrow_left",class:"text-positive",title:"Back"})]),l(k,{title:"Speed Violation Report",rows:a.rows,columns:a.columns,"row-key":"asset_name",class:"sticky-column","rows-per-page-options":[10,20,100,200],loading:a.loading},{"top-right":b(()=>[l(d,{color:"primary","icon-right":"download",label:"xls","no-caps":"",onClick:a.exportTable},null,8,["onClick"]),l(d,{color:"primary","icon-right":"download",label:"csv",class:"q-mx-sm","no-caps":"",onClick:a.exportCSV},null,8,["onClick"])]),_:1},8,["rows","columns","loading"])],64)}var M=p(C,[["render",V]]);export{M as default};
