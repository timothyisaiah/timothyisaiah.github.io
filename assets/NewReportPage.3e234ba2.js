import{b as s,at as Nt,au as ea,c as Et,av as Ft,M as Ot,O as Lt,aw as ta,r as L,ax as Xe,I as we,h as g,an as He,y as aa,g as Mt,ay as Bt,D as Dt,Q as re,az as la,B as na,ah as ra,U as oa,a9 as ia,_ as sa,e as ua,m as ca,f as Ct,aA as da,aB as pt,aC as va,p as ma,o as xe,k as Pe,w as K,n as B,j as J,t as Ze,aD as fa,T as ct,q as dt,aE as vt,i as mt,v as St,F as Rt,aF as ha,aG as ga,aq as ft,l as ya}from"./index.3289350d.js";import{p as q,b as ue}from"./format.865294d5.js";import{T as ba}from"./TouchPan.23240a14.js";import{Q as _a,c as ht,a as qe,b as gt}from"./QItem.cce6c608.js";import{Q as Ma}from"./QPage.dd51306a.js";import{A as xa}from"./AuthErrors.eb65582d.js";function ka(){const e=new Map;return{getCache:function(n,u){return e[n]===void 0?e[n]=u:e[n]},getCacheWithFn:function(n,u){return e[n]===void 0?e[n]=u():e[n]}}}const be=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function wa(e,n,u){return Object.prototype.toString.call(e)==="[object Date]"&&(u=e.getDate(),n=e.getMonth()+1,e=e.getFullYear()),Sa(xt(e,n,u))}function qt(e,n,u){return zt(pa(e,n,u))}function Da(e){return Ca(e)===0}function We(e,n){return n<=6?31:n<=11||Da(e)?30:29}function Ca(e){const n=be.length;let u=be[0],r,l,c,_,i;if(e<u||e>=be[n-1])throw new Error("Invalid Jalaali year "+e);for(i=1;i<n&&(r=be[i],l=r-u,!(e<r));i+=1)u=r;return _=e-u,l-_<6&&(_=_-l+I(l+4,33)*33),c=ee(ee(_+1,33)-1,4),c===-1&&(c=4),c}function jt(e,n){const u=be.length,r=e+621;let l=-14,c=be[0],_,i,v,D,f;if(e<c||e>=be[u-1])throw new Error("Invalid Jalaali year "+e);for(f=1;f<u&&(_=be[f],i=_-c,!(e<_));f+=1)l=l+I(i,33)*8+I(ee(i,33),4),c=_;D=e-c,l=l+I(D,33)*8+I(ee(D,33)+3,4),ee(i,33)===4&&i-D===4&&(l+=1);const M=I(r,4)-I((I(r,100)+1)*3,4)-150,F=20+l-M;return n||(i-D<6&&(D=D-i+I(i+4,33)*33),v=ee(ee(D+1,33)-1,4),v===-1&&(v=4)),{leap:v,gy:r,march:F}}function pa(e,n,u){const r=jt(e,!0);return xt(r.gy,3,r.march)+(n-1)*31-I(n,7)*(n-7)+u-1}function Sa(e){const n=zt(e).gy;let u=n-621,r,l,c;const _=jt(u,!1),i=xt(n,3,_.march);if(c=e-i,c>=0){if(c<=185)return l=1+I(c,31),r=ee(c,31)+1,{jy:u,jm:l,jd:r};c-=186}else u-=1,c+=179,_.leap===1&&(c+=1);return l=7+I(c,30),r=ee(c,30)+1,{jy:u,jm:l,jd:r}}function xt(e,n,u){let r=I((e+I(n-8,6)+100100)*1461,4)+I(153*ee(n+9,12)+2,5)+u-34840408;return r=r-I(I(e+100100+I(n-8,6),100)*3,4)+752,r}function zt(e){let n=4*e+139361631;n=n+I(I(4*e+183187720,146097)*3,4)*4-3908;const u=I(ee(n,1461),4)*5+308,r=I(ee(u,153),5)+1,l=ee(I(u,153),12)+1;return{gy:I(n,1461)-100100+I(8-l,6),gm:l,gd:r}}function I(e,n){return~~(e/n)}function ee(e,n){return e-~~(e/n)*n}const Ra=["gregorian","persian"],qa={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Ra.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Ta=["update:modelValue"];function he(e){return e.year+"/"+q(e.month)+"/"+q(e.day)}function Ya(e,n){const u=s(()=>e.disable!==!0&&e.readonly!==!0),r=s(()=>e.editable===!0?0:-1),l=s(()=>{const i=[];return e.color!==void 0&&i.push(`bg-${e.color}`),e.textColor!==void 0&&i.push(`text-${e.textColor}`),i.join(" ")});function c(){return e.locale!==void 0?{...n.lang.date,...e.locale}:n.lang.date}function _(i){const v=new Date,D=i===!0?null:0;if(e.calendar==="persian"){const f=wa(v);return{year:f.jy,month:f.jm,day:f.jd}}return{year:v.getFullYear(),month:v.getMonth()+1,day:v.getDate(),hour:D,minute:D,second:D,millisecond:D}}return{editable:u,tabindex:r,headerClass:l,getLocale:c,getCurrentDate:_}}const Qt=864e5,$a=36e5,_t=6e4,Gt="YYYY-MM-DDTHH:mm:ss.SSSZ",Va=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Ia=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,yt={};function Ha(e,n){const u="("+n.days.join("|")+")",r=e+u;if(yt[r]!==void 0)return yt[r];const l="("+n.daysShort.join("|")+")",c="("+n.months.join("|")+")",_="("+n.monthsShort.join("|")+")",i={};let v=0;const D=e.replace(Ia,M=>{switch(v++,M){case"YY":return i.YY=v,"(-?\\d{1,2})";case"YYYY":return i.YYYY=v,"(-?\\d{1,4})";case"M":return i.M=v,"(\\d{1,2})";case"MM":return i.M=v,"(\\d{2})";case"MMM":return i.MMM=v,_;case"MMMM":return i.MMMM=v,c;case"D":return i.D=v,"(\\d{1,2})";case"Do":return i.D=v++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return i.D=v,"(\\d{2})";case"H":return i.H=v,"(\\d{1,2})";case"HH":return i.H=v,"(\\d{2})";case"h":return i.h=v,"(\\d{1,2})";case"hh":return i.h=v,"(\\d{2})";case"m":return i.m=v,"(\\d{1,2})";case"mm":return i.m=v,"(\\d{2})";case"s":return i.s=v,"(\\d{1,2})";case"ss":return i.s=v,"(\\d{2})";case"S":return i.S=v,"(\\d{1})";case"SS":return i.S=v,"(\\d{2})";case"SSS":return i.S=v,"(\\d{3})";case"A":return i.A=v,"(AM|PM)";case"a":return i.a=v,"(am|pm)";case"aa":return i.aa=v,"(a\\.m\\.|p\\.m\\.)";case"ddd":return l;case"dddd":return u;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return i.Z=v,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return i.ZZ=v,"(Z|[+-]\\d{2}\\d{2})";case"X":return i.X=v,"(-?\\d+)";case"x":return i.x=v,"(-?\\d{4,})";default:return v--,M[0]==="["&&(M=M.substring(1,M.length-1)),M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),f={map:i,regex:new RegExp("^"+D)};return yt[r]=f,f}function Pt(e,n){return e!==void 0?e:n!==void 0?n.date:ea.date}function Tt(e,n=""){const u=e>0?"-":"+",r=Math.abs(e),l=Math.floor(r/60),c=r%60;return u+q(l)+n+q(c)}function Aa(e,n,u,r,l){const c={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(l!==void 0&&Object.assign(c,l),e==null||e===""||typeof e!="string")return c;n===void 0&&(n=Gt);const _=Pt(u,Nt.props),i=_.months,v=_.monthsShort,{regex:D,map:f}=Ha(n,_),M=e.match(D);if(M===null)return c;let F="";if(f.X!==void 0||f.x!==void 0){const j=parseInt(M[f.X!==void 0?f.X:f.x],10);if(isNaN(j)===!0||j<0)return c;const N=new Date(j*(f.X!==void 0?1e3:1));c.year=N.getFullYear(),c.month=N.getMonth()+1,c.day=N.getDate(),c.hour=N.getHours(),c.minute=N.getMinutes(),c.second=N.getSeconds(),c.millisecond=N.getMilliseconds()}else{if(f.YYYY!==void 0)c.year=parseInt(M[f.YYYY],10);else if(f.YY!==void 0){const j=parseInt(M[f.YY],10);c.year=j<0?j:2e3+j}if(f.M!==void 0){if(c.month=parseInt(M[f.M],10),c.month<1||c.month>12)return c}else f.MMM!==void 0?c.month=v.indexOf(M[f.MMM])+1:f.MMMM!==void 0&&(c.month=i.indexOf(M[f.MMMM])+1);if(f.D!==void 0){if(c.day=parseInt(M[f.D],10),c.year===null||c.month===null||c.day<1)return c;const j=r!=="persian"?new Date(c.year,c.month,0).getDate():We(c.year,c.month);if(c.day>j)return c}f.H!==void 0?c.hour=parseInt(M[f.H],10)%24:f.h!==void 0&&(c.hour=parseInt(M[f.h],10)%12,(f.A&&M[f.A]==="PM"||f.a&&M[f.a]==="pm"||f.aa&&M[f.aa]==="p.m.")&&(c.hour+=12),c.hour=c.hour%24),f.m!==void 0&&(c.minute=parseInt(M[f.m],10)%60),f.s!==void 0&&(c.second=parseInt(M[f.s],10)%60),f.S!==void 0&&(c.millisecond=parseInt(M[f.S],10)*10**(3-M[f.S].length)),(f.Z!==void 0||f.ZZ!==void 0)&&(F=f.Z!==void 0?M[f.Z].replace(":",""):M[f.ZZ],c.timezoneOffset=(F[0]==="+"?-1:1)*(60*F.slice(1,3)+1*F.slice(3,5)))}return c.dateHash=q(c.year,6)+"/"+q(c.month)+"/"+q(c.day),c.timeHash=q(c.hour)+":"+q(c.minute)+":"+q(c.second)+F,c}function Yt(e){const n=new Date(e.getFullYear(),e.getMonth(),e.getDate());n.setDate(n.getDate()-(n.getDay()+6)%7+3);const u=new Date(n.getFullYear(),0,4);u.setDate(u.getDate()-(u.getDay()+6)%7+3);const r=n.getTimezoneOffset()-u.getTimezoneOffset();n.setHours(n.getHours()-r);const l=(n-u)/(Qt*7);return 1+Math.floor(l)}function ve(e,n,u){const r=new Date(e),l=`set${u===!0?"UTC":""}`;switch(n){case"year":case"years":r[`${l}Month`](0);case"month":case"months":r[`${l}Date`](1);case"day":case"days":case"date":r[`${l}Hours`](0);case"hour":case"hours":r[`${l}Minutes`](0);case"minute":case"minutes":r[`${l}Seconds`](0);case"second":case"seconds":r[`${l}Milliseconds`](0)}return r}function Ue(e,n,u){return(e.getTime()-e.getTimezoneOffset()*_t-(n.getTime()-n.getTimezoneOffset()*_t))/u}function Zt(e,n,u="days"){const r=new Date(e),l=new Date(n);switch(u){case"years":case"year":return r.getFullYear()-l.getFullYear();case"months":case"month":return(r.getFullYear()-l.getFullYear())*12+r.getMonth()-l.getMonth();case"days":case"day":case"date":return Ue(ve(r,"day"),ve(l,"day"),Qt);case"hours":case"hour":return Ue(ve(r,"hour"),ve(l,"hour"),$a);case"minutes":case"minute":return Ue(ve(r,"minute"),ve(l,"minute"),_t);case"seconds":case"second":return Ue(ve(r,"second"),ve(l,"second"),1e3)}}function $t(e){return Zt(e,ve(e,"year"),"days")+1}function Vt(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const It={YY(e,n,u){const r=this.YYYY(e,n,u)%100;return r>=0?q(r):"-"+q(Math.abs(r))},YYYY(e,n,u){return u!=null?u:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return q(e.getMonth()+1)},MMM(e,n){return n.monthsShort[e.getMonth()]},MMMM(e,n){return n.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return Vt(this.Q(e))},D(e){return e.getDate()},Do(e){return Vt(e.getDate())},DD(e){return q(e.getDate())},DDD(e){return $t(e)},DDDD(e){return q($t(e),3)},d(e){return e.getDay()},dd(e,n){return this.dddd(e,n).slice(0,2)},ddd(e,n){return n.daysShort[e.getDay()]},dddd(e,n){return n.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Yt(e)},ww(e){return q(Yt(e))},H(e){return e.getHours()},HH(e){return q(e.getHours())},h(e){const n=e.getHours();return n===0?12:n>12?n%12:n},hh(e){return q(this.h(e))},m(e){return e.getMinutes()},mm(e){return q(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return q(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return q(Math.floor(e.getMilliseconds()/10))},SSS(e){return q(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,n,u,r){const l=r==null?e.getTimezoneOffset():r;return Tt(l,":")},ZZ(e,n,u,r){const l=r==null?e.getTimezoneOffset():r;return Tt(l)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Na(e,n,u,r,l){if(e!==0&&!e||e===1/0||e===-1/0)return;const c=new Date(e);if(isNaN(c))return;n===void 0&&(n=Gt);const _=Pt(u,Nt.props);return n.replace(Va,(i,v)=>i in It?It[i](c,_,r,l):v===void 0?i:v.split("\\]").join("]"))}const ke=20,Ea=["Calendar","Years","Months"],Ht=e=>Ea.includes(e),bt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Te=" \u2014 ";function ge(e){return e.year+"/"+q(e.month)}var Fa=Et({name:"QDate",props:{...qa,...Ft,...Ot,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:bt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:bt},navigationMaxYearMonth:{type:String,validator:bt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Ht}},emits:[...Ta,"range-start","range-end","navigation"],setup(e,{slots:n,emit:u}){const{proxy:r}=Mt(),{$q:l}=r,c=Lt(e,l),{getCache:_}=ka(),{tabindex:i,headerClass:v,getLocale:D,getCurrentDate:f}=Ya(e,l);let M;const F=ta(e),j=Bt(F),N=L(null),te=L(je()),C=L(D()),ae=s(()=>je()),oe=s(()=>D()),z=s(()=>f()),b=L(ze(te.value,C.value)),Q=L(e.defaultView),De=l.lang.rtl===!0?"right":"left",le=L(De.value),ce=L(De.value),ie=b.value.year,se=L(ie-ie%ke-(ie<0?ke:0)),E=L(null),$=s(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(c.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),k=s(()=>e.color||"primary"),T=s(()=>e.textColor||"white"),Y=s(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),P=s(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),O=s(()=>P.value.filter(t=>typeof t=="string").map(t=>Ie(t,te.value,C.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),S=s(()=>{const t=a=>Ie(a,te.value,C.value);return P.value.filter(a=>Xe(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),U=s(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=qt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),me=s(()=>e.calendar==="persian"?he:(t,a,o)=>Na(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?te.value:a,o===void 0?C.value:o,t.year,t.timezoneOffset)),_e=s(()=>O.value.length+S.value.reduce((t,a)=>t+1+Zt(U.value(a.to),U.value(a.from)),0)),Ae=s(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(E.value!==null){const o=E.value.init,h=U.value(o);return C.value.daysShort[h.getDay()]+", "+C.value.monthsShort[o.month-1]+" "+o.day+Te+"?"}if(_e.value===0)return Te;if(_e.value>1)return`${_e.value} ${C.value.pluralDay}`;const t=O.value[0],a=U.value(t);return isNaN(a.valueOf())===!0?Te:C.value.headerTitle!==void 0?C.value.headerTitle(a,t):C.value.daysShort[a.getDay()]+", "+C.value.monthsShort[t.month-1]+" "+t.day}),Ke=s(()=>O.value.concat(S.value.map(a=>a.from)).sort((a,o)=>a.year-o.year||a.month-o.month)[0]),Je=s(()=>O.value.concat(S.value.map(a=>a.to)).sort((a,o)=>o.year-a.year||o.month-a.month)[0]),Ne=s(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(_e.value===0)return Te;if(_e.value>1){const t=Ke.value,a=Je.value,o=C.value.monthsShort;return o[t.month-1]+(t.year!==a.year?" "+t.year+Te+o[a.month-1]+" ":t.month!==a.month?Te+o[a.month-1]:"")+" "+a.year}return O.value[0].year}),Ce=s(()=>{const t=[l.iconSet.datetime.arrowLeft,l.iconSet.datetime.arrowRight];return l.lang.rtl===!0?t.reverse():t}),Ee=s(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):C.value.firstDayOfWeek),et=s(()=>{const t=C.value.daysShort,a=Ee.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),ne=s(()=>{const t=b.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():We(t.year,t.month)}),tt=s(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),G=s(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Z=s(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),pe=s(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return G.value!==null&&G.value.year>=b.value.year&&(t.year.prev=!1,G.value.year===b.value.year&&G.value.month>=b.value.month&&(t.month.prev=!1)),Z.value!==null&&Z.value.year<=b.value.year&&(t.year.next=!1,Z.value.year===b.value.year&&Z.value.month<=b.value.month&&(t.month.next=!1)),t}),Me=s(()=>{const t={};return O.value.forEach(a=>{const o=ge(a);t[o]===void 0&&(t[o]=[]),t[o].push(a.day)}),t}),Ye=s(()=>{const t={};return S.value.forEach(a=>{const o=ge(a.from),h=ge(a.to);if(t[o]===void 0&&(t[o]=[]),t[o].push({from:a.from.day,to:o===h?a.to.day:void 0,range:a}),o<h){let m;const{year:p,month:y}=a.from,x=y<12?{year:p,month:y+1}:{year:p+1,month:1};for(;(m=ge(x))<=h;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===h?a.to.day:void 0,range:a}),x.month++,x.month>12&&(x.year++,x.month=1)}}),t}),de=s(()=>{if(E.value===null)return;const{init:t,initHash:a,final:o,finalHash:h}=E.value,[m,p]=a<=h?[t,o]:[o,t],y=ge(m),x=ge(p);if(y!==X.value&&x!==X.value)return;const A={};return y===X.value?(A.from=m.day,A.includeFrom=!0):A.from=1,x===X.value?(A.to=p.day,A.includeTo=!0):A.to=ne.value,A}),X=s(()=>ge(b.value)),at=s(()=>{const t={};if(e.options===void 0){for(let o=1;o<=ne.value;o++)t[o]=!0;return t}const a=typeof e.options=="function"?e.options:o=>e.options.includes(o);for(let o=1;o<=ne.value;o++){const h=X.value+"/"+q(o);t[o]=a(h)}return t}),lt=s(()=>{const t={};if(e.events===void 0)for(let a=1;a<=ne.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:o=>e.events.includes(o);for(let o=1;o<=ne.value;o++){const h=X.value+"/"+q(o);t[o]=a(h)===!0&&tt.value(h)}}return t}),Fe=s(()=>{let t,a;const{year:o,month:h}=b.value;if(e.calendar!=="persian")t=new Date(o,h-1,1),a=new Date(o,h-1,0).getDate();else{const m=qt(o,h,1);t=new Date(m.gy,m.gm-1,m.gd);let p=h-1,y=o;p===0&&(p=12,y--),a=We(y,p)}return{days:t.getDay()-Ee.value-1,endDay:a}}),Oe=s(()=>{const t=[],{days:a,endDay:o}=Fe.value,h=a<0?a+7:a;if(h<6)for(let y=o-h;y<=o;y++)t.push({i:y,fill:!0});const m=t.length;for(let y=1;y<=ne.value;y++){const x={i:y,event:lt.value[y],classes:[]};at.value[y]===!0&&(x.in=!0,x.flat=!0),t.push(x)}if(Me.value[X.value]!==void 0&&Me.value[X.value].forEach(y=>{const x=m+y-1;Object.assign(t[x],{selected:!0,unelevated:!0,flat:!1,color:k.value,textColor:T.value})}),Ye.value[X.value]!==void 0&&Ye.value[X.value].forEach(y=>{if(y.from!==void 0){const x=m+y.from-1,A=m+(y.to||ne.value)-1;for(let ut=x;ut<=A;ut++)Object.assign(t[ut],{range:y.range,unelevated:!0,color:k.value,textColor:T.value});Object.assign(t[x],{rangeFrom:!0,flat:!1}),y.to!==void 0&&Object.assign(t[A],{rangeTo:!0,flat:!1})}else if(y.to!==void 0){const x=m+y.to-1;for(let A=m;A<=x;A++)Object.assign(t[A],{range:y.range,unelevated:!0,color:k.value,textColor:T.value});Object.assign(t[x],{flat:!1,rangeTo:!0})}else{const x=m+ne.value-1;for(let A=m;A<=x;A++)Object.assign(t[A],{range:y.range,unelevated:!0,color:k.value,textColor:T.value})}}),de.value!==void 0){const y=m+de.value.from-1,x=m+de.value.to-1;for(let A=y;A<=x;A++)t[A].color=k.value,t[A].editRange=!0;de.value.includeFrom===!0&&(t[y].editRangeFrom=!0),de.value.includeTo===!0&&(t[x].editRangeTo=!0)}b.value.year===z.value.year&&b.value.month===z.value.month&&(t[m+z.value.day-1].today=!0);const p=t.length%7;if(p>0){const y=7-p;for(let x=1;x<=y;x++)t.push({i:x,fill:!0})}return t.forEach(y=>{let x="q-date__calendar-item ";y.fill===!0?x+="q-date__calendar-item--fill":(x+=`q-date__calendar-item--${y.in===!0?"in":"out"}`,y.range!==void 0&&(x+=` q-date__range${y.rangeTo===!0?"-to":y.rangeFrom===!0?"-from":""}`),y.editRange===!0&&(x+=` q-date__edit-range${y.editRangeFrom===!0?"-from":""}${y.editRangeTo===!0?"-to":""}`),(y.range!==void 0||y.editRange===!0)&&(x+=` text-${y.color}`)),y.classes=x}),t}),nt=s(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});we(()=>e.modelValue,t=>{if(M===t)M=0;else{const{year:a,month:o}=ze(te.value,C.value);W(a,o)}}),we(Q,()=>{N.value!==null&&N.value.focus()}),we(()=>b.value.year,t=>{u("navigation",{year:t,month:b.value.month})}),we(()=>b.value.month,t=>{u("navigation",{year:b.value.year,month:t})}),we(ae,t=>{wt(t,C.value,"mask"),te.value=t}),we(oe,t=>{wt(te.value,t,"locale"),C.value=t});function Le(){const t=z.value,a=Me.value[ge(t)];(a===void 0||a.includes(t.day)===!1)&&ot(t),$e(t.year,t.month)}function rt(t){Ht(t)===!0&&(Q.value=t)}function Be(t,a){["month","year"].includes(t)&&(t==="month"?Ge:d)(a===!0?-1:1)}function $e(t,a){Q.value="Calendar",W(t,a)}function Ve(t,a){if(e.range===!1||!t){E.value=null;return}const o=Object.assign({...b.value},t),h=a!==void 0?Object.assign({...b.value},a):o;E.value={init:o,initHash:he(o),final:h,finalHash:he(h)},$e(o.year,o.month)}function je(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ie(t,a,o){return Aa(t,a,o,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function ze(t,a){const o=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(o.length===0)return Qe();const h=o[o.length-1],m=Ie(h.from!==void 0?h.from:h,t,a);return m.dateHash===null?Qe():m}function Qe(){let t,a;if(e.defaultYearMonth!==void 0){const o=e.defaultYearMonth.split("/");t=parseInt(o[0],10),a=parseInt(o[1],10)}else{const o=z.value!==void 0?z.value:f();t=o.year,a=o.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+q(a)+"/01"}}function Ge(t){let a=b.value.year,o=Number(b.value.month)+t;o===13?(o=1,a++):o===0&&(o=12,a--),W(a,o),Y.value===!0&&fe("month")}function d(t){const a=Number(b.value.year)+t;W(a,b.value.month),Y.value===!0&&fe("year")}function w(t){W(t,b.value.month),Q.value=e.defaultView==="Years"?"Months":"Calendar",Y.value===!0&&fe("year")}function R(t){W(b.value.year,t),Q.value="Calendar",Y.value===!0&&fe("month")}function V(t,a){const o=Me.value[a];(o!==void 0&&o.includes(t.day)===!0?it:ot)(t)}function H(t){return{year:t.year,month:t.month,day:t.day}}function W(t,a){G.value!==null&&t<=G.value.year&&(t=G.value.year,a<G.value.month&&(a=G.value.month)),Z.value!==null&&t>=Z.value.year&&(t=Z.value.year,a>Z.value.month&&(a=Z.value.month));const o=t+"/"+q(a)+"/01";o!==b.value.dateHash&&(le.value=b.value.dateHash<o==(l.lang.rtl!==!0)?"left":"right",t!==b.value.year&&(ce.value=le.value),Dt(()=>{se.value=t-t%ke-(t<0?ke:0),Object.assign(b.value,{year:t,month:a,day:1,dateHash:o})}))}function Se(t,a,o){const h=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;M=h;const{reason:m,details:p}=kt(a,o);u("update:modelValue",h,m,p)}function fe(t){const a=O.value[0]!==void 0&&O.value[0].dateHash!==null?{...O.value[0]}:{...b.value};Dt(()=>{a.year=b.value.year,a.month=b.value.month;const o=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():We(a.year,a.month);a.day=Math.min(Math.max(1,a.day),o);const h=Re(a);M=h;const{details:m}=kt("",a);u("update:modelValue",h,t,m)})}function kt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...H(a.target),from:H(a.from),to:H(a.to)}}:{reason:`${t}-day`,details:H(a)}}function Re(t,a,o){return t.from!==void 0?{from:me.value(t.from,a,o),to:me.value(t.to,a,o)}:me.value(t,a,o)}function ot(t){let a;if(e.multiple===!0)if(t.from!==void 0){const o=he(t.from),h=he(t.to),m=O.value.filter(y=>y.dateHash<o||y.dateHash>h),p=S.value.filter(({from:y,to:x})=>x.dateHash<o||y.dateHash>h);a=m.concat(p).concat(t).map(y=>Re(y))}else{const o=P.value.slice();o.push(Re(t)),a=o}else a=Re(t);Se(a,"add",t)}function it(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const o=Re(t);t.from!==void 0?a=e.modelValue.filter(h=>h.from!==void 0?h.from!==o.from&&h.to!==o.to:!0):a=e.modelValue.filter(h=>h!==o),a.length===0&&(a=null)}Se(a,"remove",t)}function wt(t,a,o){const h=O.value.concat(S.value).map(m=>Re(m,t,a)).filter(m=>m.from!==void 0?m.from.dateHash!==null&&m.to.dateHash!==null:m.dateHash!==null);u("update:modelValue",(e.multiple===!0?h:h[0])||null,o)}function Xt(){if(e.minimal!==!0)return g("div",{class:"q-date__header "+v.value},[g("div",{class:"relative-position"},[g(He,{name:"q-transition--fade"},()=>g("div",{key:"h-yr-"+Ne.value,class:"q-date__header-subtitle q-date__header-link "+(Q.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,..._("vY",{onClick(){Q.value="Years"},onKeyup(t){t.keyCode===13&&(Q.value="Years")}})},[Ne.value]))]),g("div",{class:"q-date__header-title relative-position flex no-wrap"},[g("div",{class:"relative-position col"},[g(He,{name:"q-transition--fade"},()=>g("div",{key:"h-sub"+Ae.value,class:"q-date__header-title-label q-date__header-link "+(Q.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,..._("vC",{onClick(){Q.value="Calendar"},onKeyup(t){t.keyCode===13&&(Q.value="Calendar")}})},[Ae.value]))]),e.todayBtn===!0?g(re,{class:"q-date__header-today self-start",icon:l.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:i.value,onClick:Le}):null])])}function st({label:t,type:a,key:o,dir:h,goTo:m,boundaries:p,cls:y}){return[g("div",{class:"row items-center q-date__arrow"},[g(re,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ce.value[0],tabindex:i.value,disable:p.prev===!1,..._("go-#"+a,{onClick(){m(-1)}})})]),g("div",{class:"relative-position overflow-hidden flex flex-center"+y},[g(He,{name:"q-transition--jump-"+h},()=>g("div",{key:o},[g(re,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:i.value,..._("view#"+a,{onClick:()=>{Q.value=a}})})]))]),g("div",{class:"row items-center q-date__arrow"},[g(re,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ce.value[1],tabindex:i.value,disable:p.next===!1,..._("go+#"+a,{onClick(){m(1)}})})])]}const Wt={Calendar:()=>[g("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[g("div",{class:"q-date__navigation row items-center no-wrap"},st({label:C.value.months[b.value.month-1],type:"Months",key:b.value.month,dir:le.value,goTo:Ge,boundaries:pe.value.month,cls:" col"}).concat(st({label:b.value.year,type:"Years",key:b.value.year,dir:ce.value,goTo:d,boundaries:pe.value.year,cls:""}))),g("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},et.value.map(t=>g("div",{class:"q-date__calendar-item"},[g("div",t)]))),g("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[g(He,{name:"q-transition--slide-"+le.value},()=>g("div",{key:X.value,class:"q-date__calendar-days fit"},Oe.value.map(t=>g("div",{class:t.classes},[t.in===!0?g(re,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:i.value,..._("day#"+t.i,{onClick:()=>{Kt(t.i)},onMouseover:()=>{Jt(t.i)}})},t.event!==!1?()=>g("div",{class:"q-date__event bg-"+t.event}):null):g("div",""+t.i)]))))])])],Months(){const t=b.value.year===z.value.year,a=h=>G.value!==null&&b.value.year===G.value.year&&G.value.month>h||Z.value!==null&&b.value.year===Z.value.year&&Z.value.month<h,o=C.value.monthsShort.map((h,m)=>{const p=b.value.month===m+1;return g("div",{class:"q-date__months-item flex flex-center"},[g(re,{class:t===!0&&z.value.month===m+1?"q-date__today":null,flat:p!==!0,label:h,unelevated:p,color:p===!0?k.value:null,textColor:p===!0?T.value:null,tabindex:i.value,disable:a(m+1),..._("month#"+m,{onClick:()=>{R(m+1)}})})])});return e.yearsInMonthView===!0&&o.unshift(g("div",{class:"row no-wrap full-width"},[st({label:b.value.year,type:"Years",key:b.value.year,dir:ce.value,goTo:d,boundaries:pe.value.year,cls:" col"})])),g("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},o)},Years(){const t=se.value,a=t+ke,o=[],h=m=>G.value!==null&&G.value.year>m||Z.value!==null&&Z.value.year<m;for(let m=t;m<=a;m++){const p=b.value.year===m;o.push(g("div",{class:"q-date__years-item flex flex-center"},[g(re,{key:"yr"+m,class:z.value.year===m?"q-date__today":null,flat:!p,label:m,dense:!0,unelevated:p,color:p===!0?k.value:null,textColor:p===!0?T.value:null,tabindex:i.value,disable:h(m),..._("yr#"+m,{onClick:()=>{w(m)}})})]))}return g("div",{class:"q-date__view q-date__years flex flex-center"},[g("div",{class:"col-auto"},[g(re,{round:!0,dense:!0,flat:!0,icon:Ce.value[0],tabindex:i.value,disable:h(t),..._("y-",{onClick:()=>{se.value-=ke}})})]),g("div",{class:"q-date__years-content col self-stretch row items-center"},o),g("div",{class:"col-auto"},[g(re,{round:!0,dense:!0,flat:!0,icon:Ce.value[1],tabindex:i.value,disable:h(a),..._("y+",{onClick:()=>{se.value+=ke}})})])])}};function Kt(t){const a={...b.value,day:t};if(e.range===!1){V(a,X.value);return}if(E.value===null){const o=Oe.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&o.range!==void 0){it({target:a,from:o.range.from,to:o.range.to});return}if(o.selected===!0){it(a);return}const h=he(a);E.value={init:a,initHash:h,final:a,finalHash:h},u("range-start",H(a))}else{const o=E.value.initHash,h=he(a),m=o<=h?{from:E.value.init,to:a}:{from:a,to:E.value.init};E.value=null,ot(o===h?a:{target:a,...m}),u("range-end",{from:H(m.from),to:H(m.to)})}}function Jt(t){if(E.value!==null){const a={...b.value,day:t};Object.assign(E.value,{final:a,finalHash:he(a)})}}return Object.assign(r,{setToday:Le,setView:rt,offsetCalendar:Be,setCalendarTo:$e,setEditingRange:Ve}),()=>{const t=[g("div",{class:"q-date__content col relative-position"},[g(He,{name:"q-transition--fade"},Wt[Q.value])])],a=aa(n.default);return a!==void 0&&t.push(g("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&j(t,"push"),g("div",{class:$.value,...nt.value},[Xt(),g("div",{ref:N,class:"q-date__main col column",tabindex:-1},t)])}}});const At="q-slider__marker-labels",Oa=e=>({value:e}),La=({marker:e})=>g("div",{key:e.value,style:e.style,class:e.classes},e.label),Ut=[34,37,40,33,39,38],Ba={...Ot,...Ft,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},ja=["pan","update:modelValue","change"];function za({updateValue:e,updatePosition:n,getDragging:u,formAttrs:r}){const{props:l,emit:c,slots:_,proxy:{$q:i}}=Mt(),v=Lt(l,i),D=Bt(r),f=L(!1),M=L(!1),F=L(!1),j=L(!1),N=s(()=>l.vertical===!0?"--v":"--h"),te=s(()=>"-"+(l.switchLabelSide===!0?"switched":"standard")),C=s(()=>l.vertical===!0?l.reverse===!0:l.reverse!==(i.lang.rtl===!0)),ae=s(()=>isNaN(l.innerMin)===!0||l.innerMin<l.min?l.min:l.innerMin),oe=s(()=>isNaN(l.innerMax)===!0||l.innerMax>l.max?l.max:l.innerMax),z=s(()=>l.disable!==!0&&l.readonly!==!0&&ae.value<oe.value),b=s(()=>(String(l.step).trim().split(".")[1]||"").length),Q=s(()=>l.step===0?1:l.step),De=s(()=>z.value===!0?l.tabindex||0:-1),le=s(()=>l.max-l.min),ce=s(()=>oe.value-ae.value),ie=s(()=>G(ae.value)),se=s(()=>G(oe.value)),E=s(()=>l.vertical===!0?C.value===!0?"bottom":"top":C.value===!0?"right":"left"),$=s(()=>l.vertical===!0?"height":"width"),k=s(()=>l.vertical===!0?"width":"height"),T=s(()=>l.vertical===!0?"vertical":"horizontal"),Y=s(()=>{const d={role:"slider","aria-valuemin":ae.value,"aria-valuemax":oe.value,"aria-orientation":T.value,"data-step":l.step};return l.disable===!0?d["aria-disabled"]="true":l.readonly===!0&&(d["aria-readonly"]="true"),d}),P=s(()=>`q-slider q-slider${N.value} q-slider--${f.value===!0?"":"in"}active inline no-wrap `+(l.vertical===!0?"row":"column")+(l.disable===!0?" disabled":" q-slider--enabled"+(z.value===!0?" q-slider--editable":""))+(F.value==="both"?" q-slider--focus":"")+(l.label||l.labelAlways===!0?" q-slider--label":"")+(l.labelAlways===!0?" q-slider--label-always":"")+(v.value===!0?" q-slider--dark":"")+(l.dense===!0?" q-slider--dense q-slider--dense"+N.value:""));function O(d){const w="q-slider__"+d;return`${w} ${w}${N.value} ${w}${N.value}${te.value}`}function S(d){const w="q-slider__"+d;return`${w} ${w}${N.value}`}const U=s(()=>{const d=l.selectionColor||l.color;return"q-slider__selection absolute"+(d!==void 0?` text-${d}`:"")}),me=s(()=>S("markers")+" absolute overflow-hidden"),_e=s(()=>S("track-container")),Ae=s(()=>O("pin")),Ke=s(()=>O("label")),Je=s(()=>O("text-container")),Ne=s(()=>O("marker-labels-container")+(l.markerLabelsClass!==void 0?` ${l.markerLabelsClass}`:"")),Ce=s(()=>"q-slider__track relative-position no-outline"+(l.trackColor!==void 0?` bg-${l.trackColor}`:"")),Ee=s(()=>{const d={[k.value]:l.trackSize};return l.trackImg!==void 0&&(d.backgroundImage=`url(${l.trackImg}) !important`),d}),et=s(()=>"q-slider__inner absolute"+(l.innerTrackColor!==void 0?` bg-${l.innerTrackColor}`:"")),ne=s(()=>{const d={[E.value]:`${100*ie.value}%`,[$.value]:`${100*(se.value-ie.value)}%`};return l.innerTrackImg!==void 0&&(d.backgroundImage=`url(${l.innerTrackImg}) !important`),d});function tt(d){const{min:w,max:R,step:V}=l;let H=w+d*(R-w);if(V>0){const W=(H-w)%V;H+=(Math.abs(W)>=V/2?(W<0?-1:1)*V:0)-W}return b.value>0&&(H=parseFloat(H.toFixed(b.value))),ue(H,ae.value,oe.value)}function G(d){return le.value===0?0:(d-l.min)/le.value}function Z(d,w){const R=ra(d),V=l.vertical===!0?ue((R.top-w.top)/w.height,0,1):ue((R.left-w.left)/w.width,0,1);return ue(C.value===!0?1-V:V,ie.value,se.value)}const pe=s(()=>la(l.markers)===!0?l.markers:Q.value),Me=s(()=>{const d=[],w=pe.value,R=l.max;let V=l.min;do d.push(V),V+=w;while(V<R);return d.push(R),d}),Ye=s(()=>{const d=` ${At}${N.value}-`;return At+`${d}${l.switchMarkerLabelsSide===!0?"switched":"standard"}${d}${C.value===!0?"rtl":"ltr"}`}),de=s(()=>l.markerLabels===!1?null:lt(l.markerLabels).map((d,w)=>({index:w,value:d.value,label:d.label||d.value,classes:Ye.value+(d.classes!==void 0?" "+d.classes:""),style:{...Fe(d.value),...d.style||{}}}))),X=s(()=>({markerList:de.value,markerMap:Oe.value,classes:Ye.value,getStyle:Fe})),at=s(()=>{if(ce.value!==0){const d=100*pe.value/ce.value;return{...ne.value,backgroundSize:l.vertical===!0?`2px ${d}%`:`${d}% 2px`}}return null});function lt(d){if(d===!1)return null;if(d===!0)return Me.value.map(Oa);if(typeof d=="function")return Me.value.map(R=>{const V=d(R);return Xe(V)===!0?{...V,value:R}:{value:R,label:V}});const w=({value:R})=>R>=l.min&&R<=l.max;return Array.isArray(d)===!0?d.map(R=>Xe(R)===!0?R:{value:R}).filter(w):Object.keys(d).map(R=>{const V=d[R],H=Number(R);return Xe(V)===!0?{...V,value:H}:{value:H,label:V}}).filter(w)}function Fe(d){return{[E.value]:`${100*(d-l.min)/le.value}%`}}const Oe=s(()=>{if(l.markerLabels===!1)return null;const d={};return de.value.forEach(w=>{d[w.value]=w}),d});function nt(){if(_["marker-label-group"]!==void 0)return _["marker-label-group"](X.value);const d=_["marker-label"]||La;return de.value.map(w=>d({marker:w,...X.value}))}const Le=s(()=>[[ba,rt,void 0,{[T.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function rt(d){d.isFinal===!0?(j.value!==void 0&&(n(d.evt),d.touch===!0&&e(!0),j.value=void 0,c("pan","end")),f.value=!1,F.value=!1):d.isFirst===!0?(j.value=u(d.evt),n(d.evt),e(),f.value=!0,c("pan","start")):(n(d.evt),e())}function Be(){F.value=!1}function $e(d){n(d,u(d)),e(),M.value=!0,f.value=!0,document.addEventListener("mouseup",Ve,!0)}function Ve(){M.value=!1,f.value=!1,e(!0),Be(),document.removeEventListener("mouseup",Ve,!0)}function je(d){n(d,u(d)),e(!0)}function Ie(d){Ut.includes(d.keyCode)&&e(!0)}function ze(d){if(l.vertical===!0)return null;const w=i.lang.rtl!==l.reverse?1-d:d;return{transform:`translateX(calc(${2*w-1} * ${l.thumbSize} / 2 + ${50-100*w}%))`}}function Qe(d){const w=s(()=>M.value===!1&&(F.value===d.focusValue||F.value==="both")?" q-slider--focus":""),R=s(()=>`q-slider__thumb q-slider__thumb${N.value} q-slider__thumb${N.value}-${C.value===!0?"rtl":"ltr"} absolute non-selectable`+w.value+(d.thumbColor.value!==void 0?` text-${d.thumbColor.value}`:"")),V=s(()=>({width:l.thumbSize,height:l.thumbSize,[E.value]:`${100*d.ratio.value}%`,zIndex:F.value===d.focusValue?2:void 0})),H=s(()=>d.labelColor.value!==void 0?` text-${d.labelColor.value}`:""),W=s(()=>ze(d.ratio.value)),Se=s(()=>"q-slider__text"+(d.labelTextColor.value!==void 0?` text-${d.labelTextColor.value}`:""));return()=>{const fe=[g("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[g("path",{d:l.thumbPath})]),g("div",{class:"q-slider__focus-ring fit"})];return(l.label===!0||l.labelAlways===!0)&&(fe.push(g("div",{class:Ae.value+" absolute fit no-pointer-events"+H.value},[g("div",{class:Ke.value,style:{minWidth:l.thumbSize}},[g("div",{class:Je.value,style:W.value},[g("span",{class:Se.value},d.label.value)])])])),l.name!==void 0&&l.disable!==!0&&D(fe,"push")),g("div",{class:R.value,style:V.value,...d.getNodeData()},fe)}}function Ge(d,w,R,V){const H=[];l.innerTrackColor!=="transparent"&&H.push(g("div",{key:"inner",class:et.value,style:ne.value})),l.selectionColor!=="transparent"&&H.push(g("div",{key:"selection",class:U.value,style:d.value})),l.markers!==!1&&H.push(g("div",{key:"marker",class:me.value,style:at.value})),V(H);const W=[oa("div",{key:"trackC",class:_e.value,tabindex:w.value,...R.value},[g("div",{class:Ce.value,style:Ee.value},H)],"slide",z.value,()=>Le.value)];if(l.markerLabels!==!1){const Se=l.switchMarkerLabelsSide===!0?"unshift":"push";W[Se](g("div",{key:"markerL",class:Ne.value},nt()))}return W}return na(()=>{document.removeEventListener("mouseup",Ve,!0)}),{state:{active:f,focus:F,preventFocus:M,dragging:j,editable:z,classes:P,tabindex:De,attributes:Y,step:Q,decimals:b,trackLen:le,innerMin:ae,innerMinRatio:ie,innerMax:oe,innerMaxRatio:se,positionProp:E,sizeProp:$,isReversed:C},methods:{onActivate:$e,onMobileClick:je,onBlur:Be,onKeyup:Ie,getContent:Ge,getThumbRenderFn:Qe,convertRatioToModel:tt,convertModelToRatio:G,getDraggingRatio:Z}}}const ye={MIN:0,RANGE:1,MAX:2};var Qa=Et({name:"QRange",props:{...Ba,modelValue:{type:Object,default:()=>({min:null,max:null}),validator:e=>"min"in e&&"max"in e},dragRange:Boolean,dragOnlyRange:Boolean,leftLabelColor:String,leftLabelTextColor:String,rightLabelColor:String,rightLabelTextColor:String,leftLabelValue:[String,Number],rightLabelValue:[String,Number],leftThumbColor:String,rightThumbColor:String},emits:ja,setup(e,{emit:n}){const{proxy:{$q:u}}=Mt(),{state:r,methods:l}=za({updateValue:ce,updatePosition:se,getDragging:ie,formAttrs:s(()=>({type:"hidden",name:e.name,value:`${e.modelValue.min}|${e.modelValue.max}`}))}),c=L(null),_=L(0),i=L(0),v=L({min:0,max:0});function D(){v.value.min=e.modelValue.min===null?r.innerMin.value:ue(e.modelValue.min,r.innerMin.value,r.innerMax.value),v.value.max=e.modelValue.max===null?r.innerMax.value:ue(e.modelValue.max,r.innerMin.value,r.innerMax.value)}we(()=>`${e.modelValue.min}|${e.modelValue.max}|${r.innerMin.value}|${r.innerMax.value}`,D),D();const f=s(()=>l.convertModelToRatio(v.value.min)),M=s(()=>l.convertModelToRatio(v.value.max)),F=s(()=>r.active.value===!0?_.value:f.value),j=s(()=>r.active.value===!0?i.value:M.value),N=s(()=>{const $={[r.positionProp.value]:`${100*F.value}%`,[r.sizeProp.value]:`${100*(j.value-F.value)}%`};return e.selectionImg!==void 0&&($.backgroundImage=`url(${e.selectionImg}) !important`),$}),te=s(()=>{if(r.editable.value!==!0)return{};if(u.platform.is.mobile===!0)return{onClick:l.onMobileClick};const $={onMousedown:l.onActivate};return(e.dragRange===!0||e.dragOnlyRange===!0)&&Object.assign($,{onFocus:()=>{r.focus.value="both"},onBlur:l.onBlur,onKeydown:E,onKeyup:l.onKeyup}),$});function C($){return u.platform.is.mobile!==!0&&r.editable.value===!0&&e.dragOnlyRange!==!0?{onFocus:()=>{r.focus.value=$},onBlur:l.onBlur,onKeydown:E,onKeyup:l.onKeyup}:{}}const ae=s(()=>e.dragOnlyRange!==!0?r.tabindex.value:null),oe=s(()=>u.platform.is.mobile!==!0&&(e.dragRange||e.dragOnlyRange===!0)?r.tabindex.value:null),z=L(null),b=s(()=>C("min")),Q=l.getThumbRenderFn({focusValue:"min",getNodeData:()=>({ref:z,key:"tmin",...b.value,tabindex:ae.value}),ratio:F,label:s(()=>e.leftLabelValue!==void 0?e.leftLabelValue:v.value.min),thumbColor:s(()=>e.leftThumbColor||e.thumbColor||e.color),labelColor:s(()=>e.leftLabelColor||e.labelColor),labelTextColor:s(()=>e.leftLabelTextColor||e.labelTextColor)}),De=s(()=>C("max")),le=l.getThumbRenderFn({focusValue:"max",getNodeData:()=>({...De.value,key:"tmax",tabindex:ae.value}),ratio:j,label:s(()=>e.rightLabelValue!==void 0?e.rightLabelValue:v.value.max),thumbColor:s(()=>e.rightThumbColor||e.thumbColor||e.color),labelColor:s(()=>e.rightLabelColor||e.labelColor),labelTextColor:s(()=>e.rightLabelTextColor||e.labelTextColor)});function ce($){(v.value.min!==e.modelValue.min||v.value.max!==e.modelValue.max)&&n("update:modelValue",{...v.value}),$===!0&&n("change",{...v.value})}function ie($){const{left:k,top:T,width:Y,height:P}=c.value.getBoundingClientRect(),O=e.dragOnlyRange===!0?0:e.vertical===!0?z.value.offsetHeight/(2*P):z.value.offsetWidth/(2*Y),S={left:k,top:T,width:Y,height:P,valueMin:v.value.min,valueMax:v.value.max,ratioMin:f.value,ratioMax:M.value},U=l.getDraggingRatio($,S);return e.dragOnlyRange!==!0&&U<S.ratioMin+O?S.type=ye.MIN:e.dragOnlyRange===!0||U<S.ratioMax-O?e.dragRange===!0||e.dragOnlyRange===!0?(S.type=ye.RANGE,Object.assign(S,{offsetRatio:U,offsetModel:l.convertRatioToModel(U),rangeValue:S.valueMax-S.valueMin,rangeRatio:S.ratioMax-S.ratioMin})):S.type=S.ratioMax-U<U-S.ratioMin?ye.MAX:ye.MIN:S.type=ye.MAX,S}function se($,k=r.dragging.value){let T;const Y=l.getDraggingRatio($,k),P=l.convertRatioToModel(Y);switch(k.type){case ye.MIN:Y<=k.ratioMax?(T={minR:Y,maxR:k.ratioMax,min:P,max:k.valueMax},r.focus.value="min"):(T={minR:k.ratioMax,maxR:Y,min:k.valueMax,max:P},r.focus.value="max");break;case ye.MAX:Y>=k.ratioMin?(T={minR:k.ratioMin,maxR:Y,min:k.valueMin,max:P},r.focus.value="max"):(T={minR:Y,maxR:k.ratioMin,min:P,max:k.valueMin},r.focus.value="min");break;case ye.RANGE:const O=Y-k.offsetRatio,S=ue(k.ratioMin+O,0,1-k.rangeRatio),U=P-k.offsetModel,me=ue(k.valueMin+U,e.min,e.max-k.rangeValue);T={minR:S,maxR:S+k.rangeRatio,min:parseFloat(me.toFixed(r.decimals.value)),max:parseFloat((me+k.rangeValue).toFixed(r.decimals.value))},r.focus.value="both";break}v.value=v.value.min===null||v.value.max===null?{min:T.min||e.min,max:T.max||e.max}:{min:T.min,max:T.max},e.snap!==!0||e.step===0?(_.value=T.minR,i.value=T.maxR):(_.value=l.convertModelToRatio(v.value.min),i.value=l.convertModelToRatio(v.value.max))}function E($){if(!Ut.includes($.keyCode))return;ia($);const k=([34,33].includes($.keyCode)?10:1)*r.step.value,T=([34,37,40].includes($.keyCode)?-1:1)*(r.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*k;if(r.focus.value==="both"){const Y=v.value.max-v.value.min,P=ue(parseFloat((v.value.min+T).toFixed(r.decimals.value)),r.innerMin.value,r.innerMax.value-Y);v.value={min:P,max:parseFloat((P+Y).toFixed(r.decimals.value))}}else{if(r.focus.value===!1)return;{const Y=r.focus.value;v.value={...v.value,[Y]:ue(parseFloat((v.value[Y]+T).toFixed(r.decimals.value)),Y==="min"?r.innerMin.value:v.value.min,Y==="max"?r.innerMax.value:v.value.max)}}}ce()}return()=>{const $=l.getContent(N,oe,te,k=>{k.push(Q(),le())});return g("div",{ref:c,class:"q-range "+r.classes.value+(e.modelValue.min===null||e.modelValue.max===null?" q-slider--no-value":""),...r.attributes.value,"aria-valuenow":e.modelValue.min+"|"+e.modelValue.max},$)}}});const Ga=ua({name:"NewReport",computed:{...ca("reports",["trackers","getReports"])},methods:{...Ct("group",["getGroups"]),...Ct("reports",["getTrackers","createReport","retreiveNewReport","setActiveReport"]),generateReport(){if(this.validateFields()){this.submitted=!0;let e=this.date_range.from+" "+this.TIME_RANGE[this.rangeSnap.min].value,n=this.date_range.to+" "+this.TIME_RANGE[this.rangeSnap.max].value,u=this.TIME_RANGE[this.rangeSnap.min].value,r=this.TIME_RANGE[this.rangeSnap.max].value,l=[{title:"Trip report",trackers:this.tracker_list,plugin:{hide_empty_tabs:!0,plugin_id:4,show_seconds:!0,include_summary_sheet_only:!1,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0},time_filter:{from:u.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},from:e,to:n},{title:"Eco-driving report",trackers:this.tracker_list,from:e,to:n,time_filter:{from:u.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:46,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,show_detailed:!0,min_duration_minutes:1,max_speed:this.max_speed,smoothing:!1,graph_type:"mileage"}},{title:"Engine hours report",trackers:this.tracker_list,from:e,to:n,time_filter:{from:u.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:7,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,show_detailed:!0}},{title:"Geofence entry/exit events",trackers:this.tracker_list,from:e,to:n,time_filter:{from:u.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:89,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,min_minutes_in_zone:1}},{title:"Speed violation report",trackers:this.tracker_list,from:e,to:n,time_filter:{from:u.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:27,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,show_detailed:!0,min_duration_minutes:1,max_speed:this.max_speed}},{title:"Car security report",trackers:this.tracker_list,from:e,to:n,time_filter:{from:u.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:15,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,show_detailed:!0,min_duration_minutes:1,max_speed:this.max_speed}},{title:"Fuel report",trackers:this.tracker_list,from:e,to:n,time_filter:{from:u.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:10,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,show_detailed:!0,min_duration_minutes:1,max_speed:this.max_speed,smoothing:!1,graph_type:"mileage"}}];this.createReport(l).catch(c=>{this.$q.notify({message:"Error Creating report",color:"red",icon:"warning"}),console.log(c),this.submitted=!1}).then(c=>{!c||(this.setActiveReport(c),this.retreiveNewReport(c))})}},validateFields(){return this.$refs.max_speed.validate(),this.$refs.max_speed.hasError||this.tracker_list.length==0?(this.tracker_list.length==0&&this.$q.notify({message:"Please Select vehicles and try again.",color:"red",icon:"warning"}),!1):!0},selectTracker(e,n,u){e?this.tracker_list.push(n):(this.tracker_list.splice(this.tracker_list.indexOf(n),1),this.selected_trackers.all=!1,this.selected_trackers[this.groups[this.groups.findIndex(r=>r.id==u)].title]=!1)},selectByGroup(e,n){if(e){let u=this.groups[this.groups.findIndex(r=>r.id==n)];if(u.trackers.length>0)for(let r in u.trackers)this.tracker_list.includes(u.trackers[r].id)||(this.tracker_list.push(u.trackers[r].id),this.selected_trackers[u.trackers[r].label]=!0)}},selectAll(e){if(e)for(let n in this.trackersAvailable)this.tracker_list.includes(this.trackersAvailable[n].id)||(this.tracker_list.push(this.trackersAvailable[n].id),this.selected_trackers[this.trackersAvailable[n].label]=!0)}},data(){let e=da.query().all(),n=[];for(let r in e)e[r].trackers=pt.query().where("group_id",e[r].id).get(),n[e[r].title]=!1;let u=pt.query().all();for(let r in u)n[u[r].label]=!1;return n.all=!1,{groups:e,max_speed:L(null),rangeSnap:L({min:0,max:48}),date_range:L({from:new Date(new Date().setDate(new Date().getDate()-new Date().getDay())).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),TIME_RANGE:va,selected_trackers:n,tracker_list:[],trackersAvailable:u,submitted:!1}},components:{AuthErrors:xa}}),Pa={class:"full-width q-mt-md",align:"right"},Za={class:"row flex reverse"},Ua={class:"col-md-6 q-pa-md col-grow"},Xa={class:"q-pa-md"},Wa={class:"q-pa-md"},Ka={for:""},Ja={class:"q-pa-md"},el=J("label",{for:""},"Max speed (Km/h)",-1),tl={class:"col-md-6 q-pa-md col-grow"},al=J("div",{class:"text-h6"},"Vehicles",-1),ll={class:"row flex flex-center"},nl={class:"col-md-6 col-grow q-pa-md"};function rl(e,n,u,r,l,c){const _=ma("auth-errors");return xe(),Pe(Ma,{class:"full-screen bg-white"},{default:K(()=>[B(_),J("form",{onSubmit:n[6]||(n[6]=ga((...i)=>e.generateReport&&e.generateReport(...i),["prevent"]))},[J("div",Pa,[B(re,{flat:"",onClick:n[0]||(n[0]=i=>this.$router.go(-1)),icon:"keyboard_arrow_left",class:"text-positive",title:"Back"})]),J("div",Za,[J("div",Ua,[J("div",Xa,[B(Fa,{modelValue:e.date_range,"onUpdate:modelValue":n[1]||(n[1]=i=>e.date_range=i),range:"",mask:"YYYY-MM-DD"},null,8,["modelValue"])]),J("div",Wa,[J("label",Ka,"Control time: "+Ze(e.TIME_RANGE[e.rangeSnap.min].label)+" to "+Ze(e.TIME_RANGE[e.rangeSnap.max].label),1),B(Qa,{modelValue:e.rangeSnap,"onUpdate:modelValue":n[2]||(n[2]=i=>e.rangeSnap=i),min:0,max:48,step:1,"left-label-value":e.TIME_RANGE[e.rangeSnap.min].label,"right-label-value":e.TIME_RANGE[e.rangeSnap.max].label,label:"","track-size":"10px",color:"primary"},null,8,["modelValue","left-label-value","right-label-value"])]),J("div",Ja,[el,B(fa,{type:"number",ref:"max_speed",modelValue:e.max_speed,"onUpdate:modelValue":n[3]||(n[3]=i=>e.max_speed=i),class:"full-width",placeholder:"Enter Max Speed","data-cy":"max_speed",rules:[i=>i&&i.length>0||"Please type speed limit"],"lazy-rules":"",outlined:""},null,8,["modelValue","rules"])])]),J("div",tl,[B(ha,{style:{border:"1px solid"}},{default:K(()=>[al,B(_a,{class:"fit-screen-height"},{default:K(()=>[J("div",null,[ct((xe(),Pe(ht,{tag:"label"},{default:K(()=>[B(qe,null,{default:K(()=>[B(gt,null,{default:K(()=>[dt("Select All")]),_:1})]),_:1}),B(qe,{side:"",top:""},{default:K(()=>[B(vt,{modelValue:e.selected_trackers.all,"onUpdate:modelValue":[n[4]||(n[4]=i=>e.selected_trackers.all=i),n[5]||(n[5]=i=>e.selectAll(i))]},null,8,["modelValue"])]),_:1})]),_:1})),[[ft]])]),(xe(!0),mt(Rt,null,St(e.groups,i=>(xe(),mt("div",{key:i.id},[i.trackers.length>0?ct((xe(),Pe(ht,{key:0,tag:"label",style:{"background-color":"rgb(21, 76, 121, 0.5)"}},{default:K(()=>[B(qe,null,{default:K(()=>[B(gt,{class:"text-white"},{default:K(()=>[dt(Ze(i.title),1)]),_:2},1024)]),_:2},1024),B(qe,{side:"",top:""},{default:K(()=>[B(vt,{modelValue:e.selected_trackers[i.title],"onUpdate:modelValue":[v=>e.selected_trackers[i.title]=v,v=>e.selectByGroup(v,i.id)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)),[[ft]]):ya("",!0),(xe(!0),mt(Rt,null,St(i.trackers,v=>ct((xe(),Pe(ht,{tag:"label",key:v.id},{default:K(()=>[B(qe,null,{default:K(()=>[B(gt,null,{default:K(()=>[dt(Ze(v.label),1)]),_:2},1024)]),_:2},1024),B(qe,{side:"",top:""},{default:K(()=>[B(vt,{ref_for:!0,ref:v.label,modelValue:e.selected_trackers[v.label],"onUpdate:modelValue":[D=>e.selected_trackers[v.label]=D,D=>e.selectTracker(D,v.id,i.id)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)),[[ft]])),128))]))),128))]),_:1})]),_:1})])]),J("div",ll,[J("div",nl,[B(re,{class:"full-width bg-primary text-white",label:"Create Report","no-caps":"",type:"submit",loading:e.submitted},null,8,["loading"])])])],32)]),_:1})}var vl=sa(Ga,[["render",rl]]);export{vl as default};
