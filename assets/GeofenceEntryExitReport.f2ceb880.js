import{_,e as h,m as w,ao as g,aN as x,aO as v,o as b,i as k,j as y,n,Q as l,w as C,F as R}from"./index.140c599f.js";import{Q as E}from"./QTable.a5066e68.js";import"./QItem.22bf4ba9.js";import"./position-engine.f4487063.js";import"./format.865294d5.js";const G=[{name:"assetname",label:"Asset Name",field:"assetname"},{name:"date",label:"Date",field:"date"},{name:"zone_name",label:"Geofence",field:"zone_name"},{name:"out_address",label:"Exit",field:"out_address"},{name:"out_time",label:"Exit Time",field:"out_time"},{name:"in_address",label:"Entrance",field:"in_address"},{name:"in_time",label:"Entrance Time",field:"in_time"},{name:"duration",label:"Duration",field:"duration"}],T=h({data(){return{rows:[],columns:G,loading:!0}},computed:{...w("reports",["getReports"])},mounted(){let o=g.findIn(this.getReports.activeReports),a=o[o.findIndex(e=>e.title==="Geofence entry/exit events")];if(a&&a.sheets[0].sections[0].text!="No data"){let e=a.sheets;for(let t in e){let d=e[t].header,i,r,m,c,p,u,f;for(let s in e[t].sections[4].data)i=e[t].sections[4].data[s].header.split(" - ")[0],r=e[t].sections[4].data[s].rows[e[t].sections[4].data[s].rows.length-1].duration.v,m=e[t].sections[4].data[s].rows[e[t].sections[4].data[s].rows.length-1].in_address.v,c=e[t].sections[4].data[s].rows[e[t].sections[4].data[s].rows.length-1].in_time.v,p=e[t].sections[4].data[s].rows[0].out_address.v,u=e[t].sections[4].data[s].rows[0].out_time.v,f=e[t].sections[4].data[s].rows[e[t].sections[4].data[s].rows.length-1].zone_name.v,this.rows.push({assetname:d,date:i,zone_name:f,out_address:p,out_time:u,in_address:m,in_time:c,duration:r})}}this.loading=!1},methods:{exportTable(){x(this.columns,this.rows,"Geofence entry/exit events Report.xlsx")},exportCSV(){v(this.columns,this.rows,"Geofence entry/exit events Report.csv")}}}),$={class:"full-width q-mt-md",align:"right"};function z(o,a,e,t,d,i){return b(),k(R,null,[y("div",$,[n(l,{flat:"",onClick:a[0]||(a[0]=r=>this.$router.push("/home")),icon:"keyboard_arrow_left",class:"text-positive",title:"Back"})]),n(E,{title:"Geofence entry/exit events Report",rows:o.rows,columns:o.columns,"row-key":"asset_name",class:"sticky-column","rows-per-page-options":[10,20,100],loading:o.loading},{"top-right":C(()=>[n(l,{color:"primary","icon-right":"download",label:"xls","no-caps":"",onClick:o.exportTable},null,8,["onClick"]),n(l,{color:"primary","icon-right":"download",label:"csv","no-caps":"",onClick:o.exportCSV,class:"q-mx-sm"},null,8,["onClick"])]),_:1},8,["rows","columns","loading"])],64)}var q=_(T,[["render",z]]);export{q as default};
