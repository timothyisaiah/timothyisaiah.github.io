import{_ as r,e as n,m as i,ao as m,aM as u,aN as c,aO as p,o as d,i as f,j as h,n as l,Q as a,w as g,F as w}from"./index.bd67c83e.js";import{Q as _}from"./QTable.b93f300b.js";import"./QItem.6176c4fe.js";import"./rtl.b51694b1.js";import"./position-engine.02defa19.js";import"./selection.ee301375.js";import"./format.865294d5.js";const v=[{name:"asset_name",label:"Asset Name",field:"asset_name"},{name:"fuel_consumed",label:"Fuel Consumed [ltrs]",field:"fuel_consumed"},{name:"refueling",label:"Refueling",field:"refueling"},{name:"fuel_lost",label:"Fuel Lost (Siphoned) [ltrs]",field:"fuel_lost"},{name:"cost",label:"cost/ltr [Ugx]",field:"cost"}],b=n({data(){return{rows:[],columns:v,loading:!0}},computed:{...i("reports",["getReports"])},async mounted(){let t=m.findIn(this.getReports.activeReports),e=t[t.findIndex(s=>s.title==="Fuel report")];if((e&&e.sheets=="Exceeded Memory Limit"||e.sheets==null)&&await u.report.retreiveReport(e.id).then(s=>{e=s.report}).catch(s=>{e=null}),e&&e.sheets[0].sections[0].text!="No data")if(e.sheets[0].header.toLowerCase()=="summary"){let s=e.sheets[0].sections[0].data[0].rows;for(let o in s)this.rows.push({asset_name:s[o].object.v,fuel_consumed:s[o].consumed.v,refueling:s[o].fillingsVolume.v,fuel_lost:s[o].drainsVolume.v,cost:""})}else{let s=e.sheets[0].sections[2].data[0].rows[0];this.rows.push({asset_name:e.sheets[0].header,fuel_consumed:s.consumed.v,refueling:s.fillingsVolume.v,fuel_lost:s.drainsVolume.v,cost:""})}this.loading=!1},methods:{exportTable(){c(this.columns,this.rows,"Gensets Fuel Report.xlsx")},exportCSV(){p(this.columns,this.rows,"Gensets Fuel Report.csv")}}}),x={class:"full-width q-mt-md",align:"right"};function C(t,e,s,o,k,R){return d(),f(w,null,[h("div",x,[l(a,{flat:"",onClick:e[0]||(e[0]=y=>this.$router.push("/home")),icon:"keyboard_arrow_left",class:"text-positive",title:"Back"})]),l(_,{title:"Fuel Report",rows:t.rows,columns:t.columns,"row-key":"asset_name",class:"sticky-column","rows-per-page-options":[10,20,100],loading:t.loading},{"top-right":g(()=>[l(a,{color:"primary","icon-right":"download",label:"xls","no-caps":"",onClick:t.exportTable},null,8,["onClick"]),l(a,{color:"primary","icon-right":"download",label:"csv","no-caps":"",onClick:t.exportCSV,class:"q-mx-sm"},null,8,["onClick"])]),_:1},8,["rows","columns","loading"])],64)}var G=r(b,[["render",C]]);export{G as default};
