import{_ as p,e as _,m as g,ao as h,o as b,i as v,j as w,n as a,Q as m,w as k,F}from"./index.01574b62.js";import{Q as x}from"./QTable.c8191670.js";import"./QItem.f75844ab.js";import"./position-engine.d9eff954.js";import"./format.865294d5.js";const y=[{name:"asset_name",label:"Asset Name",field:"asset_name"},{name:"mileage",label:"Mileage",field:"mileage"},{name:"fuel_consumed",label:"Fuel Consumed [ltrs]",field:"fuel_consumed"},{name:"consumption",label:"Consumption",field:"consumption"},{name:"refueling",label:"Refueling",field:"refueling"},{name:"fuel_lost",label:"Fuel Lost (Siphoned) [ltrs]",field:"fuel_lost"},{name:"cost",label:"cost/ltr [Ugx]",field:"cost"},{name:"cost_of_fuel_consumed",label:"Cost Of Fuel Consumed [Ugx]",field:"cost_of_fuel_consumed"},{name:"initial_volume",label:"Initial Volume [ltrs]",field:"initial_volume"},{name:"final_volume",label:"Final Volume [ltrs]",field:"final_volume"}],R=_({data(){return{rows:[],columns:y,loading:!0}},computed:{...g("reports",["getReports"])},mounted(){let o=h.findIn(this.getReports.activeReports),t=o[o.findIndex(e=>e.title==="Fuel report")];if(t&&t.sheets[0].sections[0].text!="No data"){let e=t.sheets[0].sections[0].data[0].rows;for(let l in e){let n=e[l].object.v,s=e[l].fillingsVolume.v,i=e[l].consumed.v;(3800*e[l].consumed.raw).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");let u=e[l].drainsVolume.v,r=e[l].mileage_by_gps.v,c=Number(r/e[l].consumed.raw).toFixed(2),d="",f="";this.rows.push({asset_name:n,mileage:r,fuel_consumed:i,consumption:c,refueling:s,fuel_lost:u,cost:"",cost_of_fuel_consumed:"",initial_volume:d,final_volume:f})}}this.loading=!1},methods:{exportTable(){let o=[];for(let n in this.rows){let s=[];for(let i in this.columns)s[this.columns[i].label]=this.rows[n][this.columns[i].field];o.push(s)}let t="Fuel Report.xlsx",e=XLSX.utils.json_to_sheet(o),l=XLSX.utils.book_new();XLSX.utils.book_append_sheet(l,e,"myWorkSheet"),XLSX.writeFile(l,t)}}}),C={class:"full-width q-mt-md",align:"right"};function S(o,t,e,l,n,s){return b(),v(F,null,[w("div",C,[a(m,{flat:"",onClick:t[0]||(t[0]=i=>this.$router.push("/home")),icon:"keyboard_arrow_left",class:"text-positive",title:"Back"})]),a(x,{title:"Fuel Report",rows:o.rows,columns:o.columns,"row-key":"asset_name",class:"sticky-column","rows-per-page-options":[10,20,100],loading:o.loading},{"top-right":k(()=>[a(m,{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:o.exportTable},null,8,["onClick"])]),_:1},8,["rows","columns","loading"])],64)}var Q=p(R,[["render",S]]);export{Q as default};
