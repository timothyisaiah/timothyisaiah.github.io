import{c as te,G as ye,aj as be,I as ke,r as L,b as f,ak as xe,K as Se,al as Te,L as $e,am as we,B as F,C as V,ah as W,ac as z,W as Ce,h as R,an as Pe,g as oe,y as se,a8 as Re,z as _e,A as q,E as Oe,_ as Ee,e as qe,ao as Qe,m as Ae,f as De,p as Le,o as m,k as C,w as d,n as i,j as x,Q as P,i as S,l as Q,v as He,F as Be,q as G,P as K,ap as Ie,t as A,aq as U,ar as Ne}from"./index.adcf3461.js";import{Q as je,c as Me,a as D,b as X}from"./QItem.63cc70ca.js";import{u as Fe,v as Y,a as Ve,p as J,b as We,c as ze,r as Z,s as Ge,d as Ke}from"./position-engine.f7a12acb.js";import{c as ee}from"./selection.e911660f.js";import{Q as Ue}from"./QPage.cb2a8bac.js";import{A as Xe}from"./AuthErrors.02f1081c.js";var Ye=te({name:"QTooltip",inheritAttrs:!1,props:{...Fe,...ye,...be,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Y},self:{type:String,default:"top middle",validator:Y},offset:{type:Array,default:()=>[14,14],validator:Ve},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...ke],setup(e,{slots:o,emit:r,attrs:s}){let a,u;const p=oe(),{proxy:{$q:t}}=p,h=L(null),b=L(!1),_=f(()=>J(e.anchor,t.lang.rtl)),l=f(()=>J(e.self,t.lang.rtl)),v=f(()=>e.persistent!==!0),{registerTick:y,removeTick:w}=xe(),{registerTimeout:c}=Se(),{transition:ae,transitionStyle:re}=Te(e,b),{localScrollTarget:H,changeScrollEvent:ne,unconfigureScrollTarget:le}=We(e,j),{anchorEl:g,canShow:ie,anchorEvents:T}=ze({showing:b,configureAnchorEl:ge}),{show:ue,hide:O}=$e({showing:b,canShow:ie,handleShow:de,handleHide:fe,hideOnRouteChange:v,processOnMount:!0});Object.assign(T,{delayShow:pe,delayHide:he});const{showPortal:B,hidePortal:I,renderPortal:ce}=we(p,h,ve);if(t.platform.is.mobile===!0){const n={anchorEl:g,innerRef:h,onClickOutside(k){return O(k),k.target.classList.contains("q-dialog__backdrop")&&Re(k),!0}},E=f(()=>e.modelValue===null&&e.persistent!==!0&&b.value===!0);F(E,k=>{(k===!0?Ke:Z)(n)}),V(()=>{Z(n)})}function de(n){B(),y(()=>{u=new MutationObserver(()=>$()),u.observe(h.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),$(),j()}),a===void 0&&(a=F(()=>t.screen.width+"|"+t.screen.height+"|"+e.self+"|"+e.anchor+"|"+t.lang.rtl,$)),c(()=>{B(!0),r("show",n)},e.transitionDuration)}function fe(n){w(),I(),N(),c(()=>{I(!0),r("hide",n)},e.transitionDuration)}function N(){u!==void 0&&(u.disconnect(),u=void 0),a!==void 0&&(a(),a=void 0),le(),W(T,"tooltipTemp")}function $(){const n=h.value;g.value===null||!n||Ge({el:n,offset:e.offset,anchorEl:g.value,anchorOrigin:_.value,selfOrigin:l.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function pe(n){if(t.platform.is.mobile===!0){ee(),document.body.classList.add("non-selectable");const E=g.value,k=["touchmove","touchcancel","touchend","click"].map(M=>[E,M,"delayHide","passiveCapture"]);z(T,"tooltipTemp",k)}c(()=>{ue(n)},e.delay)}function he(n){t.platform.is.mobile===!0&&(W(T,"tooltipTemp"),ee(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),c(()=>{O(n)},e.hideDelay)}function ge(){if(e.noParentEvent===!0||g.value===null)return;const n=t.platform.is.mobile===!0?[[g.value,"touchstart","delayShow","passive"]]:[[g.value,"mouseenter","delayShow","passive"],[g.value,"mouseleave","delayHide","passive"]];z(T,"anchor",n)}function j(){if(g.value!==null||e.scrollTarget!==void 0){H.value=Ce(g.value,e.scrollTarget);const n=e.noParentEvent===!0?$:O;ne(H.value,n)}}function me(){return b.value===!0?R("div",{...s,ref:h,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",s.class],style:[s.style,re.value],role:"tooltip"},se(o.default)):null}function ve(){return R(Pe,{name:ae.value,appear:!0},me)}return V(N),Object.assign(p.proxy,{updatePosition:$}),ce}});const Je={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function Ze(){const{props:e,proxy:{$q:o}}=oe(),r=_e(Oe,q);if(r===q)return console.error("QPageSticky needs to be child of QLayout"),q;const s=f(()=>{const l=e.position;return{top:l.indexOf("top")>-1,right:l.indexOf("right")>-1,bottom:l.indexOf("bottom")>-1,left:l.indexOf("left")>-1,vertical:l==="top"||l==="bottom",horizontal:l==="left"||l==="right"}}),a=f(()=>r.header.offset),u=f(()=>r.right.offset),p=f(()=>r.footer.offset),t=f(()=>r.left.offset),h=f(()=>{let l=0,v=0;const y=s.value,w=o.lang.rtl===!0?-1:1;y.top===!0&&a.value!==0?v=`${a.value}px`:y.bottom===!0&&p.value!==0&&(v=`${-p.value}px`),y.left===!0&&t.value!==0?l=`${w*t.value}px`:y.right===!0&&u.value!==0&&(l=`${-w*u.value}px`);const c={transform:`translate(${l}, ${v})`};return e.offset&&(c.margin=`${e.offset[1]}px ${e.offset[0]}px`),y.vertical===!0?(t.value!==0&&(c[o.lang.rtl===!0?"right":"left"]=`${t.value}px`),u.value!==0&&(c[o.lang.rtl===!0?"left":"right"]=`${u.value}px`)):y.horizontal===!0&&(a.value!==0&&(c.top=`${a.value}px`),p.value!==0&&(c.bottom=`${p.value}px`)),c}),b=f(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function _(l){const v=se(l.default);return R("div",{class:b.value,style:h.value},e.expand===!0?v:[R("div",v)])}return{$layout:r,getStickyContent:_}}var et=te({name:"QPageSticky",props:Je,setup(e,{slots:o}){const{getStickyContent:r}=Ze();return()=>r(o)}});const tt=qe({data(){let e=Qe.query().all();var o=[],r=[];let s=0;for(let a in e)a=="0"&&(o[s]=[],r.push(s)),o[s].length==0||!o[s].includes(e[a])&&e[a].id-o[s][o[s].length-1].id<7&&o[s][o[s].length-1].to==e[a].to&&o[s][o[s].length-1].from==e[a].from||(s+=1,o[s]=[],r.push(s)),o[s].push(e[a]);return{reports:o.reverse(),keys:r,dialog:L(null)}},components:{errors:Xe},computed:{...Ae("reports",["getReports"])},methods:{...De("reports",["deleteReports","setActiveReport","refresh","updateReports"]),deleteReport(e){this.dialog=this.$q.dialog({title:"Confirm Delete",message:"This action can not be undone.",persistent:!0,ok:{label:"DELETE",color:"negative"},cancel:!0}).onOk(o=>{this.dialog=this.$q.dialog({title:"Deleting...",message:"0%",progress:!0,persistent:!0,ok:!1}),this.deleteReports(e);const r=setInterval(()=>{this.dialog.update({message:`${this.getReports.deleting}%`}),this.getReports.deleting===100&&(clearInterval(r),this.dialog.update({title:"Done!",message:"Delete completed successfully",progress:!1,ok:!0}).onOk(()=>{this.$router.go(this.$router.currentRoute)}))},500)})},viewReport(e){this.setActiveReport(e),e.length!=2?this.$router.push("/report/fleet-operations-report"):this.$router.push("/genset/engine-hours-report")},reload(){}},mounted(){this.updateReports({pending:!1})}}),ot={class:"text-right q-pa-md"},st={key:0,class:"text-h5 text-primary text-bold q-py-xl q-px-md q-my-xl"},at={key:0,class:"text-red q-px-sm"},rt={key:1,class:"text-green q-px-sm"},nt=x("td",{class:"text-bold"},"From:",-1),lt=x("td",{class:"text-bold"},"To:",-1),it={key:2,class:"flex flex-center text-center",style:{height:"90vh"}};function ut(e,o,r,s,a,u){const p=Le("errors");return m(),C(Ue,{class:"full-screen bg-white"},{default:d(()=>[i(p),x("div",ot,[i(P,{label:"Refresh","no-caps":"",icon:"refresh",class:"text-primary",onClick:e.refresh,loading:e.getReports.pending,disabled:e.getReports.pending,flat:"",unelevated:""},null,8,["onClick","loading","disabled"])]),e.keys.length>0?(m(),S("label",st,"Available Reports")):Q("",!0),e.keys.length>0?(m(),C(je,{key:1,class:"fit-screen-content"},{default:d(()=>[(m(!0),S(Be,null,He(e.keys,t=>(m(),S("div",{key:t},[K((m(),C(Me,{clickable:"",class:"history"},{default:d(()=>[i(D,{avatar:"",onClick:h=>e.viewReport(e.reports[t])},{default:d(()=>[i(Ie,{class:"bg-primary text-white",icon:"list"})]),_:2},1032,["onClick"]),i(D,{onClick:h=>e.viewReport(e.reports[t])},{default:d(()=>[i(X,{lines:"1",class:"text-primary text-bold"},{default:d(()=>[G("Fleet Report "+A(e.reports[t][0].created)+" ",1),e.reports[t].length<7&&e.reports[t].length<2?(m(),S("span",at,"INCOMPLETE ")):Q("",!0),e.reports[t].length==2?(m(),S("span",rt,"GENSETS ")):Q("",!0)]),_:2},1024),i(X,{caption:"",lines:"2"},{default:d(()=>[x("tr",null,[nt,x("td",null,A(e.reports[t][0].from),1)]),x("tr",null,[lt,x("td",null,A(e.reports[t][0].to),1)])]),_:2},1024)]),_:2},1032,["onClick"]),K((m(),C(D,{side:"",clickable:""},{default:d(()=>[i(P,{class:"text-negative",icon:"delete",flat:"",dense:"",round:"",title:"Delete Report",onClick:h=>e.deleteReport(e.reports[t])},null,8,["onClick"])]),_:2},1024)),[[U]])]),_:2},1024)),[[U]]),i(Ne,{inset:"item"})]))),128))]),_:1})):(m(),S("div",it,[i(P,{flat:"",class:"bg-primary text-white",label:"Create Report","no-caps":"",to:"/new-report"})])),i(et,{position:"bottom-right",offset:[18,18]},{default:d(()=>[i(P,{fab:"",icon:"add",color:"primary",to:"/new-report"},{default:d(()=>[i(Ye,{anchor:"top right",offset:[-20,15],"transition-show":"scale","transition-hide":"scale","content-class":"transparent"},{default:d(()=>[G(" Create new report ")]),_:1})]),_:1})]),_:1})]),_:1})}var mt=Ee(tt,[["render",ut]]);export{mt as default};
