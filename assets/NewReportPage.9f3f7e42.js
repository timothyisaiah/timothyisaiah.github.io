import{b as s,at as Et,au as ta,c as Ot,av as Ft,H as Lt,J as Bt,aw as aa,r as F,ax as lt,B as pe,h as g,an as Ae,y as la,g as xt,ay as jt,O as Ct,Q as oe,az as na,C as ra,ah as oa,R as ia,a9 as sa,_ as ua,e as da,m as ca,f as St,aA as ma,aB as Rt,aC as va,p as fa,o as re,k as Ne,w as z,n as I,j as X,t as Ee,aD as qt,P as Xe,q as Ke,aE as We,i as Te,F as yt,v as _t,aF as ha,aG as ga,aq as Je,l as ya}from"./index.dbdc3668.js";import{u as _a}from"./use-cache.b0833c75.js";import{p as q,b as de}from"./format.865294d5.js";import{T as ba}from"./TouchPan.e1024c6a.js";import{Q as Ma,c as et,a as ge,b as tt}from"./QItem.859ef144.js";import{Q as ka}from"./QPage.fb39ebf8.js";import{A as xa}from"./AuthErrors.8af9588e.js";import"./touch.70a9dd44.js";const Me=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function wa(e,n,c){return Object.prototype.toString.call(e)==="[object Date]"&&(c=e.getDate(),n=e.getMonth()+1,e=e.getFullYear()),Sa(wt(e,n,c))}function Tt(e,n,c){return Pt(Ca(e,n,c))}function pa(e){return Da(e)===0}function nt(e,n){return n<=6?31:n<=11||pa(e)?30:29}function Da(e){const n=Me.length;let c=Me[0],r,l,u,b,i;if(e<c||e>=Me[n-1])throw new Error("Invalid Jalaali year "+e);for(i=1;i<n&&(r=Me[i],l=r-c,!(e<r));i+=1)c=r;return b=e-c,l-b<6&&(b=b-l+H(l+4,33)*33),u=ee(ee(b+1,33)-1,4),u===-1&&(u=4),u}function zt(e,n){const c=Me.length,r=e+621;let l=-14,u=Me[0],b,i,m,p,f;if(e<u||e>=Me[c-1])throw new Error("Invalid Jalaali year "+e);for(f=1;f<c&&(b=Me[f],i=b-u,!(e<b));f+=1)l=l+H(i,33)*8+H(ee(i,33),4),u=b;p=e-u,l=l+H(p,33)*8+H(ee(p,33)+3,4),ee(i,33)===4&&i-p===4&&(l+=1);const M=H(r,4)-H((H(r,100)+1)*3,4)-150,L=20+l-M;return n||(i-p<6&&(p=p-i+H(i+4,33)*33),m=ee(ee(p+1,33)-1,4),m===-1&&(m=4)),{leap:m,gy:r,march:L}}function Ca(e,n,c){const r=zt(e,!0);return wt(r.gy,3,r.march)+(n-1)*31-H(n,7)*(n-7)+c-1}function Sa(e){const n=Pt(e).gy;let c=n-621,r,l,u;const b=zt(c,!1),i=wt(n,3,b.march);if(u=e-i,u>=0){if(u<=185)return l=1+H(u,31),r=ee(u,31)+1,{jy:c,jm:l,jd:r};u-=186}else c-=1,u+=179,b.leap===1&&(u+=1);return l=7+H(u,30),r=ee(u,30)+1,{jy:c,jm:l,jd:r}}function wt(e,n,c){let r=H((e+H(n-8,6)+100100)*1461,4)+H(153*ee(n+9,12)+2,5)+c-34840408;return r=r-H(H(e+100100+H(n-8,6),100)*3,4)+752,r}function Pt(e){let n=4*e+139361631;n=n+H(H(4*e+183187720,146097)*3,4)*4-3908;const c=H(ee(n,1461),4)*5+308,r=H(ee(c,153),5)+1,l=ee(H(c,153),12)+1;return{gy:H(n,1461)-100100+H(8-l,6),gm:l,gd:r}}function H(e,n){return~~(e/n)}function ee(e,n){return e-~~(e/n)*n}const Ra=["gregorian","persian"],qa={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Ra.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Ta=["update:modelValue"];function ye(e){return e.year+"/"+q(e.month)+"/"+q(e.day)}function Ya(e,n){const c=s(()=>e.disable!==!0&&e.readonly!==!0),r=s(()=>e.editable===!0?0:-1),l=s(()=>{const i=[];return e.color!==void 0&&i.push(`bg-${e.color}`),e.textColor!==void 0&&i.push(`text-${e.textColor}`),i.join(" ")});function u(){return e.locale!==void 0?{...n.lang.date,...e.locale}:n.lang.date}function b(i){const m=new Date,p=i===!0?null:0;if(e.calendar==="persian"){const f=wa(m);return{year:f.jy,month:f.jm,day:f.jd}}return{year:m.getFullYear(),month:m.getMonth()+1,day:m.getDate(),hour:p,minute:p,second:p,millisecond:p}}return{editable:c,tabindex:r,headerClass:l,getLocale:u,getCurrentDate:b}}const Qt=864e5,Va=36e5,kt=6e4,Gt="YYYY-MM-DDTHH:mm:ss.SSSZ",$a=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Ia=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,bt={};function Ha(e,n){const c="("+n.days.join("|")+")",r=e+c;if(bt[r]!==void 0)return bt[r];const l="("+n.daysShort.join("|")+")",u="("+n.months.join("|")+")",b="("+n.monthsShort.join("|")+")",i={};let m=0;const p=e.replace(Ia,M=>{switch(m++,M){case"YY":return i.YY=m,"(-?\\d{1,2})";case"YYYY":return i.YYYY=m,"(-?\\d{1,4})";case"M":return i.M=m,"(\\d{1,2})";case"MM":return i.M=m,"(\\d{2})";case"MMM":return i.MMM=m,b;case"MMMM":return i.MMMM=m,u;case"D":return i.D=m,"(\\d{1,2})";case"Do":return i.D=m++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return i.D=m,"(\\d{2})";case"H":return i.H=m,"(\\d{1,2})";case"HH":return i.H=m,"(\\d{2})";case"h":return i.h=m,"(\\d{1,2})";case"hh":return i.h=m,"(\\d{2})";case"m":return i.m=m,"(\\d{1,2})";case"mm":return i.m=m,"(\\d{2})";case"s":return i.s=m,"(\\d{1,2})";case"ss":return i.s=m,"(\\d{2})";case"S":return i.S=m,"(\\d{1})";case"SS":return i.S=m,"(\\d{2})";case"SSS":return i.S=m,"(\\d{3})";case"A":return i.A=m,"(AM|PM)";case"a":return i.a=m,"(am|pm)";case"aa":return i.aa=m,"(a\\.m\\.|p\\.m\\.)";case"ddd":return l;case"dddd":return c;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return i.Z=m,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return i.ZZ=m,"(Z|[+-]\\d{2}\\d{2})";case"X":return i.X=m,"(-?\\d+)";case"x":return i.x=m,"(-?\\d{4,})";default:return m--,M[0]==="["&&(M=M.substring(1,M.length-1)),M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),f={map:i,regex:new RegExp("^"+p)};return bt[r]=f,f}function Zt(e,n){return e!==void 0?e:n!==void 0?n.date:ta.date}function Yt(e,n=""){const c=e>0?"-":"+",r=Math.abs(e),l=Math.floor(r/60),u=r%60;return c+q(l)+n+q(u)}function Aa(e,n,c,r,l){const u={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(l!==void 0&&Object.assign(u,l),e==null||e===""||typeof e!="string")return u;n===void 0&&(n=Gt);const b=Zt(c,Et.props),i=b.months,m=b.monthsShort,{regex:p,map:f}=Ha(n,b),M=e.match(p);if(M===null)return u;let L="";if(f.X!==void 0||f.x!==void 0){const j=parseInt(M[f.X!==void 0?f.X:f.x],10);if(isNaN(j)===!0||j<0)return u;const E=new Date(j*(f.X!==void 0?1e3:1));u.year=E.getFullYear(),u.month=E.getMonth()+1,u.day=E.getDate(),u.hour=E.getHours(),u.minute=E.getMinutes(),u.second=E.getSeconds(),u.millisecond=E.getMilliseconds()}else{if(f.YYYY!==void 0)u.year=parseInt(M[f.YYYY],10);else if(f.YY!==void 0){const j=parseInt(M[f.YY],10);u.year=j<0?j:2e3+j}if(f.M!==void 0){if(u.month=parseInt(M[f.M],10),u.month<1||u.month>12)return u}else f.MMM!==void 0?u.month=m.indexOf(M[f.MMM])+1:f.MMMM!==void 0&&(u.month=i.indexOf(M[f.MMMM])+1);if(f.D!==void 0){if(u.day=parseInt(M[f.D],10),u.year===null||u.month===null||u.day<1)return u;const j=r!=="persian"?new Date(u.year,u.month,0).getDate():nt(u.year,u.month);if(u.day>j)return u}f.H!==void 0?u.hour=parseInt(M[f.H],10)%24:f.h!==void 0&&(u.hour=parseInt(M[f.h],10)%12,(f.A&&M[f.A]==="PM"||f.a&&M[f.a]==="pm"||f.aa&&M[f.aa]==="p.m.")&&(u.hour+=12),u.hour=u.hour%24),f.m!==void 0&&(u.minute=parseInt(M[f.m],10)%60),f.s!==void 0&&(u.second=parseInt(M[f.s],10)%60),f.S!==void 0&&(u.millisecond=parseInt(M[f.S],10)*10**(3-M[f.S].length)),(f.Z!==void 0||f.ZZ!==void 0)&&(L=f.Z!==void 0?M[f.Z].replace(":",""):M[f.ZZ],u.timezoneOffset=(L[0]==="+"?-1:1)*(60*L.slice(1,3)+1*L.slice(3,5)))}return u.dateHash=q(u.year,6)+"/"+q(u.month)+"/"+q(u.day),u.timeHash=q(u.hour)+":"+q(u.minute)+":"+q(u.second)+L,u}function Vt(e){const n=new Date(e.getFullYear(),e.getMonth(),e.getDate());n.setDate(n.getDate()-(n.getDay()+6)%7+3);const c=new Date(n.getFullYear(),0,4);c.setDate(c.getDate()-(c.getDay()+6)%7+3);const r=n.getTimezoneOffset()-c.getTimezoneOffset();n.setHours(n.getHours()-r);const l=(n-c)/(Qt*7);return 1+Math.floor(l)}function ve(e,n,c){const r=new Date(e),l=`set${c===!0?"UTC":""}`;switch(n){case"year":case"years":r[`${l}Month`](0);case"month":case"months":r[`${l}Date`](1);case"day":case"days":case"date":r[`${l}Hours`](0);case"hour":case"hours":r[`${l}Minutes`](0);case"minute":case"minutes":r[`${l}Seconds`](0);case"second":case"seconds":r[`${l}Milliseconds`](0)}return r}function at(e,n,c){return(e.getTime()-e.getTimezoneOffset()*kt-(n.getTime()-n.getTimezoneOffset()*kt))/c}function Ut(e,n,c="days"){const r=new Date(e),l=new Date(n);switch(c){case"years":case"year":return r.getFullYear()-l.getFullYear();case"months":case"month":return(r.getFullYear()-l.getFullYear())*12+r.getMonth()-l.getMonth();case"days":case"day":case"date":return at(ve(r,"day"),ve(l,"day"),Qt);case"hours":case"hour":return at(ve(r,"hour"),ve(l,"hour"),Va);case"minutes":case"minute":return at(ve(r,"minute"),ve(l,"minute"),kt);case"seconds":case"second":return at(ve(r,"second"),ve(l,"second"),1e3)}}function $t(e){return Ut(e,ve(e,"year"),"days")+1}function It(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Ht={YY(e,n,c){const r=this.YYYY(e,n,c)%100;return r>=0?q(r):"-"+q(Math.abs(r))},YYYY(e,n,c){return c!=null?c:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return q(e.getMonth()+1)},MMM(e,n){return n.monthsShort[e.getMonth()]},MMMM(e,n){return n.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return It(this.Q(e))},D(e){return e.getDate()},Do(e){return It(e.getDate())},DD(e){return q(e.getDate())},DDD(e){return $t(e)},DDDD(e){return q($t(e),3)},d(e){return e.getDay()},dd(e,n){return this.dddd(e,n).slice(0,2)},ddd(e,n){return n.daysShort[e.getDay()]},dddd(e,n){return n.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Vt(e)},ww(e){return q(Vt(e))},H(e){return e.getHours()},HH(e){return q(e.getHours())},h(e){const n=e.getHours();return n===0?12:n>12?n%12:n},hh(e){return q(this.h(e))},m(e){return e.getMinutes()},mm(e){return q(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return q(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return q(Math.floor(e.getMilliseconds()/10))},SSS(e){return q(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,n,c,r){const l=r==null?e.getTimezoneOffset():r;return Yt(l,":")},ZZ(e,n,c,r){const l=r==null?e.getTimezoneOffset():r;return Yt(l)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Na(e,n,c,r,l){if(e!==0&&!e||e===1/0||e===-1/0)return;const u=new Date(e);if(isNaN(u))return;n===void 0&&(n=Gt);const b=Zt(c,Et.props);return n.replace($a,(i,m)=>i in Ht?Ht[i](u,b,r,l):m===void 0?i:m.split("\\]").join("]"))}const we=20,Ea=["Calendar","Years","Months"],At=e=>Ea.includes(e),Mt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ye=" \u2014 ";function _e(e){return e.year+"/"+q(e.month)}var Oa=Ot({name:"QDate",props:{...qa,...Ft,...Lt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Mt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Mt},navigationMaxYearMonth:{type:String,validator:Mt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:At}},emits:[...Ta,"range-start","range-end","navigation"],setup(e,{slots:n,emit:c}){const{proxy:r}=xt(),{$q:l}=r,u=Bt(e,l),{getCache:b}=_a(),{tabindex:i,headerClass:m,getLocale:p,getCurrentDate:f}=Ya(e,l);let M;const L=aa(e),j=jt(L),E=F(null),te=F(Qe()),D=F(p()),ae=s(()=>Qe()),ie=s(()=>p()),P=s(()=>f()),_=F(Ge(te.value,D.value)),Q=F(e.defaultView),De=l.lang.rtl===!0?"right":"left",le=F(De.value),ce=F(De.value),se=_.value.year,ue=F(se-se%we-(se<0?we:0)),O=F(null),V=s(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(u.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),x=s(()=>e.color||"primary"),T=s(()=>e.textColor||"white"),Y=s(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Z=s(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),B=s(()=>Z.value.filter(t=>typeof t=="string").map(t=>He(t,te.value,D.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),S=s(()=>{const t=a=>He(a,te.value,D.value);return Z.value.filter(a=>lt(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),K=s(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=Tt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),fe=s(()=>e.calendar==="persian"?ye:(t,a,o)=>Na(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?te.value:a,o===void 0?D.value:o,t.year,t.timezoneOffset)),ke=s(()=>B.value.length+S.value.reduce((t,a)=>t+1+Ut(K.value(a.to),K.value(a.from)),0)),Oe=s(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(O.value!==null){const o=O.value.init,h=K.value(o);return D.value.daysShort[h.getDay()]+", "+D.value.monthsShort[o.month-1]+" "+o.day+Ye+"?"}if(ke.value===0)return Ye;if(ke.value>1)return`${ke.value} ${D.value.pluralDay}`;const t=B.value[0],a=K.value(t);return isNaN(a.valueOf())===!0?Ye:D.value.headerTitle!==void 0?D.value.headerTitle(a,t):D.value.daysShort[a.getDay()]+", "+D.value.monthsShort[t.month-1]+" "+t.day}),rt=s(()=>B.value.concat(S.value.map(a=>a.from)).sort((a,o)=>a.year-o.year||a.month-o.month)[0]),ot=s(()=>B.value.concat(S.value.map(a=>a.to)).sort((a,o)=>o.year-a.year||o.month-a.month)[0]),Fe=s(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(ke.value===0)return Ye;if(ke.value>1){const t=rt.value,a=ot.value,o=D.value.monthsShort;return o[t.month-1]+(t.year!==a.year?" "+t.year+Ye+o[a.month-1]+" ":t.month!==a.month?Ye+o[a.month-1]:"")+" "+a.year}return B.value[0].year}),Ce=s(()=>{const t=[l.iconSet.datetime.arrowLeft,l.iconSet.datetime.arrowRight];return l.lang.rtl===!0?t.reverse():t}),Le=s(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):D.value.firstDayOfWeek),it=s(()=>{const t=D.value.daysShort,a=Le.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),ne=s(()=>{const t=_.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():nt(t.year,t.month)}),st=s(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),G=s(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),U=s(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Se=s(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return G.value!==null&&G.value.year>=_.value.year&&(t.year.prev=!1,G.value.year===_.value.year&&G.value.month>=_.value.month&&(t.month.prev=!1)),U.value!==null&&U.value.year<=_.value.year&&(t.year.next=!1,U.value.year===_.value.year&&U.value.month<=_.value.month&&(t.month.next=!1)),t}),xe=s(()=>{const t={};return B.value.forEach(a=>{const o=_e(a);t[o]===void 0&&(t[o]=[]),t[o].push(a.day)}),t}),Ve=s(()=>{const t={};return S.value.forEach(a=>{const o=_e(a.from),h=_e(a.to);if(t[o]===void 0&&(t[o]=[]),t[o].push({from:a.from.day,to:o===h?a.to.day:void 0,range:a}),o<h){let v;const{year:C,month:y}=a.from,k=y<12?{year:C,month:y+1}:{year:C+1,month:1};for(;(v=_e(k))<=h;)t[v]===void 0&&(t[v]=[]),t[v].push({from:void 0,to:v===h?a.to.day:void 0,range:a}),k.month++,k.month>12&&(k.year++,k.month=1)}}),t}),me=s(()=>{if(O.value===null)return;const{init:t,initHash:a,final:o,finalHash:h}=O.value,[v,C]=a<=h?[t,o]:[o,t],y=_e(v),k=_e(C);if(y!==W.value&&k!==W.value)return;const N={};return y===W.value?(N.from=v.day,N.includeFrom=!0):N.from=1,k===W.value?(N.to=C.day,N.includeTo=!0):N.to=ne.value,N}),W=s(()=>_e(_.value)),ut=s(()=>{const t={};if(e.options===void 0){for(let o=1;o<=ne.value;o++)t[o]=!0;return t}const a=typeof e.options=="function"?e.options:o=>e.options.includes(o);for(let o=1;o<=ne.value;o++){const h=W.value+"/"+q(o);t[o]=a(h)}return t}),dt=s(()=>{const t={};if(e.events===void 0)for(let a=1;a<=ne.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:o=>e.events.includes(o);for(let o=1;o<=ne.value;o++){const h=W.value+"/"+q(o);t[o]=a(h)===!0&&st.value(h)}}return t}),Be=s(()=>{let t,a;const{year:o,month:h}=_.value;if(e.calendar!=="persian")t=new Date(o,h-1,1),a=new Date(o,h-1,0).getDate();else{const v=Tt(o,h,1);t=new Date(v.gy,v.gm-1,v.gd);let C=h-1,y=o;C===0&&(C=12,y--),a=nt(y,C)}return{days:t.getDay()-Le.value-1,endDay:a}}),je=s(()=>{const t=[],{days:a,endDay:o}=Be.value,h=a<0?a+7:a;if(h<6)for(let y=o-h;y<=o;y++)t.push({i:y,fill:!0});const v=t.length;for(let y=1;y<=ne.value;y++){const k={i:y,event:dt.value[y],classes:[]};ut.value[y]===!0&&(k.in=!0,k.flat=!0),t.push(k)}if(xe.value[W.value]!==void 0&&xe.value[W.value].forEach(y=>{const k=v+y-1;Object.assign(t[k],{selected:!0,unelevated:!0,flat:!1,color:x.value,textColor:T.value})}),Ve.value[W.value]!==void 0&&Ve.value[W.value].forEach(y=>{if(y.from!==void 0){const k=v+y.from-1,N=v+(y.to||ne.value)-1;for(let gt=k;gt<=N;gt++)Object.assign(t[gt],{range:y.range,unelevated:!0,color:x.value,textColor:T.value});Object.assign(t[k],{rangeFrom:!0,flat:!1}),y.to!==void 0&&Object.assign(t[N],{rangeTo:!0,flat:!1})}else if(y.to!==void 0){const k=v+y.to-1;for(let N=v;N<=k;N++)Object.assign(t[N],{range:y.range,unelevated:!0,color:x.value,textColor:T.value});Object.assign(t[k],{flat:!1,rangeTo:!0})}else{const k=v+ne.value-1;for(let N=v;N<=k;N++)Object.assign(t[N],{range:y.range,unelevated:!0,color:x.value,textColor:T.value})}}),me.value!==void 0){const y=v+me.value.from-1,k=v+me.value.to-1;for(let N=y;N<=k;N++)t[N].color=x.value,t[N].editRange=!0;me.value.includeFrom===!0&&(t[y].editRangeFrom=!0),me.value.includeTo===!0&&(t[k].editRangeTo=!0)}_.value.year===P.value.year&&_.value.month===P.value.month&&(t[v+P.value.day-1].today=!0);const C=t.length%7;if(C>0){const y=7-C;for(let k=1;k<=y;k++)t.push({i:k,fill:!0})}return t.forEach(y=>{let k="q-date__calendar-item ";y.fill===!0?k+="q-date__calendar-item--fill":(k+=`q-date__calendar-item--${y.in===!0?"in":"out"}`,y.range!==void 0&&(k+=` q-date__range${y.rangeTo===!0?"-to":y.rangeFrom===!0?"-from":""}`),y.editRange===!0&&(k+=` q-date__edit-range${y.editRangeFrom===!0?"-from":""}${y.editRangeTo===!0?"-to":""}`),(y.range!==void 0||y.editRange===!0)&&(k+=` text-${y.color}`)),y.classes=k}),t}),ct=s(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});pe(()=>e.modelValue,t=>{if(M===t)M=0;else{const{year:a,month:o}=Ge(te.value,D.value);J(a,o)}}),pe(Q,()=>{E.value!==null&&E.value.focus()}),pe(()=>_.value.year,t=>{c("navigation",{year:t,month:_.value.month})}),pe(()=>_.value.month,t=>{c("navigation",{year:_.value.year,month:t})}),pe(ae,t=>{Dt(t,D.value,"mask"),te.value=t}),pe(ie,t=>{Dt(te.value,t,"locale"),D.value=t});function ze(){const t=P.value,a=xe.value[_e(t)];(a===void 0||a.includes(t.day)===!1)&&vt(t),$e(t.year,t.month)}function mt(t){At(t)===!0&&(Q.value=t)}function Pe(t,a){["month","year"].includes(t)&&(t==="month"?Ue:d)(a===!0?-1:1)}function $e(t,a){Q.value="Calendar",J(t,a)}function Ie(t,a){if(e.range===!1||!t){O.value=null;return}const o=Object.assign({..._.value},t),h=a!==void 0?Object.assign({..._.value},a):o;O.value={init:o,initHash:ye(o),final:h,finalHash:ye(h)},$e(o.year,o.month)}function Qe(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function He(t,a,o){return Aa(t,a,o,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Ge(t,a){const o=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(o.length===0)return Ze();const h=o[o.length-1],v=He(h.from!==void 0?h.from:h,t,a);return v.dateHash===null?Ze():v}function Ze(){let t,a;if(e.defaultYearMonth!==void 0){const o=e.defaultYearMonth.split("/");t=parseInt(o[0],10),a=parseInt(o[1],10)}else{const o=P.value!==void 0?P.value:f();t=o.year,a=o.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+q(a)+"/01"}}function Ue(t){let a=_.value.year,o=Number(_.value.month)+t;o===13?(o=1,a++):o===0&&(o=12,a--),J(a,o),Y.value===!0&&he("month")}function d(t){const a=Number(_.value.year)+t;J(a,_.value.month),Y.value===!0&&he("year")}function w(t){J(t,_.value.month),Q.value=e.defaultView==="Years"?"Months":"Calendar",Y.value===!0&&he("year")}function R(t){J(_.value.year,t),Q.value="Calendar",Y.value===!0&&he("month")}function $(t,a){const o=xe.value[a];(o!==void 0&&o.includes(t.day)===!0?ft:vt)(t)}function A(t){return{year:t.year,month:t.month,day:t.day}}function J(t,a){G.value!==null&&t<=G.value.year&&(t=G.value.year,a<G.value.month&&(a=G.value.month)),U.value!==null&&t>=U.value.year&&(t=U.value.year,a>U.value.month&&(a=U.value.month));const o=t+"/"+q(a)+"/01";o!==_.value.dateHash&&(le.value=_.value.dateHash<o==(l.lang.rtl!==!0)?"left":"right",t!==_.value.year&&(ce.value=le.value),Ct(()=>{ue.value=t-t%we-(t<0?we:0),Object.assign(_.value,{year:t,month:a,day:1,dateHash:o})}))}function Re(t,a,o){const h=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;M=h;const{reason:v,details:C}=pt(a,o);c("update:modelValue",h,v,C)}function he(t){const a=B.value[0]!==void 0&&B.value[0].dateHash!==null?{...B.value[0]}:{..._.value};Ct(()=>{a.year=_.value.year,a.month=_.value.month;const o=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():nt(a.year,a.month);a.day=Math.min(Math.max(1,a.day),o);const h=qe(a);M=h;const{details:v}=pt("",a);c("update:modelValue",h,t,v)})}function pt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...A(a.target),from:A(a.from),to:A(a.to)}}:{reason:`${t}-day`,details:A(a)}}function qe(t,a,o){return t.from!==void 0?{from:fe.value(t.from,a,o),to:fe.value(t.to,a,o)}:fe.value(t,a,o)}function vt(t){let a;if(e.multiple===!0)if(t.from!==void 0){const o=ye(t.from),h=ye(t.to),v=B.value.filter(y=>y.dateHash<o||y.dateHash>h),C=S.value.filter(({from:y,to:k})=>k.dateHash<o||y.dateHash>h);a=v.concat(C).concat(t).map(y=>qe(y))}else{const o=Z.value.slice();o.push(qe(t)),a=o}else a=qe(t);Re(a,"add",t)}function ft(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const o=qe(t);t.from!==void 0?a=e.modelValue.filter(h=>h.from!==void 0?h.from!==o.from&&h.to!==o.to:!0):a=e.modelValue.filter(h=>h!==o),a.length===0&&(a=null)}Re(a,"remove",t)}function Dt(t,a,o){const h=B.value.concat(S.value).map(v=>qe(v,t,a)).filter(v=>v.from!==void 0?v.from.dateHash!==null&&v.to.dateHash!==null:v.dateHash!==null);c("update:modelValue",(e.multiple===!0?h:h[0])||null,o)}function Kt(){if(e.minimal!==!0)return g("div",{class:"q-date__header "+m.value},[g("div",{class:"relative-position"},[g(Ae,{name:"q-transition--fade"},()=>g("div",{key:"h-yr-"+Fe.value,class:"q-date__header-subtitle q-date__header-link "+(Q.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...b("vY",{onClick(){Q.value="Years"},onKeyup(t){t.keyCode===13&&(Q.value="Years")}})},[Fe.value]))]),g("div",{class:"q-date__header-title relative-position flex no-wrap"},[g("div",{class:"relative-position col"},[g(Ae,{name:"q-transition--fade"},()=>g("div",{key:"h-sub"+Oe.value,class:"q-date__header-title-label q-date__header-link "+(Q.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...b("vC",{onClick(){Q.value="Calendar"},onKeyup(t){t.keyCode===13&&(Q.value="Calendar")}})},[Oe.value]))]),e.todayBtn===!0?g(oe,{class:"q-date__header-today self-start",icon:l.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:i.value,onClick:ze}):null])])}function ht({label:t,type:a,key:o,dir:h,goTo:v,boundaries:C,cls:y}){return[g("div",{class:"row items-center q-date__arrow"},[g(oe,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ce.value[0],tabindex:i.value,disable:C.prev===!1,...b("go-#"+a,{onClick(){v(-1)}})})]),g("div",{class:"relative-position overflow-hidden flex flex-center"+y},[g(Ae,{name:"q-transition--jump-"+h},()=>g("div",{key:o},[g(oe,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:i.value,...b("view#"+a,{onClick:()=>{Q.value=a}})})]))]),g("div",{class:"row items-center q-date__arrow"},[g(oe,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ce.value[1],tabindex:i.value,disable:C.next===!1,...b("go+#"+a,{onClick(){v(1)}})})])]}const Wt={Calendar:()=>[g("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[g("div",{class:"q-date__navigation row items-center no-wrap"},ht({label:D.value.months[_.value.month-1],type:"Months",key:_.value.month,dir:le.value,goTo:Ue,boundaries:Se.value.month,cls:" col"}).concat(ht({label:_.value.year,type:"Years",key:_.value.year,dir:ce.value,goTo:d,boundaries:Se.value.year,cls:""}))),g("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},it.value.map(t=>g("div",{class:"q-date__calendar-item"},[g("div",t)]))),g("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[g(Ae,{name:"q-transition--slide-"+le.value},()=>g("div",{key:W.value,class:"q-date__calendar-days fit"},je.value.map(t=>g("div",{class:t.classes},[t.in===!0?g(oe,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:i.value,...b("day#"+t.i,{onClick:()=>{Jt(t.i)},onMouseover:()=>{ea(t.i)}})},t.event!==!1?()=>g("div",{class:"q-date__event bg-"+t.event}):null):g("div",""+t.i)]))))])])],Months(){const t=_.value.year===P.value.year,a=h=>G.value!==null&&_.value.year===G.value.year&&G.value.month>h||U.value!==null&&_.value.year===U.value.year&&U.value.month<h,o=D.value.monthsShort.map((h,v)=>{const C=_.value.month===v+1;return g("div",{class:"q-date__months-item flex flex-center"},[g(oe,{class:t===!0&&P.value.month===v+1?"q-date__today":null,flat:C!==!0,label:h,unelevated:C,color:C===!0?x.value:null,textColor:C===!0?T.value:null,tabindex:i.value,disable:a(v+1),...b("month#"+v,{onClick:()=>{R(v+1)}})})])});return e.yearsInMonthView===!0&&o.unshift(g("div",{class:"row no-wrap full-width"},[ht({label:_.value.year,type:"Years",key:_.value.year,dir:ce.value,goTo:d,boundaries:Se.value.year,cls:" col"})])),g("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},o)},Years(){const t=ue.value,a=t+we,o=[],h=v=>G.value!==null&&G.value.year>v||U.value!==null&&U.value.year<v;for(let v=t;v<=a;v++){const C=_.value.year===v;o.push(g("div",{class:"q-date__years-item flex flex-center"},[g(oe,{key:"yr"+v,class:P.value.year===v?"q-date__today":null,flat:!C,label:v,dense:!0,unelevated:C,color:C===!0?x.value:null,textColor:C===!0?T.value:null,tabindex:i.value,disable:h(v),...b("yr#"+v,{onClick:()=>{w(v)}})})]))}return g("div",{class:"q-date__view q-date__years flex flex-center"},[g("div",{class:"col-auto"},[g(oe,{round:!0,dense:!0,flat:!0,icon:Ce.value[0],tabindex:i.value,disable:h(t),...b("y-",{onClick:()=>{ue.value-=we}})})]),g("div",{class:"q-date__years-content col self-stretch row items-center"},o),g("div",{class:"col-auto"},[g(oe,{round:!0,dense:!0,flat:!0,icon:Ce.value[1],tabindex:i.value,disable:h(a),...b("y+",{onClick:()=>{ue.value+=we}})})])])}};function Jt(t){const a={..._.value,day:t};if(e.range===!1){$(a,W.value);return}if(O.value===null){const o=je.value.find(v=>v.fill!==!0&&v.i===t);if(e.noUnset!==!0&&o.range!==void 0){ft({target:a,from:o.range.from,to:o.range.to});return}if(o.selected===!0){ft(a);return}const h=ye(a);O.value={init:a,initHash:h,final:a,finalHash:h},c("range-start",A(a))}else{const o=O.value.initHash,h=ye(a),v=o<=h?{from:O.value.init,to:a}:{from:a,to:O.value.init};O.value=null,vt(o===h?a:{target:a,...v}),c("range-end",{from:A(v.from),to:A(v.to)})}}function ea(t){if(O.value!==null){const a={..._.value,day:t};Object.assign(O.value,{final:a,finalHash:ye(a)})}}return Object.assign(r,{setToday:ze,setView:mt,offsetCalendar:Pe,setCalendarTo:$e,setEditingRange:Ie}),()=>{const t=[g("div",{class:"q-date__content col relative-position"},[g(Ae,{name:"q-transition--fade"},Wt[Q.value])])],a=la(n.default);return a!==void 0&&t.push(g("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&j(t,"push"),g("div",{class:V.value,...ct.value},[Kt(),g("div",{ref:E,class:"q-date__main col column",tabindex:-1},t)])}}});const Nt="q-slider__marker-labels",Fa=e=>({value:e}),La=({marker:e})=>g("div",{key:e.value,style:e.style,class:e.classes},e.label),Xt=[34,37,40,33,39,38],Ba={...Lt,...Ft,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},ja=["pan","update:modelValue","change"];function za({updateValue:e,updatePosition:n,getDragging:c,formAttrs:r}){const{props:l,emit:u,slots:b,proxy:{$q:i}}=xt(),m=Bt(l,i),p=jt(r),f=F(!1),M=F(!1),L=F(!1),j=F(!1),E=s(()=>l.vertical===!0?"--v":"--h"),te=s(()=>"-"+(l.switchLabelSide===!0?"switched":"standard")),D=s(()=>l.vertical===!0?l.reverse===!0:l.reverse!==(i.lang.rtl===!0)),ae=s(()=>isNaN(l.innerMin)===!0||l.innerMin<l.min?l.min:l.innerMin),ie=s(()=>isNaN(l.innerMax)===!0||l.innerMax>l.max?l.max:l.innerMax),P=s(()=>l.disable!==!0&&l.readonly!==!0&&ae.value<ie.value),_=s(()=>(String(l.step).trim().split(".")[1]||"").length),Q=s(()=>l.step===0?1:l.step),De=s(()=>P.value===!0?l.tabindex||0:-1),le=s(()=>l.max-l.min),ce=s(()=>ie.value-ae.value),se=s(()=>G(ae.value)),ue=s(()=>G(ie.value)),O=s(()=>l.vertical===!0?D.value===!0?"bottom":"top":D.value===!0?"right":"left"),V=s(()=>l.vertical===!0?"height":"width"),x=s(()=>l.vertical===!0?"width":"height"),T=s(()=>l.vertical===!0?"vertical":"horizontal"),Y=s(()=>{const d={role:"slider","aria-valuemin":ae.value,"aria-valuemax":ie.value,"aria-orientation":T.value,"data-step":l.step};return l.disable===!0?d["aria-disabled"]="true":l.readonly===!0&&(d["aria-readonly"]="true"),d}),Z=s(()=>`q-slider q-slider${E.value} q-slider--${f.value===!0?"":"in"}active inline no-wrap `+(l.vertical===!0?"row":"column")+(l.disable===!0?" disabled":" q-slider--enabled"+(P.value===!0?" q-slider--editable":""))+(L.value==="both"?" q-slider--focus":"")+(l.label||l.labelAlways===!0?" q-slider--label":"")+(l.labelAlways===!0?" q-slider--label-always":"")+(m.value===!0?" q-slider--dark":"")+(l.dense===!0?" q-slider--dense q-slider--dense"+E.value:""));function B(d){const w="q-slider__"+d;return`${w} ${w}${E.value} ${w}${E.value}${te.value}`}function S(d){const w="q-slider__"+d;return`${w} ${w}${E.value}`}const K=s(()=>{const d=l.selectionColor||l.color;return"q-slider__selection absolute"+(d!==void 0?` text-${d}`:"")}),fe=s(()=>S("markers")+" absolute overflow-hidden"),ke=s(()=>S("track-container")),Oe=s(()=>B("pin")),rt=s(()=>B("label")),ot=s(()=>B("text-container")),Fe=s(()=>B("marker-labels-container")+(l.markerLabelsClass!==void 0?` ${l.markerLabelsClass}`:"")),Ce=s(()=>"q-slider__track relative-position no-outline"+(l.trackColor!==void 0?` bg-${l.trackColor}`:"")),Le=s(()=>{const d={[x.value]:l.trackSize};return l.trackImg!==void 0&&(d.backgroundImage=`url(${l.trackImg}) !important`),d}),it=s(()=>"q-slider__inner absolute"+(l.innerTrackColor!==void 0?` bg-${l.innerTrackColor}`:"")),ne=s(()=>{const d={[O.value]:`${100*se.value}%`,[V.value]:`${100*(ue.value-se.value)}%`};return l.innerTrackImg!==void 0&&(d.backgroundImage=`url(${l.innerTrackImg}) !important`),d});function st(d){const{min:w,max:R,step:$}=l;let A=w+d*(R-w);if($>0){const J=(A-w)%$;A+=(Math.abs(J)>=$/2?(J<0?-1:1)*$:0)-J}return _.value>0&&(A=parseFloat(A.toFixed(_.value))),de(A,ae.value,ie.value)}function G(d){return le.value===0?0:(d-l.min)/le.value}function U(d,w){const R=oa(d),$=l.vertical===!0?de((R.top-w.top)/w.height,0,1):de((R.left-w.left)/w.width,0,1);return de(D.value===!0?1-$:$,se.value,ue.value)}const Se=s(()=>na(l.markers)===!0?l.markers:Q.value),xe=s(()=>{const d=[],w=Se.value,R=l.max;let $=l.min;do d.push($),$+=w;while($<R);return d.push(R),d}),Ve=s(()=>{const d=` ${Nt}${E.value}-`;return Nt+`${d}${l.switchMarkerLabelsSide===!0?"switched":"standard"}${d}${D.value===!0?"rtl":"ltr"}`}),me=s(()=>l.markerLabels===!1?null:dt(l.markerLabels).map((d,w)=>({index:w,value:d.value,label:d.label||d.value,classes:Ve.value+(d.classes!==void 0?" "+d.classes:""),style:{...Be(d.value),...d.style||{}}}))),W=s(()=>({markerList:me.value,markerMap:je.value,classes:Ve.value,getStyle:Be})),ut=s(()=>{if(ce.value!==0){const d=100*Se.value/ce.value;return{...ne.value,backgroundSize:l.vertical===!0?`2px ${d}%`:`${d}% 2px`}}return null});function dt(d){if(d===!1)return null;if(d===!0)return xe.value.map(Fa);if(typeof d=="function")return xe.value.map(R=>{const $=d(R);return lt($)===!0?{...$,value:R}:{value:R,label:$}});const w=({value:R})=>R>=l.min&&R<=l.max;return Array.isArray(d)===!0?d.map(R=>lt(R)===!0?R:{value:R}).filter(w):Object.keys(d).map(R=>{const $=d[R],A=Number(R);return lt($)===!0?{...$,value:A}:{value:A,label:$}}).filter(w)}function Be(d){return{[O.value]:`${100*(d-l.min)/le.value}%`}}const je=s(()=>{if(l.markerLabels===!1)return null;const d={};return me.value.forEach(w=>{d[w.value]=w}),d});function ct(){if(b["marker-label-group"]!==void 0)return b["marker-label-group"](W.value);const d=b["marker-label"]||La;return me.value.map(w=>d({marker:w,...W.value}))}const ze=s(()=>[[ba,mt,void 0,{[T.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function mt(d){d.isFinal===!0?(j.value!==void 0&&(n(d.evt),d.touch===!0&&e(!0),j.value=void 0,u("pan","end")),f.value=!1,L.value=!1):d.isFirst===!0?(j.value=c(d.evt),n(d.evt),e(),f.value=!0,u("pan","start")):(n(d.evt),e())}function Pe(){L.value=!1}function $e(d){n(d,c(d)),e(),M.value=!0,f.value=!0,document.addEventListener("mouseup",Ie,!0)}function Ie(){M.value=!1,f.value=!1,e(!0),Pe(),document.removeEventListener("mouseup",Ie,!0)}function Qe(d){n(d,c(d)),e(!0)}function He(d){Xt.includes(d.keyCode)&&e(!0)}function Ge(d){if(l.vertical===!0)return null;const w=i.lang.rtl!==l.reverse?1-d:d;return{transform:`translateX(calc(${2*w-1} * ${l.thumbSize} / 2 + ${50-100*w}%))`}}function Ze(d){const w=s(()=>M.value===!1&&(L.value===d.focusValue||L.value==="both")?" q-slider--focus":""),R=s(()=>`q-slider__thumb q-slider__thumb${E.value} q-slider__thumb${E.value}-${D.value===!0?"rtl":"ltr"} absolute non-selectable`+w.value+(d.thumbColor.value!==void 0?` text-${d.thumbColor.value}`:"")),$=s(()=>({width:l.thumbSize,height:l.thumbSize,[O.value]:`${100*d.ratio.value}%`,zIndex:L.value===d.focusValue?2:void 0})),A=s(()=>d.labelColor.value!==void 0?` text-${d.labelColor.value}`:""),J=s(()=>Ge(d.ratio.value)),Re=s(()=>"q-slider__text"+(d.labelTextColor.value!==void 0?` text-${d.labelTextColor.value}`:""));return()=>{const he=[g("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[g("path",{d:l.thumbPath})]),g("div",{class:"q-slider__focus-ring fit"})];return(l.label===!0||l.labelAlways===!0)&&(he.push(g("div",{class:Oe.value+" absolute fit no-pointer-events"+A.value},[g("div",{class:rt.value,style:{minWidth:l.thumbSize}},[g("div",{class:ot.value,style:J.value},[g("span",{class:Re.value},d.label.value)])])])),l.name!==void 0&&l.disable!==!0&&p(he,"push")),g("div",{class:R.value,style:$.value,...d.getNodeData()},he)}}function Ue(d,w,R,$){const A=[];l.innerTrackColor!=="transparent"&&A.push(g("div",{key:"inner",class:it.value,style:ne.value})),l.selectionColor!=="transparent"&&A.push(g("div",{key:"selection",class:K.value,style:d.value})),l.markers!==!1&&A.push(g("div",{key:"marker",class:fe.value,style:ut.value})),$(A);const J=[ia("div",{key:"trackC",class:ke.value,tabindex:w.value,...R.value},[g("div",{class:Ce.value,style:Le.value},A)],"slide",P.value,()=>ze.value)];if(l.markerLabels!==!1){const Re=l.switchMarkerLabelsSide===!0?"unshift":"push";J[Re](g("div",{key:"markerL",class:Fe.value},ct()))}return J}return ra(()=>{document.removeEventListener("mouseup",Ie,!0)}),{state:{active:f,focus:L,preventFocus:M,dragging:j,editable:P,classes:Z,tabindex:De,attributes:Y,step:Q,decimals:_,trackLen:le,innerMin:ae,innerMinRatio:se,innerMax:ie,innerMaxRatio:ue,positionProp:O,sizeProp:V,isReversed:D},methods:{onActivate:$e,onMobileClick:Qe,onBlur:Pe,onKeyup:He,getContent:Ue,getThumbRenderFn:Ze,convertRatioToModel:st,convertModelToRatio:G,getDraggingRatio:U}}}const be={MIN:0,RANGE:1,MAX:2};var Pa=Ot({name:"QRange",props:{...Ba,modelValue:{type:Object,default:()=>({min:null,max:null}),validator:e=>"min"in e&&"max"in e},dragRange:Boolean,dragOnlyRange:Boolean,leftLabelColor:String,leftLabelTextColor:String,rightLabelColor:String,rightLabelTextColor:String,leftLabelValue:[String,Number],rightLabelValue:[String,Number],leftThumbColor:String,rightThumbColor:String},emits:ja,setup(e,{emit:n}){const{proxy:{$q:c}}=xt(),{state:r,methods:l}=za({updateValue:ce,updatePosition:ue,getDragging:se,formAttrs:s(()=>({type:"hidden",name:e.name,value:`${e.modelValue.min}|${e.modelValue.max}`}))}),u=F(null),b=F(0),i=F(0),m=F({min:0,max:0});function p(){m.value.min=e.modelValue.min===null?r.innerMin.value:de(e.modelValue.min,r.innerMin.value,r.innerMax.value),m.value.max=e.modelValue.max===null?r.innerMax.value:de(e.modelValue.max,r.innerMin.value,r.innerMax.value)}pe(()=>`${e.modelValue.min}|${e.modelValue.max}|${r.innerMin.value}|${r.innerMax.value}`,p),p();const f=s(()=>l.convertModelToRatio(m.value.min)),M=s(()=>l.convertModelToRatio(m.value.max)),L=s(()=>r.active.value===!0?b.value:f.value),j=s(()=>r.active.value===!0?i.value:M.value),E=s(()=>{const V={[r.positionProp.value]:`${100*L.value}%`,[r.sizeProp.value]:`${100*(j.value-L.value)}%`};return e.selectionImg!==void 0&&(V.backgroundImage=`url(${e.selectionImg}) !important`),V}),te=s(()=>{if(r.editable.value!==!0)return{};if(c.platform.is.mobile===!0)return{onClick:l.onMobileClick};const V={onMousedown:l.onActivate};return(e.dragRange===!0||e.dragOnlyRange===!0)&&Object.assign(V,{onFocus:()=>{r.focus.value="both"},onBlur:l.onBlur,onKeydown:O,onKeyup:l.onKeyup}),V});function D(V){return c.platform.is.mobile!==!0&&r.editable.value===!0&&e.dragOnlyRange!==!0?{onFocus:()=>{r.focus.value=V},onBlur:l.onBlur,onKeydown:O,onKeyup:l.onKeyup}:{}}const ae=s(()=>e.dragOnlyRange!==!0?r.tabindex.value:null),ie=s(()=>c.platform.is.mobile!==!0&&(e.dragRange||e.dragOnlyRange===!0)?r.tabindex.value:null),P=F(null),_=s(()=>D("min")),Q=l.getThumbRenderFn({focusValue:"min",getNodeData:()=>({ref:P,key:"tmin",..._.value,tabindex:ae.value}),ratio:L,label:s(()=>e.leftLabelValue!==void 0?e.leftLabelValue:m.value.min),thumbColor:s(()=>e.leftThumbColor||e.thumbColor||e.color),labelColor:s(()=>e.leftLabelColor||e.labelColor),labelTextColor:s(()=>e.leftLabelTextColor||e.labelTextColor)}),De=s(()=>D("max")),le=l.getThumbRenderFn({focusValue:"max",getNodeData:()=>({...De.value,key:"tmax",tabindex:ae.value}),ratio:j,label:s(()=>e.rightLabelValue!==void 0?e.rightLabelValue:m.value.max),thumbColor:s(()=>e.rightThumbColor||e.thumbColor||e.color),labelColor:s(()=>e.rightLabelColor||e.labelColor),labelTextColor:s(()=>e.rightLabelTextColor||e.labelTextColor)});function ce(V){(m.value.min!==e.modelValue.min||m.value.max!==e.modelValue.max)&&n("update:modelValue",{...m.value}),V===!0&&n("change",{...m.value})}function se(V){const{left:x,top:T,width:Y,height:Z}=u.value.getBoundingClientRect(),B=e.dragOnlyRange===!0?0:e.vertical===!0?P.value.offsetHeight/(2*Z):P.value.offsetWidth/(2*Y),S={left:x,top:T,width:Y,height:Z,valueMin:m.value.min,valueMax:m.value.max,ratioMin:f.value,ratioMax:M.value},K=l.getDraggingRatio(V,S);return e.dragOnlyRange!==!0&&K<S.ratioMin+B?S.type=be.MIN:e.dragOnlyRange===!0||K<S.ratioMax-B?e.dragRange===!0||e.dragOnlyRange===!0?(S.type=be.RANGE,Object.assign(S,{offsetRatio:K,offsetModel:l.convertRatioToModel(K),rangeValue:S.valueMax-S.valueMin,rangeRatio:S.ratioMax-S.ratioMin})):S.type=S.ratioMax-K<K-S.ratioMin?be.MAX:be.MIN:S.type=be.MAX,S}function ue(V,x=r.dragging.value){let T;const Y=l.getDraggingRatio(V,x),Z=l.convertRatioToModel(Y);switch(x.type){case be.MIN:Y<=x.ratioMax?(T={minR:Y,maxR:x.ratioMax,min:Z,max:x.valueMax},r.focus.value="min"):(T={minR:x.ratioMax,maxR:Y,min:x.valueMax,max:Z},r.focus.value="max");break;case be.MAX:Y>=x.ratioMin?(T={minR:x.ratioMin,maxR:Y,min:x.valueMin,max:Z},r.focus.value="max"):(T={minR:Y,maxR:x.ratioMin,min:Z,max:x.valueMin},r.focus.value="min");break;case be.RANGE:const B=Y-x.offsetRatio,S=de(x.ratioMin+B,0,1-x.rangeRatio),K=Z-x.offsetModel,fe=de(x.valueMin+K,e.min,e.max-x.rangeValue);T={minR:S,maxR:S+x.rangeRatio,min:parseFloat(fe.toFixed(r.decimals.value)),max:parseFloat((fe+x.rangeValue).toFixed(r.decimals.value))},r.focus.value="both";break}m.value=m.value.min===null||m.value.max===null?{min:T.min||e.min,max:T.max||e.max}:{min:T.min,max:T.max},e.snap!==!0||e.step===0?(b.value=T.minR,i.value=T.maxR):(b.value=l.convertModelToRatio(m.value.min),i.value=l.convertModelToRatio(m.value.max))}function O(V){if(!Xt.includes(V.keyCode))return;sa(V);const x=([34,33].includes(V.keyCode)?10:1)*r.step.value,T=([34,37,40].includes(V.keyCode)?-1:1)*(r.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*x;if(r.focus.value==="both"){const Y=m.value.max-m.value.min,Z=de(parseFloat((m.value.min+T).toFixed(r.decimals.value)),r.innerMin.value,r.innerMax.value-Y);m.value={min:Z,max:parseFloat((Z+Y).toFixed(r.decimals.value))}}else{if(r.focus.value===!1)return;{const Y=r.focus.value;m.value={...m.value,[Y]:de(parseFloat((m.value[Y]+T).toFixed(r.decimals.value)),Y==="min"?r.innerMin.value:m.value.min,Y==="max"?r.innerMax.value:m.value.max)}}}ce()}return()=>{const V=l.getContent(E,ie,te,x=>{x.push(Q(),le())});return g("div",{ref:u,class:"q-range "+r.classes.value+(e.modelValue.min===null||e.modelValue.max===null?" q-slider--no-value":""),...r.attributes.value,"aria-valuenow":e.modelValue.min+"|"+e.modelValue.max},V)}}});const Qa=da({name:"NewReport",computed:{...ca("reports",["trackers","getReports"])},methods:{...St("group",["getGroups"]),...St("reports",["getTrackers","createReport","retreiveNewReport","setActiveReport"]),generateReport(){if(this.validateFields()){if(this.submitted=!0,!this.date_range.to||!this.date_range.from){let u=this.date_range,b=u;this.date_range=[],this.date_range.to=u,this.date_range.from=b}let e=this.date_range.from+" "+this.TIME_RANGE[this.rangeSnap.min].value,n=this.date_range.to+" "+this.TIME_RANGE[this.rangeSnap.max].value,c=this.TIME_RANGE[this.rangeSnap.min].value,r=this.TIME_RANGE[this.rangeSnap.max].value,l=[{title:"Trip report",trackers:this.tracker_list,plugin:{hide_empty_tabs:!0,plugin_id:4,show_seconds:!0,include_summary_sheet_only:!1,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0},time_filter:{from:c.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},from:e,to:n},{title:"Eco-driving report",trackers:this.tracker_list,from:e,to:n,time_filter:{from:c.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:46,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,show_detailed:!0,min_duration_minutes:this.min_duration_minutes,max_speed:this.max_speed,smoothing:!1,graph_type:"mileage"}},{title:"Engine hours report",trackers:this.tracker_list,from:e,to:n,time_filter:{from:c.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:7,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,show_detailed:!0}},{title:"Geofence entry/exit events",trackers:this.tracker_list,from:e,to:n,time_filter:{from:c.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:89,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,min_minutes_in_zone:1}},{title:"Speed violation report",trackers:this.tracker_list,from:e,to:n,time_filter:{from:c.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:27,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,show_detailed:!0,min_duration_minutes:this.min_duration_minutes,max_speed:this.max_speed}},{title:"Car security report",trackers:this.tracker_list,from:e,to:n,time_filter:{from:c.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:15,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,show_detailed:!0,min_duration_minutes:this.min_duration_minutes,max_speed:this.max_speed}},{title:"Fuel report",trackers:this.tracker_list,from:e,to:n,time_filter:{from:c.trim(),to:r.trim(),weekdays:[1,2,3,4,5,6,7]},plugin:{hide_empty_tabs:!0,plugin_id:10,show_seconds:!0,include_summary_sheet_only:!0,split:!0,show_idle_duration:!0,show_coordinates:!1,filter:!0,group_by_driver:!0,show_detailed:!0,min_duration_minutes:this.min_duration_minutes,max_speed:this.max_speed,smoothing:!1,graph_type:"mileage"}}];this.createReport(l).catch(u=>{this.$q.notify({message:"Error Creating report",color:"red",icon:"warning"}),console.log(u),this.submitted=!1}).then(u=>{!u||(this.setActiveReport(u),this.retreiveNewReport(u))})}},validateFields(){return this.$refs.max_speed.validate(),this.$refs.min_duration_minutes.validate(),this.$refs.max_speed.hasError||this.$refs.min_duration_minutes.hasError||this.tracker_list.length==0||!this.date_range?(this.tracker_list.length==0&&this.$q.notify({message:"Please Select vehicles and try again.",color:"red",icon:"warning"}),this.date_range||this.$q.notify({message:"Please Select date range and try again.",color:"red",icon:"warning"}),!1):!0},selectTracker(e,n,c){e?this.tracker_list.push(n):(this.tracker_list.splice(this.tracker_list.indexOf(n),1),this.selected_trackers.all=!1,this.selected_trackers[this.groups[this.groups.findIndex(r=>r.id==c)].title]=!1)},selectByGroup(e,n){if(e){let c=this.groups[this.groups.findIndex(r=>r.id==n)];if(c.trackers.length>0)for(let r in c.trackers)this.tracker_list.includes(c.trackers[r].id)||(this.tracker_list.push(c.trackers[r].id),this.selected_trackers[c.trackers[r].label]=!0)}},selectAll(e){if(e)for(let n in this.trackersAvailable)this.tracker_list.includes(this.trackersAvailable[n].id)||(this.tracker_list.push(this.trackersAvailable[n].id),this.selected_trackers[this.trackersAvailable[n].label]=!0)}},data(){let e=ma.query().all(),n=[];for(let r in e)e[r].trackers=Rt.query().where("group_id",e[r].id).get(),n[e[r].title]=!1;let c=Rt.query().all();for(let r in c)n[c[r].label]=!1;return n.all=!1,{groups:e,max_speed:F(null),min_duration_minutes:F(null),rangeSnap:F({min:0,max:48}),date_range:F({from:new Date(new Date().setDate(new Date().getDate()-new Date().getDay())).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),TIME_RANGE:va,selected_trackers:n,tracker_list:[],trackersAvailable:c,submitted:!1}},components:{AuthErrors:xa}}),Ga={class:"full-width q-mt-md",align:"right"},Za={class:"row flex reverse"},Ua={class:"col-md-6 q-pa-md col-grow"},Xa={class:"q-pa-md"},Ka={class:"q-pa-md"},Wa={for:""},Ja={class:"q-pa-md"},el=X("label",{for:""},"Max speed (Km/h)",-1),tl={class:"q-pa-md"},al=X("label",{for:""},"Minimum Speed duration (minutes)",-1),ll={class:"col-md-6 q-pa-md col-grow"},nl=X("div",{class:"text-h6"},"Vehicles",-1),rl={key:0},ol={key:1},il={class:"row flex flex-center"},sl={class:"col-md-6 col-grow q-pa-md"};function ul(e,n,c,r,l,u){const b=fa("auth-errors");return re(),Ne(ka,{class:"full-screen bg-white"},{default:z(()=>[I(b),X("form",{onSubmit:n[7]||(n[7]=ga((...i)=>e.generateReport&&e.generateReport(...i),["prevent"]))},[X("div",Ga,[I(oe,{flat:"",onClick:n[0]||(n[0]=i=>this.$router.go(-1)),icon:"keyboard_arrow_left",class:"text-positive",title:"Back"})]),X("div",Za,[X("div",Ua,[X("div",Xa,[I(Oa,{modelValue:e.date_range,"onUpdate:modelValue":n[1]||(n[1]=i=>e.date_range=i),range:"",mask:"YYYY-MM-DD"},null,8,["modelValue"])]),X("div",Ka,[X("label",Wa,"Control time: "+Ee(e.TIME_RANGE[e.rangeSnap.min].label)+" to "+Ee(e.TIME_RANGE[e.rangeSnap.max].label),1),I(Pa,{modelValue:e.rangeSnap,"onUpdate:modelValue":n[2]||(n[2]=i=>e.rangeSnap=i),min:0,max:48,step:1,"left-label-value":e.TIME_RANGE[e.rangeSnap.min].label,"right-label-value":e.TIME_RANGE[e.rangeSnap.max].label,label:"","track-size":"10px",color:"primary"},null,8,["modelValue","left-label-value","right-label-value"])]),X("div",Ja,[el,I(qt,{type:"number",ref:"max_speed",modelValue:e.max_speed,"onUpdate:modelValue":n[3]||(n[3]=i=>e.max_speed=i),class:"full-width",placeholder:"Enter Max Speed","data-cy":"max_speed",rules:[i=>i&&i.length>0||"Please type speed limit"],"lazy-rules":"",outlined:""},null,8,["modelValue","rules"])]),X("div",tl,[al,I(qt,{type:"number",ref:"min_duration_minutes",modelValue:e.min_duration_minutes,"onUpdate:modelValue":n[4]||(n[4]=i=>e.min_duration_minutes=i),class:"full-width",placeholder:"Enter Min Speed speed duration","data-cy":"min_duration_minutes",rules:[i=>i&&i.length>0||"Please type Minimum Speed duration",i=>i>0&&i<11||"Min 1, Max 10"],"lazy-rules":"",outlined:""},null,8,["modelValue","rules"])])]),X("div",ll,[I(ha,{style:{border:"1px solid"}},{default:z(()=>[nl,I(Ma,{class:"fit-screen-height"},{default:z(()=>[X("div",null,[Xe((re(),Ne(et,{tag:"label"},{default:z(()=>[I(ge,null,{default:z(()=>[I(tt,null,{default:z(()=>[Ke("Select All")]),_:1})]),_:1}),I(ge,{side:"",top:""},{default:z(()=>[I(We,{modelValue:e.selected_trackers.all,"onUpdate:modelValue":[n[5]||(n[5]=i=>e.selected_trackers.all=i),n[6]||(n[6]=i=>e.selectAll(i))]},null,8,["modelValue"])]),_:1})]),_:1})),[[Je]])]),e.groups.length>0?(re(),Te("div",rl,[(re(!0),Te(yt,null,_t(e.groups,i=>(re(),Te("div",{key:i.id},[i.trackers.length>0?Xe((re(),Ne(et,{key:0,tag:"label",style:{"background-color":"rgb(21, 76, 121, 0.5)"}},{default:z(()=>[I(ge,null,{default:z(()=>[I(tt,{class:"text-white"},{default:z(()=>[Ke(Ee(i.title),1)]),_:2},1024)]),_:2},1024),I(ge,{side:"",top:""},{default:z(()=>[I(We,{modelValue:e.selected_trackers[i.title],"onUpdate:modelValue":[m=>e.selected_trackers[i.title]=m,m=>e.selectByGroup(m,i.id)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)),[[Je]]):ya("",!0),(re(!0),Te(yt,null,_t(i.trackers,m=>Xe((re(),Ne(et,{tag:"label",key:m.id},{default:z(()=>[I(ge,null,{default:z(()=>[I(tt,null,{default:z(()=>[Ke(Ee(m.label),1)]),_:2},1024)]),_:2},1024),I(ge,{side:"",top:""},{default:z(()=>[I(We,{ref_for:!0,ref:m.label,modelValue:e.selected_trackers[m.label],"onUpdate:modelValue":[p=>e.selected_trackers[m.label]=p,p=>e.selectTracker(p,m.id,i.id)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)),[[Je]])),128))]))),128))])):(re(),Te("div",ol,[(re(!0),Te(yt,null,_t(e.trackersAvailable,i=>Xe((re(),Ne(et,{tag:"label",key:i.id},{default:z(()=>[I(ge,null,{default:z(()=>[I(tt,null,{default:z(()=>[Ke(Ee(i.label),1)]),_:2},1024)]),_:2},1024),I(ge,{side:"",top:""},{default:z(()=>[I(We,{ref_for:!0,ref:i.label,modelValue:e.selected_trackers[i.label],"onUpdate:modelValue":[m=>e.selected_trackers[i.label]=m,m=>e.selectTracker(m,i.id,e.group.id)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)),[[Je]])),128))]))]),_:1})]),_:1})])]),X("div",il,[X("div",sl,[I(oe,{class:"full-width bg-primary text-white",label:"Create Report","no-caps":"",type:"submit",loading:e.submitted,disabled:e.submitted},null,8,["loading","disabled"])])])],32)]),_:1})}var _l=ua(Qa,[["render",ul]]);export{_l as default};
