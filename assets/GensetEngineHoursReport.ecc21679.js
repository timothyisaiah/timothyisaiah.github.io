import{_ as r,e as l,m,ao as d,bn as p,aN as c,aO as u,o as _,i as v,j as g,n as a,Q as s,w as f,F as h}from"./index.aa0f7823.js";import{Q as b}from"./QTable.5554cf13.js";import"./QItem.02e5e39a.js";import"./rtl.b51694b1.js";import"./position-engine.061c6729.js";import"./selection.d4eb8891.js";import"./format.865294d5.js";const w=[{name:"asset_name",label:"Asset Name",field:"asset_name"},{name:"duration",label:"Engine hours",field:"duration"},{name:"asset_utilization",label:"Asset Utilization",field:"asset_utilization"},{name:"idle",label:"Idling",field:"idle"},{name:"in_movement",label:"In Movement",field:"in_movement"},{name:"period_count",label:"Intervals",field:"period_count"},{name:"avg_period",label:"Average Interval",field:"avg_period"},{name:"percent_idle",label:"Percentage Idle",field:"percent_idle"},{name:"percent_in_movement",label:"Percentage in Movement",field:"percent_in_movement"}],x=l({data(){return{rows:[],columns:w,loading:!0}},computed:{...m("reports",["getReports"])},mounted(){let o=d.findIn(this.getReports.activeReports),n=o[o.findIndex(i=>i.title==="Engine hours report")];if(n&&n.sheets[0].sections[0].text!="No data"){let i=p(n.from,n.to,"days"),e=n.sheets[0].sections[0].data[0].rows;for(let t in e)this.rows.push({asset_name:e[t].tracker.v,duration:e[t].duration.v,asset_utilization:Number(e[t].duration.raw/(12*60*60*i)*100).toFixed(2),idle:e[t].idle.v,in_movement:e[t].in_movement.v,period_count:e[t].period_count.v,avg_period:e[t].avg_period.v,percent_in_movement:e[t].percent_in_movement.v,percent_idle:e[t].percent_idle.v})}this.loading=!1},methods:{exportTable(){c(this.columns,this.rows,"Gensets Engine Hours Report.xlsx")},exportCSV(){u(this.columns,this.rows,"Gensets Engine Hours Report.csv")}}}),k={class:"full-width q-mt-md",align:"right"};function C(o,n,i,e,t,y){return _(),v(h,null,[g("div",k,[a(s,{flat:"",onClick:n[0]||(n[0]=R=>this.$router.push("/home")),icon:"keyboard_arrow_left",class:"text-positive",title:"Back"})]),a(b,{title:"Engine Hours Report",rows:o.rows,columns:o.columns,"row-key":"asset_name",class:"sticky-column","rows-per-page-options":[10,20,100],loading:o.loading},{"top-right":f(()=>[a(s,{color:"primary","icon-right":"download",label:"xls","no-caps":"",onClick:o.exportTable},null,8,["onClick"]),a(s,{color:"primary","icon-right":"download",label:"csv","no-caps":"",onClick:o.exportCSV,class:"q-mx-sm"},null,8,["onClick"])]),_:1},8,["rows","columns","loading"])],64)}var z=r(x,[["render",C]]);export{z as default};
