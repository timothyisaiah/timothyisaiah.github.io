import{Q as _,a as f,b as m,c as p}from"./QTabPanels.4cfb44d4.js";import{_ as h,e as v,m as c,r as b,ao as w,p as g,o as q,i as y,n as s,w as o,ar as C,F as V,aI as i}from"./index.58098a9e.js";import{M as R}from"./BarChart.6cc6b273.js";import"./QResizeObserver.b6902c64.js";import"./rtl.b51694b1.js";import"./touch.70a9dd44.js";import"./selection.ce734f55.js";import"./use-cache.b0833c75.js";const T=v({name:"App",components:{MonthlyChart:R},computed:{...c("reports",["getReports"])},data(){return{data_values:[],data_labels:[],fuel_assets:[],fuel_consumed_data:[],refueling_data:[],mileage_data:[],trips_data:[],driver_trips_count:[],trip_drivers:[],trips_mileage:[],tab:b("assets")}},async mounted(){let e=w.findIn(this.getReports.activeReports),t=e[e.findIndex(l=>l.title==="Trip report")];if(t&&t.sheets=="Exceeded Memory Limit"&&await api.report.retreiveReport(t.id).then(l=>{t=l.report}),t&&t.sheets[0].header!="No data found"){let l=t.sheets[0].sections[0].data,d=t.sheets;for(let a in l)this.data_labels.push(l[a].header),this.mileage_data.push(l[a].rows[0].length.raw?l[a].rows[0].length.raw:0),this.trips_data.push(l[a].rows[0].count.raw?l[a].rows[0].count.raw:0);for(let a in d)a!="0"&&(this.trip_drivers.push(d[a].sections[1].data[0].rows[0].driver.v),this.driver_trips_count.push(d[a].sections[1].data[0].rows[0].count.raw?d[a].sections[1].data[0].rows[0].count.raw:0),this.trips_mileage.push(d[a].sections[1].data[0].rows[0].length.raw?d[a].sections[1].data[0].rows[0].length.raw:0));let n=e[e.findIndex(a=>a.title==="Fuel report")];if(n&&n.sheets[0].sections[0].text!="No data"){let a=n.sheets[0].sections[0].data[0].rows;for(let r in a)this.fuel_assets.push(a[r].object.v),this.refueling_data.push(a[r].fillingsVolume.raw?a[r].fillingsVolume.raw:0),this.fuel_consumed_data.push(a[r].consumed.raw?a[r].consumed.raw:0)}}}});function Q(e,t,l,d,n,a){const r=g("MonthlyChart");return q(),y(V,null,[s(_,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=u=>e.tab=u),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:o(()=>[s(m,{name:"assets",label:"Assets"}),s(m,{name:"drivers",label:"Drivers"}),s(m,{name:"fuel",label:"Fuel"})]),_:1},8,["modelValue"]),s(C),s(f,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=u=>e.tab=u),animated:""},{default:o(()=>[s(p,{name:"assets"},{default:o(()=>[s(i,{class:"col-grow q-ma-sm q-pa-sm"},{default:o(()=>[s(r,{data_labels:e.data_labels,data_values:e.mileage_data,chart_name:"Asset vs Mileage Covered (Km)"},null,8,["data_labels","data_values"])]),_:1}),s(i,{class:"col-grow q-ma-sm q-pa-sm"},{default:o(()=>[s(r,{data_labels:e.data_labels,data_values:e.trips_data,chart_name:"Asset vs Trips Count"},null,8,["data_labels","data_values"])]),_:1})]),_:1}),s(p,{name:"drivers"},{default:o(()=>[s(i,{class:"col-grow q-ma-sm q-pa-sm"},{default:o(()=>[s(r,{data_labels:e.trip_drivers,data_values:e.driver_trips_count,chart_name:"Driver vs Trips Count"},null,8,["data_labels","data_values"])]),_:1}),s(i,{class:"col-grow q-ma-sm q-pa-sm"},{default:o(()=>[s(r,{data_labels:e.trip_drivers,data_values:e.trips_mileage,chart_name:"Driver vs Trips Length (Km)"},null,8,["data_labels","data_values"])]),_:1})]),_:1}),s(p,{name:"fuel"},{default:o(()=>[s(i,{class:"col-grow q-ma-sm q-pa-sm"},{default:o(()=>[s(r,{data_labels:e.fuel_assets,data_values:e.fuel_consumed_data,chart_name:"Asset vs Fuel Consumed (L)"},null,8,["data_labels","data_values"])]),_:1}),s(i,{class:"col-grow q-ma-sm q-pa-sm"},{default:o(()=>[s(r,{data_labels:e.fuel_assets,data_values:e.refueling_data,chart_name:"Asset vs Refueling (L)"},null,8,["data_labels","data_values"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var j=h(T,[["render",Q]]);export{j as default};
